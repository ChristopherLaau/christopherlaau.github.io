<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Christopherã®åšå®¢</title>
  
  <subtitle>çº¸ä¸Šå¾—æ¥ç»ˆè§‰æµ…</subtitle>
  <link href="https://christopherrliu.github.io/atom.xml" rel="self"/>
  
  <link href="https://christopherrliu.github.io/"/>
  <updated>2020-11-15T13:23:36.905Z</updated>
  <id>https://christopherrliu.github.io/</id>
  
  <author>
    <name>Christopher Liu</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>leetcodeå‘¨èµ›-weekly-contest-215</title>
    <link href="https://christopherrliu.github.io/2020/11/15/leetcode%E5%91%A8%E8%B5%9B/leetcode%E5%91%A8%E8%B5%9B-weekly-contest-215/"/>
    <id>https://christopherrliu.github.io/2020/11/15/leetcode%E5%91%A8%E8%B5%9B/leetcode%E5%91%A8%E8%B5%9B-weekly-contest-215/</id>
    <published>2020-11-15T09:56:17.000Z</published>
    <updated>2020-11-15T13:23:36.905Z</updated>
    
    <content type="html"><![CDATA[<p>ç¬¬ä¸‰æ¬¡å‘¨èµ›âœŠ</p><p><img src="https://i.loli.net/2020/11/15/CsnXWBwNV7fTlKz.png" alt="" /></p><a id="more"></a><h3 id="è®¾è®¡æœ‰åºæµ"><a class="markdownIt-Anchor" href="#è®¾è®¡æœ‰åºæµ"></a> <a href="https://leetcode-cn.com/problems/design-an-ordered-stream/">è®¾è®¡æœ‰åºæµ</a></h3><h4 id="é¢˜æ„"><a class="markdownIt-Anchor" href="#é¢˜æ„"></a> é¢˜æ„</h4><p><img src="https://i.loli.net/2020/11/15/OnMhKVq71adjzep.png" alt="" /></p><h4 id="åšæ³•"><a class="markdownIt-Anchor" href="#åšæ³•"></a> åšæ³•</h4><p>æ°´é¢˜ï¼Œæ¨¡æ‹Ÿä¸€ä¸‹å°±å¥½äº†</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">OrderedStream</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    OrderedStream(<span class="keyword">int</span> n) &#123;</span><br><span class="line">        size = n;</span><br><span class="line">        ptr = <span class="number">1</span>;</span><br><span class="line">        datas.resize(n + <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; <span class="title">insert</span><span class="params">(<span class="keyword">int</span> id, <span class="built_in">string</span> value)</span> </span>&#123;</span><br><span class="line">        datas[id] = value;</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; res;</span><br><span class="line">        <span class="keyword">while</span>(ptr &lt;= size &amp;&amp; datas[ptr] != <span class="string">&quot;&quot;</span>) &#123;</span><br><span class="line">            res.push_back(datas[ptr]);</span><br><span class="line">            ++ptr;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="keyword">int</span> size;</span><br><span class="line">    <span class="keyword">int</span> ptr;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; datas;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Your OrderedStream object will be instantiated and called as such:</span></span><br><span class="line"><span class="comment"> * OrderedStream* obj = new OrderedStream(n);</span></span><br><span class="line"><span class="comment"> * vector&lt;string&gt; param_1 = obj-&gt;insert(id,value);</span></span><br><span class="line"><span class="comment"> */</span>s</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2020/11/15/b5PBDiRJYm3rLFp.png" alt="" /></p><h3 id="ç¡®å®šä¸¤ä¸ªå­—ç¬¦ä¸²æ˜¯å¦æ¥è¿‘"><a class="markdownIt-Anchor" href="#ç¡®å®šä¸¤ä¸ªå­—ç¬¦ä¸²æ˜¯å¦æ¥è¿‘"></a> <a href="https://leetcode-cn.com/problems/determine-if-two-strings-are-close/">ç¡®å®šä¸¤ä¸ªå­—ç¬¦ä¸²æ˜¯å¦æ¥è¿‘</a></h3><h4 id="é¢˜æ„-2"><a class="markdownIt-Anchor" href="#é¢˜æ„-2"></a> é¢˜æ„</h4><p><img src="https://i.loli.net/2020/11/15/8ZHmizxEaCtXUPK.png" alt="" /></p><h4 id="åšæ³•-2"><a class="markdownIt-Anchor" href="#åšæ³•-2"></a> åšæ³•</h4><p>æ¯”è¾ƒç®€å•çš„ä¸€ä¸ªé¢˜ï¼Œä½†æ˜¯æ¯”èµ›çš„æ—¶å€™æ²¡æƒ³å‡ºæ¥ï¼ŒğŸ¤¦â€</p><p>è¿™ç§ç±»å‹çš„é¢˜ç›®é¦–å…ˆè¦æ€»ç»“æ¯ç§å˜æ¢çš„æœ¬è´¨ï¼š</p><ul><li>1.äº¤æ¢ä»»æ„ä¸¤ä¸ªç°æœ‰å­—ç¬¦ï¼Œè¿™ä¸ªæ“ä½œä½¿å¾—ä¸€ä¸ªåºåˆ—å¯ä»¥å˜æ¢æˆä»»æ„ä¸€ä¸ªå…¶å®ƒçš„æ’åˆ—</li><li>2.å°†ä¸€ä¸ªå­—ç¬¦çš„æ‰€æœ‰å‡ºç°è½¬æ¢æˆå¦ä¸€ä¸ªç°æœ‰å­—ç¬¦ï¼Œè¿™ä¸ªæ“ä½œå¯ä»¥è¿™æ ·çœ‹ï¼š<code>abcbde</code>çš„æ‰€æœ‰å­—ç¬¦å‡ºç°æ¬¡æ•°ä¸º<code>&#123;a:1,b:2,d:1,e:1&#125;</code>ï¼Œæ“ä½œ2å°±ç›¸å½“äºå¯¹å‡ºç°æ¬¡æ•°åšæ“ä½œ1</li></ul><p>ä¹Ÿå°±æ˜¯è¯´åªè¦æ»¡è¶³ä»¥ä¸‹æ¡ä»¶çš„å­—ç¬¦ä¸²å°±æ˜¯æ¥è¿‘çš„ï¼š</p><ul><li>å‡ºç°çš„å­—ç¬¦å®Œå…¨ç›¸åŒ</li><li>å­—ç¬¦å‡ºç°æ¬¡æ•°çš„æ•°ç»„å®Œå…¨ç›¸åŒ</li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">closeStrings</span><span class="params">(<span class="built_in">string</span> word1, <span class="built_in">string</span> word2)</span> </span>&#123;</span><br><span class="line">        <span class="built_in">unordered_map</span>&lt;<span class="keyword">char</span>, <span class="keyword">int</span>&gt; hash1, hash2, hash3;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">const</span> <span class="keyword">auto</span>&amp; s : word1) &#123;</span><br><span class="line">            hash1[s]++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">const</span> <span class="keyword">auto</span>&amp; s : word2) &#123;</span><br><span class="line">            <span class="keyword">if</span>(!hash1.count(s)) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            hash2[s]++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(hash2.size() != hash1.size()) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">auto</span> it = hash1.begin(); it != hash1.end(); ++it) &#123;</span><br><span class="line">            hash3[(*it).second]++; </span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">auto</span> it = hash2.begin(); it != hash2.end(); ++it) &#123;</span><br><span class="line">            <span class="keyword">if</span>(!hash3.count((*it).second)) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            hash3[(*it).second]--;</span><br><span class="line">            <span class="keyword">if</span>(hash3[(*it).second] == <span class="number">0</span>) hash3.erase((*it).second);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(hash3.size()) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2020/11/15/f56eCNr4oOIaZHM.png" alt="" /></p><h3 id="å°†-x-å‡åˆ°-0-çš„æœ€å°æ“ä½œæ•°"><a class="markdownIt-Anchor" href="#å°†-x-å‡åˆ°-0-çš„æœ€å°æ“ä½œæ•°"></a> <a href="https://leetcode-cn.com/problems/minimum-operations-to-reduce-x-to-zero/">å°† x å‡åˆ° 0 çš„æœ€å°æ“ä½œæ•°</a></h3><h4 id="é¢˜æ„-3"><a class="markdownIt-Anchor" href="#é¢˜æ„-3"></a> é¢˜æ„</h4><p><img src="https://i.loli.net/2020/11/15/rAgtxUvzQT2OcdG.png" alt="" /></p><h4 id="åšæ³•-3"><a class="markdownIt-Anchor" href="#åšæ³•-3"></a> åšæ³•</h4><p>å…ˆæƒ³äº†ä¸€ä¸ªåŠ¨æ€è§„åˆ’çš„æ–¹æ³•ï¼š<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>d</mi><mi>p</mi><mo>[</mo><mi>i</mi><mo>]</mo><mo>[</mo><mi>j</mi><mo>]</mo></mrow><annotation encoding="application/x-tex">dp[i][j]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">d</span><span class="mord mathit">p</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mclose">]</span></span></span></span>è¡¨ç¤ºç§»é™¤äº†<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.65952em;"></span><span class="strut bottom" style="height:0.65952em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">i</span></span></span></span>ä¸ªæ•°å­—ï¼Œå½“å‰æ•°ç»„çš„é¦–ä½æ˜¯<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>j</mi></mrow><annotation encoding="application/x-tex">j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.65952em;"></span><span class="strut bottom" style="height:0.85396em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.05724em;">j</span></span></span></span>ï¼ˆå¯ä»¥çœ‹å‡ºæ•°ç»„çš„å°¾éƒ¨<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi><mi>u</mi><mi>m</mi><mi>s</mi><mi mathvariant="normal">.</mi><mi>l</mi><mi>e</mi><mi>n</mi><mi>g</mi><mi>t</mi><mi>h</mi><mo>âˆ’</mo><mo>(</mo><mi>i</mi><mo>âˆ’</mo><mi>j</mi><mo>)</mo><mo>âˆ’</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">nums.length - (i - j) - 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">n</span><span class="mord mathit">u</span><span class="mord mathit">m</span><span class="mord mathit">s</span><span class="mord mathrm">.</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">e</span><span class="mord mathit">n</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord mathit">t</span><span class="mord mathit">h</span><span class="mbin">âˆ’</span><span class="mopen">(</span><span class="mord mathit">i</span><span class="mbin">âˆ’</span><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mclose">)</span><span class="mbin">âˆ’</span><span class="mord mathrm">1</span></span></span></span>ï¼‰æ—¶ç§»é™¤å…ƒç´ å’Œçš„æœ€å¤§å€¼ï¼Œé‚£ä¹ˆæœ‰è½¬ç§»æ–¹ç¨‹ï¼š<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>d</mi><mi>p</mi><mo>[</mo><mi>i</mi><mo>]</mo><mo>[</mo><mi>j</mi><mo>]</mo><mo>=</mo><mi>m</mi><mi>a</mi><mi>x</mi><mo>(</mo><mi>d</mi><mi>p</mi><mo>[</mo><mi>i</mi><mo>âˆ’</mo><mn>1</mn><mo>]</mo><mo>[</mo><mi>j</mi><mo>âˆ’</mo><mn>1</mn><mo>]</mo><mo>+</mo><mi>n</mi><mi>u</mi><mi>m</mi><mi>s</mi><mo>[</mo><mi>j</mi><mo>âˆ’</mo><mn>1</mn><mo>]</mo><mo separator="true">,</mo><mi>d</mi><mi>p</mi><mo>[</mo><mi>i</mi><mo>âˆ’</mo><mn>1</mn><mo>]</mo><mo>[</mo><mi>j</mi><mo>]</mo><mo>+</mo><mi>n</mi><mi>u</mi><mi>m</mi><mi>s</mi><mo>[</mo><mi>n</mi><mi>u</mi><mi>m</mi><mi>s</mi><mi mathvariant="normal">.</mi><mi>l</mi><mi>e</mi><mi>n</mi><mi>g</mi><mi>t</mi><mi>h</mi><mo>âˆ’</mo><mi>i</mi><mo>+</mo><mi>j</mi><mo>]</mo><mo>)</mo></mrow><annotation encoding="application/x-tex">dp[i][j] = max(dp[i - 1][j - 1] + nums[j - 1], dp[i - 1][j] + nums[nums.length - i + j])</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">d</span><span class="mord mathit">p</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mclose">]</span><span class="mrel">=</span><span class="mord mathit">m</span><span class="mord mathit">a</span><span class="mord mathit">x</span><span class="mopen">(</span><span class="mord mathit">d</span><span class="mord mathit">p</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mbin">âˆ’</span><span class="mord mathrm">1</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mbin">âˆ’</span><span class="mord mathrm">1</span><span class="mclose">]</span><span class="mbin">+</span><span class="mord mathit">n</span><span class="mord mathit">u</span><span class="mord mathit">m</span><span class="mord mathit">s</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mbin">âˆ’</span><span class="mord mathrm">1</span><span class="mclose">]</span><span class="mpunct">,</span><span class="mord mathit">d</span><span class="mord mathit">p</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mbin">âˆ’</span><span class="mord mathrm">1</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mclose">]</span><span class="mbin">+</span><span class="mord mathit">n</span><span class="mord mathit">u</span><span class="mord mathit">m</span><span class="mord mathit">s</span><span class="mopen">[</span><span class="mord mathit">n</span><span class="mord mathit">u</span><span class="mord mathit">m</span><span class="mord mathit">s</span><span class="mord mathrm">.</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">e</span><span class="mord mathit">n</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord mathit">t</span><span class="mord mathit">h</span><span class="mbin">âˆ’</span><span class="mord mathit">i</span><span class="mbin">+</span><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mclose">]</span><span class="mclose">)</span></span></span></span></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">1e5</span> + <span class="number">5</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">minOperations</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums, <span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = nums.size();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> rn = <span class="number">1</span>; rn &lt;= n; ++rn) &#123;</span><br><span class="line">            <span class="built_in">memset</span>(temp, <span class="number">0</span>, <span class="keyword">sizeof</span>(temp));</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = max(<span class="number">0</span>, rn - n + <span class="number">2</span>); i &lt;= rn; ++i) &#123;</span><br><span class="line">                <span class="keyword">if</span>(i == <span class="number">0</span>) temp[i] = dp[i] + nums[n - rn + i];</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span>(n - rn + i &gt;= n) temp[i] = dp[i - <span class="number">1</span>] + nums[i - <span class="number">1</span>];</span><br><span class="line">                <span class="keyword">else</span> temp[i] = max(dp[i - <span class="number">1</span>] + nums[i - <span class="number">1</span>], dp[i] + nums[n - rn + i]);</span><br><span class="line">                <span class="keyword">if</span>(temp[i] == x) &#123;</span><br><span class="line">                    <span class="keyword">return</span> rn;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">memcpy</span>(dp, temp, <span class="keyword">sizeof</span>(temp));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="keyword">int</span> dp[maxn];</span><br><span class="line">    <span class="keyword">int</span> temp[maxn];</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹å‡ºè¿™æ ·çš„æœ€åç®—æ³•æ—¶é—´å¤æ‚åº¦æ˜¯<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><msup><mi>n</mi><mn>2</mn></msup><mo>)</mo></mrow><annotation encoding="application/x-tex">O(n^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8141079999999999em;"></span><span class="strut bottom" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">n</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span>ï¼Œæœä¸å…¶ç„¶è¶…æ—¶äº†</p><p><img src="https://i.loli.net/2020/11/15/Qpzs6DjIYMOyBlb.png" alt="" /></p><p>è€ƒè™‘å…¶ä»–ç®—æ³•ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œæ‰€æœ‰çš„numså…ƒç´ éƒ½æ˜¯æ­£çš„ï¼Œå…ƒç´ å’Œä¹Ÿå°±æ»¡è¶³å•è°ƒæ€§ï¼Œå¯ä»¥ç”¨åŒæŒ‡é’ˆæ³•æ¥è§£å†³ï¼Œå…·ä½“æ¥è¯´ï¼šè®¾ç½®<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>l</mi><mi>e</mi><mi>f</mi><mi>t</mi></mrow><annotation encoding="application/x-tex">left</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mord mathit">t</span></span></span></span>å’Œ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>r</mi><mi>i</mi><mi>g</mi><mi>h</mi><mi>t</mi></mrow><annotation encoding="application/x-tex">right</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">i</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord mathit">h</span><span class="mord mathit">t</span></span></span></span>æŒ‡å‘é¦–éƒ¨å’Œå°¾éƒ¨ï¼Œç„¶åç§»åŠ¨<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>r</mi><mi>i</mi><mi>g</mi><mi>h</mi><mi>t</mi></mrow><annotation encoding="application/x-tex">right</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">i</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord mathit">h</span><span class="mord mathit">t</span></span></span></span>æŒ‡é’ˆï¼Œä½¿å¾—<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msubsup><mo>âˆ‘</mo><mrow><mi>i</mi><mo>=</mo><mi>r</mi><mi>i</mi><mi>g</mi><mi>h</mi><mi>t</mi></mrow><mrow><mi>n</mi></mrow></msubsup><mi>n</mi><mi>u</mi><mi>m</mi><mi>s</mi><mo>[</mo><mi>i</mi><mo>]</mo><mo>&lt;</mo><mo>=</mo><mi>x</mi></mrow><annotation encoding="application/x-tex">\sum_{i=right}^{n}nums[i] &lt;= x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1.186118em;vertical-align:-0.436118em;"></span><span class="base textstyle uncramped"><span class="mop"><span class="op-symbol small-op mop" style="top:-0.0000050000000000050004em;">âˆ‘</span><span class="vlist"><span style="top:0.30001em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">i</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord mathit">h</span><span class="mord mathit">t</span></span></span></span><span style="top:-0.364em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit">n</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathit">n</span><span class="mord mathit">u</span><span class="mord mathit">m</span><span class="mord mathit">s</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mclose">]</span><span class="mrel">&lt;</span><span class="mrel">=</span><span class="mord mathit">x</span></span></span></span>ï¼Œè¿™æ ·ä¸€æ¥å°±å¯ä»¥é€æ­¥å¢åŠ <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>l</mi><mi>e</mi><mi>f</mi><mi>t</mi></mrow><annotation encoding="application/x-tex">left</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mord mathit">t</span></span></span></span>çš„å€¼ï¼Œæ ¹æ®<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msubsup><mo>âˆ‘</mo><mrow><mi>i</mi><mo>=</mo><mn>0</mn></mrow><mrow><mi>l</mi><mi>e</mi><mi>f</mi><mi>t</mi></mrow></msubsup><mi>n</mi><mi>u</mi><mi>m</mi><mi>s</mi><mo>[</mo><mi>i</mi><mo>]</mo><mo>+</mo><msubsup><mo>âˆ‘</mo><mrow><mi>j</mi><mo>=</mo><mi>r</mi><mi>i</mi><mi>g</mi><mi>h</mi><mi>t</mi></mrow><mrow><mi>n</mi></mrow></msubsup><mi>n</mi><mi>u</mi><mi>m</mi><mi>s</mi><mo>[</mo><mi>j</mi><mo>]</mo></mrow><annotation encoding="application/x-tex">\sum_{i = 0}^{left}nums[i] + \sum_{j = right}^{n}nums[j]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.9670159999999999em;"></span><span class="strut bottom" style="height:1.4031339999999999em;vertical-align:-0.436118em;"></span><span class="base textstyle uncramped"><span class="mop"><span class="op-symbol small-op mop" style="top:-0.0000050000000000050004em;">âˆ‘</span><span class="vlist"><span style="top:0.276864em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mrel">=</span><span class="mord mathrm">0</span></span></span></span><span style="top:-0.480908em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mord mathit">t</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathit">n</span><span class="mord mathit">u</span><span class="mord mathit">m</span><span class="mord mathit">s</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mclose">]</span><span class="mbin">+</span><span class="mop"><span class="op-symbol small-op mop" style="top:-0.0000050000000000050004em;">âˆ‘</span><span class="vlist"><span style="top:0.30001em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">i</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord mathit">h</span><span class="mord mathit">t</span></span></span></span><span style="top:-0.364em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit">n</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathit">n</span><span class="mord mathit">u</span><span class="mord mathit">m</span><span class="mord mathit">s</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mclose">]</span></span></span></span>çš„å€¼ä¸<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.43056em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">x</span></span></span></span>çš„å…³ç³»ç§»åŠ¨<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>r</mi><mi>i</mi><mi>g</mi><mi>h</mi><mi>t</mi></mrow><annotation encoding="application/x-tex">right</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">i</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord mathit">h</span><span class="mord mathit">t</span></span></span></span>æŒ‡é’ˆï¼Œç›´åˆ°<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msubsup><mo>âˆ‘</mo><mrow><mi>i</mi><mo>=</mo><mn>0</mn></mrow><mrow><mi>l</mi><mi>e</mi><mi>f</mi><mi>t</mi></mrow></msubsup><mi>n</mi><mi>u</mi><mi>m</mi><mi>s</mi><mo>[</mo><mi>i</mi><mo>]</mo><mo>&gt;</mo><mi>x</mi></mrow><annotation encoding="application/x-tex">\sum_{i = 0}^{left}nums[i] &gt; x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.9670159999999999em;"></span><span class="strut bottom" style="height:1.2438799999999999em;vertical-align:-0.276864em;"></span><span class="base textstyle uncramped"><span class="mop"><span class="op-symbol small-op mop" style="top:-0.0000050000000000050004em;">âˆ‘</span><span class="vlist"><span style="top:0.276864em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mrel">=</span><span class="mord mathrm">0</span></span></span></span><span style="top:-0.480908em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mord mathit">t</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathit">n</span><span class="mord mathit">u</span><span class="mord mathit">m</span><span class="mord mathit">s</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mclose">]</span><span class="mrel">&gt;</span><span class="mord mathit">x</span></span></span></span>ï¼Œéå†ç»“æŸ</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">minOperations</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums, <span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = nums.size();</span><br><span class="line">        <span class="keyword">int</span> left = <span class="number">0</span>, right = n;</span><br><span class="line">        <span class="keyword">int</span> sum = <span class="number">0</span>, lsum = <span class="number">0</span>, ans = INT_MAX;</span><br><span class="line">        <span class="keyword">while</span>(right &gt; <span class="number">0</span> &amp;&amp; sum &lt; x) sum += nums[--right];</span><br><span class="line">        <span class="keyword">if</span>(sum == x) ans = min(ans, n - right);</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(right == <span class="number">-1</span>) <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">else</span> sum -= nums[right++];</span><br><span class="line">        <span class="keyword">for</span>( ; left &lt; right; ++left) &#123;</span><br><span class="line">            sum += nums[left];</span><br><span class="line">            lsum += nums[left];</span><br><span class="line">            <span class="keyword">if</span>(lsum &gt; x) <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">while</span>(right &lt; n &amp;&amp; sum &gt; x) sum -= nums[right++];</span><br><span class="line">            <span class="keyword">if</span>(sum == x) ans = min(ans, n - right + left + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans == INT_MAX ? <span class="number">-1</span> : ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2020/11/15/p1v6ELyMdagZclU.png" alt="" /></p><p>æ—¶é—´å¤æ‚åº¦<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><mi>n</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathit">n</span><span class="mclose">)</span></span></span></span></p><h3 id="æœ€å¤§åŒ–ç½‘æ ¼å¹¸ç¦æ„Ÿ"><a class="markdownIt-Anchor" href="#æœ€å¤§åŒ–ç½‘æ ¼å¹¸ç¦æ„Ÿ"></a> <a href="https://leetcode-cn.com/problems/maximize-grid-happiness/">æœ€å¤§åŒ–ç½‘æ ¼å¹¸ç¦æ„Ÿ</a></h3><h3 id="é¢˜æ„-4"><a class="markdownIt-Anchor" href="#é¢˜æ„-4"></a> é¢˜æ„</h3><p><img src="https://i.loli.net/2020/11/15/uZdACRhwVBxFXGO.png" alt="" /></p><h3 id="åšæ³•-4"><a class="markdownIt-Anchor" href="#åšæ³•-4"></a> åšæ³•</h3><p>ä¸€çœ‹æ•°æ®èŒƒå›´<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn><mo>â‰¤</mo><mi>m</mi><mo separator="true">,</mo><mi>n</mi><mo>â‰¤</mo><mn>5</mn></mrow><annotation encoding="application/x-tex">1 \le m,n \le 5</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.64444em;"></span><span class="strut bottom" style="height:0.8388800000000001em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord mathrm">1</span><span class="mrel">â‰¤</span><span class="mord mathit">m</span><span class="mpunct">,</span><span class="mord mathit">n</span><span class="mrel">â‰¤</span><span class="mord mathrm">5</span></span></span></span>ï¼Œæœæ–­çŠ¶æ€å‹ç¼©ï¼Œä½†æ˜¯è¿™é¢˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯æ¯ä¸ªæ ¼å­çš„çŠ¶æ€æœ‰ä¸‰ä¸ªï¼Œæ²¡æ³•ç”¨<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>0</mn><mo separator="true">,</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">0,1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.64444em;"></span><span class="strut bottom" style="height:0.8388800000000001em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord mathrm">0</span><span class="mpunct">,</span><span class="mord mathrm">1</span></span></span></span>æ¥è¡¨ç¤ºï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±ç”¨ä¸‰è¿›åˆ¶è®°å½•çŠ¶æ€ï¼Œè‹¥å½“å‰çŠ¶æ€ä¸º<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mi>t</mi><mi>a</mi><mi>t</mi><mi>e</mi></mrow><annotation encoding="application/x-tex">state</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.61508em;"></span><span class="strut bottom" style="height:0.61508em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">s</span><span class="mord mathit">t</span><span class="mord mathit">a</span><span class="mord mathit">t</span><span class="mord mathit">e</span></span></span></span>ï¼Œç¬¬<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>i</mi><mi>n</mi><mi>d</mi><mi>e</mi><mi>x</mi></mrow><annotation encoding="application/x-tex">index</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.69444em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">i</span><span class="mord mathit">n</span><span class="mord mathit">d</span><span class="mord mathit">e</span><span class="mord mathit">x</span></span></span></span>ä¸ªæ ¼å­çš„çŠ¶æ€å°±æ˜¯<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>(</mo><mi>s</mi><mi>t</mi><mi>a</mi><mi>t</mi><mi>e</mi><mi mathvariant="normal">/</mi><msup><mn>3</mn><mrow><mi>i</mi><mi>n</mi><mi>d</mi><mi>e</mi><mi>x</mi></mrow></msup><mo>)</mo><mi mathvariant="normal">%</mi><mn>3</mn></mrow><annotation encoding="application/x-tex">(state / 3^{index}) \% 3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.849108em;"></span><span class="strut bottom" style="height:1.099108em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mopen">(</span><span class="mord mathit">s</span><span class="mord mathit">t</span><span class="mord mathit">a</span><span class="mord mathit">t</span><span class="mord mathit">e</span><span class="mord mathrm">/</span><span class="mord"><span class="mord mathrm">3</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit">i</span><span class="mord mathit">n</span><span class="mord mathit">d</span><span class="mord mathit">e</span><span class="mord mathit">x</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mord mathrm">%</span><span class="mord mathrm">3</span></span></span></span>ã€‚å¦å¤–ç”±äºæœ¬é¢˜è¿˜é™åˆ¶äº†å†…å‘å’Œå¤–å‘äººçš„ä¸ªæ•°ï¼Œæ‰€ä»¥è¿˜éœ€è¦ä¸¤ç»´æ¥è®°å½•äººçš„ä¸ªæ•°</p><p>ç”¨<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>d</mi><mi>p</mi><mo>[</mo><mi>r</mi><mi>o</mi><mi>w</mi><mo>]</mo><mo>[</mo><mi>s</mi><mi>t</mi><mi>a</mi><mi>t</mi><mi>e</mi><mo>]</mo><mo>[</mo><mi>x</mi><mo>]</mo><mo>[</mo><mi>y</mi><mo>]</mo></mrow><annotation encoding="application/x-tex">dp[row][state][x][y]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">d</span><span class="mord mathit">p</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right:0.02691em;">w</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathit">s</span><span class="mord mathit">t</span><span class="mord mathit">a</span><span class="mord mathit">t</span><span class="mord mathit">e</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathit">x</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="mclose">]</span></span></span></span>è¡¨ç¤ºç¬¬<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>r</mi><mi>o</mi><mi>w</mi></mrow><annotation encoding="application/x-tex">row</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.43056em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right:0.02691em;">w</span></span></span></span>è¡ŒçŠ¶æ€ä¸º<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mi>t</mi><mi>a</mi><mi>t</mi><mi>e</mi></mrow><annotation encoding="application/x-tex">state</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.61508em;"></span><span class="strut bottom" style="height:0.61508em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">s</span><span class="mord mathit">t</span><span class="mord mathit">a</span><span class="mord mathit">t</span><span class="mord mathit">e</span></span></span></span>ï¼Œå‰©ä½™<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.43056em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">x</span></span></span></span>ä¸ªå†…å‘çš„äººï¼Œ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>y</mi></mrow><annotation encoding="application/x-tex">y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.03588em;">y</span></span></span></span>ä¸ªå¤–å‘çš„äººçš„æœ€å¤§å¹¸ç¦æ„Ÿ</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">getMaxGridHappiness</span><span class="params">(<span class="keyword">int</span> m, <span class="keyword">int</span> n, <span class="keyword">int</span> introvertsCount, <span class="keyword">int</span> extrovertsCount)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> ans = <span class="number">-1</span>;</span><br><span class="line">        pow3[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span>(m &lt; n) swap(m, n);</span><br><span class="line">        <span class="built_in">memset</span>(dp, <span class="number">0x80</span>, <span class="keyword">sizeof</span>(dp));</span><br><span class="line">        dp[<span class="number">0</span>][<span class="number">0</span>][introvertsCount][extrovertsCount] = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) pow3[i] = pow3[i - <span class="number">1</span>] * <span class="number">3</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> row = <span class="number">1</span>; row &lt;= m; ++row) &#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> preState = <span class="number">0</span>; preState &lt; pow3[n]; ++preState) &#123;</span><br><span class="line">                <span class="keyword">if</span>(row == <span class="number">1</span> &amp;&amp; preState &gt; <span class="number">0</span>) <span class="keyword">continue</span>; </span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> curState = <span class="number">0</span>; curState &lt; pow3[n]; ++curState) &#123;</span><br><span class="line">                    <span class="keyword">for</span>(<span class="keyword">int</span> oi = <span class="number">0</span>; oi &lt;= introvertsCount; ++oi) &#123;</span><br><span class="line">                        <span class="keyword">for</span>(<span class="keyword">int</span> oe = <span class="number">0</span>; oe &lt;= extrovertsCount; ++oe) &#123;</span><br><span class="line">                            <span class="keyword">if</span>(dp[row - <span class="number">1</span>][preState][oi][oe] &lt; <span class="number">0</span>) <span class="keyword">continue</span>;</span><br><span class="line">                            <span class="keyword">int</span> hap = <span class="number">0</span>, ni = oi, ne = oe;</span><br><span class="line">                            <span class="keyword">int</span> pd, cd, pcd = <span class="number">-1</span>;</span><br><span class="line">                            <span class="keyword">for</span>(<span class="keyword">int</span> index = <span class="number">0</span>; index &lt; n; ++index) &#123;</span><br><span class="line">                                pd = getDigit(preState, index), cd = getDigit(curState, index);</span><br><span class="line">                                <span class="keyword">if</span>(cd == <span class="number">1</span>) &#123;</span><br><span class="line">                                    <span class="keyword">int</span> add = <span class="number">120</span>;</span><br><span class="line">                                    add -= (pcd == <span class="number">1</span>) * <span class="number">60</span> + (pcd == <span class="number">2</span>) * <span class="number">10</span>;</span><br><span class="line">                                    add -= (pd == <span class="number">1</span>) * <span class="number">60</span> + (pd == <span class="number">2</span>) * <span class="number">10</span>;</span><br><span class="line">                                    ni -= <span class="number">1</span>, hap += add;</span><br><span class="line">                                &#125;</span><br><span class="line">                                <span class="keyword">else</span> <span class="keyword">if</span>(cd == <span class="number">2</span>) &#123;</span><br><span class="line">                                    <span class="keyword">int</span> add = <span class="number">40</span>;</span><br><span class="line">                                    <span class="keyword">if</span>(pcd == <span class="number">1</span>) add -= <span class="number">10</span>;</span><br><span class="line">                                    <span class="keyword">else</span> <span class="keyword">if</span>(pcd == <span class="number">2</span>) add += <span class="number">40</span>;</span><br><span class="line">                                    <span class="keyword">if</span>(pd == <span class="number">1</span>) add -= <span class="number">10</span>;</span><br><span class="line">                                    <span class="keyword">else</span> <span class="keyword">if</span>(pd == <span class="number">2</span>) add += <span class="number">40</span>;</span><br><span class="line">                                    ne -= <span class="number">1</span>, hap += add;</span><br><span class="line">                                &#125;</span><br><span class="line">                                <span class="keyword">if</span>(ni &lt; <span class="number">0</span> || ne &lt; <span class="number">0</span>) <span class="keyword">break</span>;</span><br><span class="line">                                pcd = cd;</span><br><span class="line">                            &#125;</span><br><span class="line">                            <span class="keyword">if</span>(ni &gt;= <span class="number">0</span> &amp;&amp; ne &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">                                dp[row][curState][ni][ne] = max(dp[row][curState][ni][ne], dp[row - <span class="number">1</span>][preState][oi][oe] + hap);</span><br><span class="line">                                <span class="keyword">if</span>(row == m) ans = max(ans, dp[row][curState][ni][ne]);</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">getDigit</span><span class="params">(<span class="keyword">int</span> num, <span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(index &lt; <span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">return</span> (num / pow3[index]) % <span class="number">3</span>;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="keyword">int</span> pow3[<span class="number">6</span>];</span><br><span class="line">    <span class="keyword">int</span> dp[<span class="number">6</span>][<span class="number">260</span>][<span class="number">7</span>][<span class="number">7</span>];</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>æ—¶é—´å¤æ‚åº¦ä¸º<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><mi>m</mi><mi>n</mi><msup><mi>k</mi><mn>2</mn></msup><msup><mn>3</mn><mrow><mn>2</mn><mi>n</mi></mrow></msup><mo>)</mo></mrow><annotation encoding="application/x-tex">O(mnk^23^{2n})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8141079999999999em;"></span><span class="strut bottom" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathit">m</span><span class="mord mathit">n</span><span class="mord"><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord"><span class="mord mathrm">3</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">2</span><span class="mord mathit">n</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span>ï¼Œæœ€åå¡çº¿è¿‡</p><p><img src="https://i.loli.net/2020/11/15/eITZ7zqHpUNwJGv.png" alt="" /></p><p>åæ¥çœ‹é¢˜è§£å‘ç°è¿™ç§é¢˜æœ‰ä¸€ç§æ ‡å‡†è§£æ³•å«<strong>è½®å»“çº¿åŠ¨æ€è§„åˆ’</strong></p><p><img src="https://i.loli.net/2020/11/15/yX6BJAC5M4naqbF.png" alt="" /></p><p>å¦‚å›¾ï¼Œæˆ‘ä»¬æƒ³åœ¨æ©™è‰²æ ¼å­æ”¾ç½®ï¼Œé‚£ä¹ˆå½“å‰çš„çŠ¶æ€åªä¸ç»¿è‰²çš„æ ¼å­æœ‰å…³ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ç”¨<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>d</mi><mi>p</mi><mo>[</mo><mi>i</mi><mo>]</mo><mo>[</mo><mi>j</mi><mo>]</mo><mo>[</mo><mi>s</mi><mi>t</mi><mi>a</mi><mi>t</mi><mi>e</mi><mo>]</mo><mo>[</mo><mi>x</mi><mo>]</mo><mo>[</mo><mi>y</mi><mo>]</mo></mrow><annotation encoding="application/x-tex">dp[i][j][state][x][y]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">d</span><span class="mord mathit">p</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathit">s</span><span class="mord mathit">t</span><span class="mord mathit">a</span><span class="mord mathit">t</span><span class="mord mathit">e</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathit">x</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="mclose">]</span></span></span></span>è¡¨ç¤ºåœ¨<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>(</mo><mi>i</mi><mo separator="true">,</mo><mi>j</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">(i,j)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mopen">(</span><span class="mord mathit">i</span><span class="mpunct">,</span><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mclose">)</span></span></span></span>æ”¾ç½®ï¼Œä¹‹å‰çš„<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.43056em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">n</span></span></span></span>ä¸ªæ ¼å­çŠ¶æ€ä¸º<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mi>t</mi><mi>a</mi><mi>t</mi><mi>e</mi></mrow><annotation encoding="application/x-tex">state</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.61508em;"></span><span class="strut bottom" style="height:0.61508em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">s</span><span class="mord mathit">t</span><span class="mord mathit">a</span><span class="mord mathit">t</span><span class="mord mathit">e</span></span></span></span>ï¼Œå‰©ä½™<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.43056em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">x</span></span></span></span>ä¸ªå†…å‘çš„äººï¼Œ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>y</mi></mrow><annotation encoding="application/x-tex">y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.03588em;">y</span></span></span></span>ä¸ªå¤–å‘çš„äººçš„æœ€å¤§å¹¸ç¦æ„Ÿï¼Œå°±å¯ä»¥è¿›è¡ŒçŠ¶æ€è½¬ç§»äº†</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;number&#125;</span> <span class="variable">m</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;number&#125;</span> <span class="variable">n</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;number&#125;</span> <span class="variable">introvertsCount</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;number&#125;</span> <span class="variable">extrovertsCount</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;number&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> getMaxGridHappiness = <span class="function"><span class="keyword">function</span>(<span class="params">m, n, introvertsCount, extrovertsCount</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> dp = <span class="keyword">new</span> <span class="built_in">Array</span>(m * n)</span><br><span class="line">        .fill(<span class="number">0</span>).map(<span class="function">(<span class="params">v</span>) =&gt;</span> <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">250</span>)</span><br><span class="line">        .fill(<span class="number">0</span>).map(<span class="function">(<span class="params">v</span>) =&gt;</span> <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">7</span>)</span><br><span class="line">        .fill(<span class="number">0</span>).map(<span class="function">(<span class="params">v</span>) =&gt;</span> <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">7</span>)</span><br><span class="line">        .fill(<span class="number">-1</span>))));</span><br><span class="line">    <span class="keyword">const</span> pow3 = <span class="keyword">new</span> <span class="built_in">Array</span>(n + <span class="number">1</span>).fill(<span class="number">0</span>).map(<span class="function">(<span class="params">v, i</span>) =&gt;</span> <span class="built_in">Math</span>.pow(<span class="number">3</span>, i));</span><br><span class="line">    <span class="keyword">let</span> ans = <span class="number">-1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> calHappiness = <span class="function">(<span class="params">id, up, left</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> res = id == <span class="number">1</span> ? <span class="number">120</span> : <span class="number">40</span>;</span><br><span class="line">        <span class="keyword">if</span>(id == <span class="number">1</span>) &#123;</span><br><span class="line">            res -= (up == <span class="number">1</span>) * <span class="number">60</span> + (up == <span class="number">2</span>) * <span class="number">10</span>;</span><br><span class="line">            res -= (left == <span class="number">1</span>) * <span class="number">60</span> + (left == <span class="number">2</span>) * <span class="number">10</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            res -= (up == <span class="number">1</span>) * <span class="number">10</span> - (up == <span class="number">2</span>) * <span class="number">40</span>;</span><br><span class="line">            res -= (left == <span class="number">1</span>) * <span class="number">10</span> - (left == <span class="number">2</span>) * <span class="number">40</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    dp[<span class="number">0</span>][<span class="number">0</span>][introvertsCount][extrovertsCount] = <span class="number">0</span>;</span><br><span class="line">    introvertsCount &amp;&amp; (dp[<span class="number">0</span>][<span class="number">1</span>][introvertsCount - <span class="number">1</span>][extrovertsCount] = <span class="number">120</span>);</span><br><span class="line">    extrovertsCount &amp;&amp; (dp[<span class="number">0</span>][<span class="number">2</span>][introvertsCount][extrovertsCount - <span class="number">1</span>] = <span class="number">40</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> loc = <span class="number">1</span>; loc &lt; m * n; ++loc) &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">let</span> state = <span class="number">0</span>; state &lt; pow3[n]; ++state) &#123;</span><br><span class="line">            <span class="keyword">let</span> up = ~~(state / pow3[n - <span class="number">1</span>]);</span><br><span class="line">            <span class="keyword">let</span> left = loc % n == <span class="number">0</span> ? <span class="number">0</span> : state % <span class="number">3</span>;</span><br><span class="line">            <span class="keyword">let</span> newState = (state - up * pow3[n - <span class="number">1</span>]) * <span class="number">3</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">let</span> x = <span class="number">0</span>; x &lt;= introvertsCount; ++x) &#123;</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">let</span> y = <span class="number">0</span>; y &lt;= extrovertsCount; ++y) &#123;</span><br><span class="line">                    <span class="keyword">if</span>(dp[loc - <span class="number">1</span>][state][x][y] == <span class="number">-1</span>) <span class="keyword">continue</span>;</span><br><span class="line">                    dp[loc][newState][x][y] = <span class="built_in">Math</span>.max(</span><br><span class="line">                        dp[loc][newState][x][y], dp[loc - <span class="number">1</span>][state][x][y]);</span><br><span class="line">                    <span class="keyword">if</span>(x) dp[loc][newState + <span class="number">1</span>][x - <span class="number">1</span>][y] = <span class="built_in">Math</span>.max(</span><br><span class="line">                        dp[loc][newState + <span class="number">1</span>][x - <span class="number">1</span>][y], dp[loc - <span class="number">1</span>][state][x][y] + calHappiness(<span class="number">1</span>, up, left));</span><br><span class="line">                    <span class="keyword">if</span>(y) dp[loc][newState + <span class="number">2</span>][x][y - <span class="number">1</span>] = <span class="built_in">Math</span>.max(</span><br><span class="line">                        dp[loc][newState + <span class="number">2</span>][x][y - <span class="number">1</span>], dp[loc - <span class="number">1</span>][state][x][y] + calHappiness(<span class="number">2</span>, up, left));</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> state = <span class="number">0</span>; state &lt; pow3[n]; ++state) &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">let</span> x = <span class="number">0</span>; x &lt;= introvertsCount; ++x) &#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">let</span> y = <span class="number">0</span>; y &lt;= extrovertsCount; ++y) &#123;</span><br><span class="line">                ans = <span class="built_in">Math</span>.max(ans, dp[m * n - <span class="number">1</span>][state][x][y]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2020/11/15/Xfhjy9tzRvrn6lo.png" alt="" /></p><p>æ—¶é—´å¤æ‚åº¦<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><mi>m</mi><mi>n</mi><msup><mn>3</mn><mi>n</mi></msup><msup><mi>k</mi><mn>2</mn></msup><mo>)</mo></mrow><annotation encoding="application/x-tex">O(mn3^nk^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8141079999999999em;"></span><span class="strut bottom" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathit">m</span><span class="mord mathit">n</span><span class="mord"><span class="mord mathrm">3</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit">n</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord"><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;ç¬¬ä¸‰æ¬¡å‘¨èµ›âœŠ&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://i.loli.net/2020/11/15/CsnXWBwNV7fTlKz.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="leetcode" scheme="https://christopherrliu.github.io/categories/leetcode/"/>
    
    
    <category term="C++" scheme="https://christopherrliu.github.io/tags/C/"/>
    
    <category term="åŠ¨æ€è§„åˆ’" scheme="https://christopherrliu.github.io/tags/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/"/>
    
    <category term="ç®—æ³•" scheme="https://christopherrliu.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
    <category term="é¢è¯•" scheme="https://christopherrliu.github.io/tags/%E9%9D%A2%E8%AF%95/"/>
    
    <category term="åŒæŒ‡é’ˆ" scheme="https://christopherrliu.github.io/tags/%E5%8F%8C%E6%8C%87%E9%92%88/"/>
    
    <category term="è½®å»“çº¿åŠ¨æ€è§„åˆ’" scheme="https://christopherrliu.github.io/tags/%E8%BD%AE%E5%BB%93%E7%BA%BF%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/"/>
    
  </entry>
  
  <entry>
    <title>æ¯å¤©ä¸€é“leetcode-remove-k-digits</title>
    <link href="https://christopherrliu.github.io/2020/11/15/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode-remove-k-digits/"/>
    <id>https://christopherrliu.github.io/2020/11/15/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode-remove-k-digits/</id>
    <published>2020-11-15T09:19:20.000Z</published>
    <updated>2020-11-15T09:51:19.915Z</updated>
    
    <content type="html"><![CDATA[<h3 id="é¢˜æ„"><a class="markdownIt-Anchor" href="#é¢˜æ„"></a> é¢˜æ„</h3><h4 id="è‹±æ–‡é¢˜æ„"><a class="markdownIt-Anchor" href="#è‹±æ–‡é¢˜æ„"></a> è‹±æ–‡é¢˜æ„</h4><p><img src="https://i.loli.net/2020/11/15/3tV91ZFvEeYUk7L.png" alt="" /></p><a id="more"></a><h4 id="ä¸­æ–‡é¢˜æ„"><a class="markdownIt-Anchor" href="#ä¸­æ–‡é¢˜æ„"></a> ä¸­æ–‡é¢˜æ„</h4><p><img src="https://i.loli.net/2020/11/15/1yxd5p8JqGVhORk.png" alt="" /></p><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><h4 id="æš´åŠ›"><a class="markdownIt-Anchor" href="#æš´åŠ›"></a> æš´åŠ›</h4><p>è´ªå¿ƒçš„æƒ³æ³•ï¼Œæˆ‘ä»¬ä»å¤´å¼€å§‹éå†ï¼Œå¦‚æœåˆ é™¤æŸä¸ªæ•°å­—æš´éœ²å‡ºæ¥å…¶åçš„æ•°å­—ä¼šä½¿ç­”æ¡ˆæ›´å°ï¼Œå°±åˆ é™¤è¿™ä¸ªæ•°å­—ï¼Œç„¶åå†ä»å¤´å¼€å§‹éå†å¯»æ‰¾ï¼›å¦‚æœæ‰€æœ‰çš„æ•°å­—éƒ½ä¸æ»¡è¶³<em>åˆ é™¤æŸä¸ªæ•°å­—æš´éœ²å‡ºæ¥å…¶åçš„æ•°å­—ä¼šä½¿ç­”æ¡ˆæ›´å°</em>è¿™ä¸ªæ¡ä»¶ï¼Œè¯´æ˜è¿™ä¸ªæ—¶å€™æ•°å­—æ˜¯éé™åºçš„äº†ï¼Œæˆ‘ä»¬å°±ä»å°¾éƒ¨åˆ é™¤ç›¸åº”çš„æ•°å­—å³å¯</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;string&#125;</span> <span class="variable">num</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;number&#125;</span> <span class="variable">k</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;string&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> removeKdigits = <span class="function"><span class="keyword">function</span>(<span class="params">num, k</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> flag = <span class="literal">true</span>;</span><br><span class="line">    num = [...num];</span><br><span class="line">    <span class="keyword">while</span>(k &amp;&amp; flag) &#123;</span><br><span class="line">        <span class="keyword">let</span> i;</span><br><span class="line">        flag = <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; num.length; ++i) &#123;</span><br><span class="line">            <span class="keyword">if</span>(!flag &amp;&amp; i + <span class="number">1</span> &lt; num.length &amp;&amp; num[i + <span class="number">1</span>] &lt; num[i] &amp;&amp; k) &#123;</span><br><span class="line">                flag = <span class="literal">true</span>;</span><br><span class="line">                --k;</span><br><span class="line">                num.splice(i, <span class="number">1</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125; </span><br><span class="line">        &#125;;</span><br><span class="line">        i = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(i &lt; num.length &amp;&amp; num[i] == <span class="string">&#x27;0&#x27;</span>) ++i;</span><br><span class="line">        num.splice(<span class="number">0</span>, i);</span><br><span class="line">    &#125;</span><br><span class="line">    num = num.slice(<span class="number">0</span>, num.length - k);</span><br><span class="line">    <span class="keyword">if</span>(num.length == <span class="number">0</span>) num = [<span class="string">&#x27;0&#x27;</span>];</span><br><span class="line">    <span class="keyword">return</span> num.join(<span class="string">&quot;&quot;</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2020/11/15/rGeiyAjvO7YMZBW.png" alt="" /></p><p>æ—¶é—´å¤æ‚åº¦<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><mi>n</mi><mi>k</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">O(nk)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathit">n</span><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mclose">)</span></span></span></span>ï¼Œç©ºé—´å¤æ‚åº¦<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><mn>1</mn><mo>)</mo></mrow><annotation encoding="application/x-tex">O(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathrm">1</span><span class="mclose">)</span></span></span></span></p><h4 id="ä¼˜åŒ–"><a class="markdownIt-Anchor" href="#ä¼˜åŒ–"></a> ä¼˜åŒ–</h4><p>ä¸<strong>å­—å…¸åºç›¸å…³å°±åº”è¯¥æƒ³åˆ°å•è°ƒæ ˆå•Š</strong>ï¼Œåšäº†ä¸€äº›é¢˜æ²¡æœ‰å¼•èµ·é‡è§†</p><p>æˆ‘ä»¬ä¹‹å‰æ˜¯æ­£å‘è€ƒè™‘ï¼Œæ­£éš¾åˆ™åï¼Œå¯ä»¥æŠŠåˆ é™¤çš„è¿‡ç¨‹çœ‹æˆæ·»åŠ çš„è¿‡ç¨‹ï¼Œç”¨ä¸€ä¸ªå•è°ƒæ ˆä¿å­˜æ‰€æœ‰æ·»åŠ è¿›å»çš„æ•°å­—ï¼š</p><ul><li>å½“å‰æ•°å­—å¤§äºæ ˆé¡¶æ•°å­—ï¼Œå…¥æ ˆ</li><li>å½“å‰æ•°å­—å°äºæ ˆé¡¶æ•°å­—ï¼Œå‡ºæ ˆç›´åˆ°æ ˆç©ºã€æ‰€æœ‰å‡ºæ ˆçš„æ•°å­—æ€»æ•°è¾¾åˆ°<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.69444em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.03148em;">k</span></span></span></span>æˆ–æ˜¯æ ˆé¡¶æ•°å­—å¤§äºå½“å‰æ•°å­—</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;string&#125;</span> <span class="variable">num</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;number&#125;</span> <span class="variable">k</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;string&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> removeKdigits = <span class="function"><span class="keyword">function</span>(<span class="params">num, k</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> stack = <span class="keyword">new</span> <span class="built_in">Array</span>();</span><br><span class="line">    <span class="keyword">let</span> i = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; num.length; ++i) &#123;</span><br><span class="line">        <span class="keyword">while</span>(stack.length &amp;&amp; k &amp;&amp; stack[stack.length - <span class="number">1</span>] &gt; num[i]) &#123;</span><br><span class="line">            stack.pop();</span><br><span class="line">            k--;</span><br><span class="line">        &#125;</span><br><span class="line">        stack.push(num[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    i = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(i &lt; stack.length &amp;&amp; stack[i] == <span class="string">&#x27;0&#x27;</span>) ++i;</span><br><span class="line">    stack.splice(<span class="number">0</span>, i);</span><br><span class="line">    <span class="keyword">let</span> res = (stack.slice(<span class="number">0</span>, stack.length - k)).join(<span class="string">&quot;&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span>(res == <span class="string">&quot;&quot;</span>) res = <span class="string">&quot;0&quot;</span>;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2020/11/15/jTNh3AXQM4p6vBI.png" alt="" /></p><p>æ—¶é—´å¤æ‚åº¦<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><mi>n</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathit">n</span><span class="mclose">)</span></span></span></span>ï¼Œç©ºé—´å¤æ‚åº¦<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><mi>n</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathit">n</span><span class="mclose">)</span></span></span></span></p>]]></content>
    
    
    <summary type="html">&lt;h3 id=&quot;é¢˜æ„&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#é¢˜æ„&quot;&gt;&lt;/a&gt; é¢˜æ„&lt;/h3&gt;
&lt;h4 id=&quot;è‹±æ–‡é¢˜æ„&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#è‹±æ–‡é¢˜æ„&quot;&gt;&lt;/a&gt; è‹±æ–‡é¢˜æ„&lt;/h4&gt;
&lt;p&gt;&lt;img src=&quot;https://i.loli.net/2020/11/15/3tV91ZFvEeYUk7L.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="leetcode" scheme="https://christopherrliu.github.io/categories/leetcode/"/>
    
    
    <category term="è´ªå¿ƒ" scheme="https://christopherrliu.github.io/tags/%E8%B4%AA%E5%BF%83/"/>
    
    <category term="ç®—æ³•" scheme="https://christopherrliu.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
    <category term="é¢è¯•" scheme="https://christopherrliu.github.io/tags/%E9%9D%A2%E8%AF%95/"/>
    
    <category term="javascript" scheme="https://christopherrliu.github.io/tags/javascript/"/>
    
    <category term="å•è°ƒæ ˆ" scheme="https://christopherrliu.github.io/tags/%E5%8D%95%E8%B0%83%E6%A0%88/"/>
    
  </entry>
  
  <entry>
    <title>æ¯å¤©ä¸€é“leetcode-relative-sort-array</title>
    <link href="https://christopherrliu.github.io/2020/11/14/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode-relative-sort-array/"/>
    <id>https://christopherrliu.github.io/2020/11/14/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode-relative-sort-array/</id>
    <published>2020-11-14T07:40:36.000Z</published>
    <updated>2020-11-14T07:56:31.587Z</updated>
    
    <content type="html"><![CDATA[<h3 id="é¢˜æ„"><a class="markdownIt-Anchor" href="#é¢˜æ„"></a> é¢˜æ„</h3><h4 id="è‹±æ–‡é¢˜æ„"><a class="markdownIt-Anchor" href="#è‹±æ–‡é¢˜æ„"></a> è‹±æ–‡é¢˜æ„</h4><p><img src="https://i.loli.net/2020/11/14/4Py7vxWSqD6HE5F.png" alt="" /></p><a id="more"></a><h4 id="ä¸­æ–‡é¢˜æ„"><a class="markdownIt-Anchor" href="#ä¸­æ–‡é¢˜æ„"></a> ä¸­æ–‡é¢˜æ„</h4><p><img src="https://i.loli.net/2020/11/14/Bidyaj6NbWJ3zZp.png" alt="" /></p><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><h4 id="è‡ªå®šä¹‰æ’åºå‡½æ•°"><a class="markdownIt-Anchor" href="#è‡ªå®šä¹‰æ’åºå‡½æ•°"></a> è‡ªå®šä¹‰æ’åºå‡½æ•°</h4><p>é¦–å…ˆæƒ³åˆ°è‚¯å®šå°±æ˜¯è‡ªå·±å†™ä¸€ä¸ªæ¯”è¾ƒå‡½æ•°ä¼ åˆ°å†…ç½®æ’åºåº“å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬ç”¨ä¸€ä¸ªhashè¡¨è®°å½•arr2ä¸­æ¯ä¸ªæ•°å­—çš„ä¸‹æ ‡ï¼Œå¯¹äºä¸åœ¨arr2ä¸­ï¼Œä½†åœ¨arr1ä¸­çš„å°±è®¾ä¸º<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>a</mi><mi>r</mi><mi>r</mi><mi>r</mi><mn>2</mn><mi mathvariant="normal">.</mi><mi>l</mi><mi>e</mi><mi>n</mi><mi>g</mi><mi>t</mi><mi>h</mi><mo>+</mo><mi>v</mi><mi>a</mi><mi>l</mi><mi>u</mi><mi>e</mi></mrow><annotation encoding="application/x-tex">arrr2.length + value</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord mathit">a</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathrm">2</span><span class="mord mathrm">.</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">e</span><span class="mord mathit">n</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord mathit">t</span><span class="mord mathit">h</span><span class="mbin">+</span><span class="mord mathit" style="margin-right:0.03588em;">v</span><span class="mord mathit">a</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">u</span><span class="mord mathit">e</span></span></span></span>ï¼Œè¿™æ ·å°±å¯ä»¥ä¿è¯ä¸åœ¨arr2ä¸­çš„æŒ‰å‡åºæ’åº</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;number[]&#125;</span> <span class="variable">arr1</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;number[]&#125;</span> <span class="variable">arr2</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;number[]&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> relativeSortArray = <span class="function"><span class="keyword">function</span>(<span class="params">arr1, arr2</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> hash = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line">    arr2.forEach(<span class="function">(<span class="params">v, i</span>) =&gt;</span> &#123;</span><br><span class="line">        hash[v] = i;</span><br><span class="line">    &#125;);</span><br><span class="line">    arr1 = arr1.map(<span class="function">(<span class="params">v, i</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(hash[v] === <span class="literal">undefined</span>) &#123;</span><br><span class="line">            hash[v] = <span class="number">1001</span> + v;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> v;</span><br><span class="line">    &#125;).sort(<span class="function">(<span class="params">a, b</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> hash[a] - hash[b];</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> arr1;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2020/11/14/E6XdVH5PIQZmG71.png" alt="" /></p><h4 id="è®¡æ•°æ’åº"><a class="markdownIt-Anchor" href="#è®¡æ•°æ’åº"></a> è®¡æ•°æ’åº</h4><p>å› ä¸ºæ•°çš„èŒƒå›´ä¸è¶…è¿‡<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn><msup><mn>0</mn><mn>3</mn></msup></mrow><annotation encoding="application/x-tex">10^3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8141079999999999em;"></span><span class="strut bottom" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathrm">1</span><span class="mord"><span class="mord mathrm">0</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathrm">3</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span>ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ªæ•°ç»„<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>f</mi><mi>r</mi><mi>e</mi><mi>q</mi><mi>u</mi><mi>e</mi><mi>n</mi><mi>c</mi><mi>y</mi></mrow><annotation encoding="application/x-tex">frequency</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.03588em;">q</span><span class="mord mathit">u</span><span class="mord mathit">e</span><span class="mord mathit">n</span><span class="mord mathit">c</span><span class="mord mathit" style="margin-right:0.03588em;">y</span></span></span></span>éå†arr1ç»Ÿè®¡æ¯ä¸ªæ•°å­—çš„å‡ºç°æ¬¡æ•°ï¼Œå†éå†arr2æ’åˆ—æ•°å­—ï¼Œç„¶åå†éå†ä¸€æ¬¡<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>f</mi><mi>r</mi><mi>e</mi><mi>q</mi><mi>u</mi><mi>e</mi><mi>n</mi><mi>c</mi><mi>y</mi></mrow><annotation encoding="application/x-tex">frequency</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.03588em;">q</span><span class="mord mathit">u</span><span class="mord mathit">e</span><span class="mord mathit">n</span><span class="mord mathit">c</span><span class="mord mathit" style="margin-right:0.03588em;">y</span></span></span></span>å°†ä¸åœ¨<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>a</mi><mi>r</mi><mi>r</mi><mn>2</mn></mrow><annotation encoding="application/x-tex">arr2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.64444em;"></span><span class="strut bottom" style="height:0.64444em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">a</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathrm">2</span></span></span></span>ä¸­çš„å…ƒç´ æ’åˆ—</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;number[]&#125;</span> <span class="variable">arr1</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;number[]&#125;</span> <span class="variable">arr2</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;number[]&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> relativeSortArray = <span class="function"><span class="keyword">function</span>(<span class="params">arr1, arr2</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> frequency = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="built_in">Math</span>.max(...arr1) + <span class="number">1</span>).fill(<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">let</span> idx = <span class="number">0</span>;</span><br><span class="line">    arr1.forEach(<span class="function">(<span class="params">v</span>) =&gt;</span> &#123;</span><br><span class="line">        frequency[v]++;</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    arr2.forEach(<span class="function">(<span class="params">v</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">while</span>(frequency[v]) &#123;</span><br><span class="line">            arr1[idx++] = v;</span><br><span class="line">            frequency[v]--;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    frequency.forEach(<span class="function">(<span class="params">v, i</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(v) &#123;</span><br><span class="line">            <span class="keyword">while</span>(v) &#123;</span><br><span class="line">                arr1[idx++] = i;</span><br><span class="line">                v--;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> arr1;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2020/11/14/wyF8apXRuEvj23J.png" alt="" /></p>]]></content>
    
    
    <summary type="html">&lt;h3 id=&quot;é¢˜æ„&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#é¢˜æ„&quot;&gt;&lt;/a&gt; é¢˜æ„&lt;/h3&gt;
&lt;h4 id=&quot;è‹±æ–‡é¢˜æ„&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#è‹±æ–‡é¢˜æ„&quot;&gt;&lt;/a&gt; è‹±æ–‡é¢˜æ„&lt;/h4&gt;
&lt;p&gt;&lt;img src=&quot;https://i.loli.net/2020/11/14/4Py7vxWSqD6HE5F.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="leetcode" scheme="https://christopherrliu.github.io/categories/leetcode/"/>
    
    
    <category term="ç®—æ³•" scheme="https://christopherrliu.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
    <category term="é¢è¯•" scheme="https://christopherrliu.github.io/tags/%E9%9D%A2%E8%AF%95/"/>
    
    <category term="javascript" scheme="https://christopherrliu.github.io/tags/javascript/"/>
    
    <category term="è®¡æ•°æ’åº" scheme="https://christopherrliu.github.io/tags/%E8%AE%A1%E6%95%B0%E6%8E%92%E5%BA%8F/"/>
    
  </entry>
  
  <entry>
    <title>æ¯å¤©ä¸€é“leetcode-substring-with-concatenation-of-all-words</title>
    <link href="https://christopherrliu.github.io/2020/11/13/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode-substring-with-concatenation-of-all-words/"/>
    <id>https://christopherrliu.github.io/2020/11/13/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode-substring-with-concatenation-of-all-words/</id>
    <published>2020-11-13T15:05:37.000Z</published>
    <updated>2020-11-14T11:12:01.947Z</updated>
    
    <content type="html"><![CDATA[<h3 id="é¢˜æ„"><a class="markdownIt-Anchor" href="#é¢˜æ„"></a> é¢˜æ„</h3><h4 id="è‹±æ–‡é¢˜æ„"><a class="markdownIt-Anchor" href="#è‹±æ–‡é¢˜æ„"></a> è‹±æ–‡é¢˜æ„</h4><p><img src="https://i.loli.net/2020/11/13/NZvi7wJnyp1tabm.png" alt="" /></p><a id="more"></a><h4 id="ä¸­æ–‡é¢˜æ„"><a class="markdownIt-Anchor" href="#ä¸­æ–‡é¢˜æ„"></a> ä¸­æ–‡é¢˜æ„</h4><p><img src="https://i.loli.net/2020/11/14/qITYgUF5dW36yRf.png" alt="" /></p><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><h4 id="é€šç”¨è§£æ³•"><a class="markdownIt-Anchor" href="#é€šç”¨è§£æ³•"></a> é€šç”¨è§£æ³•</h4><p>ä¸€å¼€å§‹æ²¡çœ‹åˆ°å•è¯é•¿åº¦ç›¸åŒçš„æ¡ä»¶ï¼Œå°±ç”¨äº†éå†æ–¹æ³•ï¼Œæ¯æ¬¡è¿­ä»£ç”¨ACè‡ªåŠ¨æœºåˆ¤æ–­æ˜¯å¦åŒ¹é…åˆ°äº†æ‰€æœ‰åˆ—è¡¨ä¸­çš„å•è¯ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TreeNode</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(value, vsize, depth) &#123;</span><br><span class="line">        <span class="built_in">this</span>.value = value;</span><br><span class="line">        <span class="built_in">this</span>.isWord = <span class="literal">false</span>;</span><br><span class="line">        <span class="built_in">this</span>.sons = <span class="keyword">new</span> <span class="built_in">Array</span>(vsize).fill(<span class="literal">null</span>);</span><br><span class="line">        <span class="built_in">this</span>.fail = <span class="literal">null</span>;</span><br><span class="line">        <span class="built_in">this</span>.num = <span class="number">0</span>;</span><br><span class="line">        <span class="built_in">this</span>.depth = depth;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ACautomata</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(vsize) &#123;</span><br><span class="line">        <span class="built_in">this</span>.root = <span class="keyword">new</span> TreeNode(<span class="literal">null</span>, vsize, <span class="number">0</span>);</span><br><span class="line">        <span class="built_in">this</span>.vsize = vsize;</span><br><span class="line">    &#125;</span><br><span class="line">    insert(str) &#123;</span><br><span class="line">        <span class="keyword">let</span> node = <span class="built_in">this</span>.root;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">let</span> char <span class="keyword">of</span> str) &#123;</span><br><span class="line">            <span class="keyword">const</span> code = char.charCodeAt() - <span class="string">&#x27;a&#x27;</span>.charCodeAt();</span><br><span class="line">            <span class="keyword">if</span>(node.sons[code] === <span class="literal">null</span>) &#123;</span><br><span class="line">                node.sons[code] = <span class="keyword">new</span> TreeNode(char, <span class="built_in">this</span>.vsize, node.depth + <span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            node = node.sons[code];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(!node.isWord) &#123;</span><br><span class="line">            node.isWord = <span class="literal">true</span>;</span><br><span class="line">            node.num = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            node.num++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    match(str) &#123;</span><br><span class="line">        <span class="keyword">let</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line">        <span class="keyword">let</span> res = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">let</span> node = <span class="built_in">this</span>.root;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; str.length; ++i) &#123;</span><br><span class="line">            <span class="keyword">let</span> char = str.charAt(i);</span><br><span class="line">            <span class="keyword">const</span> code = char.charCodeAt() - <span class="string">&#x27;a&#x27;</span>.charCodeAt();</span><br><span class="line">            node = node.sons[code];</span><br><span class="line">            <span class="keyword">if</span>(node.isWord) &#123;</span><br><span class="line">                <span class="keyword">if</span>(map.has(node)) &#123;</span><br><span class="line">                    <span class="keyword">let</span> nc = map.get(node);</span><br><span class="line">                    <span class="keyword">if</span>(nc &lt; node.num) &#123;</span><br><span class="line">                        res++;</span><br><span class="line">                        map.set(node, nc + <span class="number">1</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span> &#123;</span><br><span class="line">                    map.set(node, <span class="number">1</span>);</span><br><span class="line">                    res++;</span><br><span class="line">                &#125;</span><br><span class="line">                node = <span class="built_in">this</span>.root;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">    build() &#123;</span><br><span class="line">        <span class="keyword">let</span> queue = <span class="keyword">new</span> <span class="built_in">Array</span>();</span><br><span class="line">        <span class="keyword">let</span> node = <span class="built_in">this</span>.root;</span><br><span class="line">        node.fail = node;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; node.sons.length; ++i) &#123;</span><br><span class="line">            <span class="keyword">let</span> son = node.sons[i];</span><br><span class="line">            <span class="keyword">if</span>(son === <span class="literal">null</span>) &#123;</span><br><span class="line">                node.sons[i] = <span class="built_in">this</span>.root;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                son.fail = <span class="built_in">this</span>.root;</span><br><span class="line">                queue.push(son);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span>(queue.length) &#123;</span><br><span class="line">            node = queue.shift();</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; node.sons.length; ++i) &#123;</span><br><span class="line">                <span class="keyword">let</span> son = node.sons[i];</span><br><span class="line">                <span class="keyword">if</span>(son === <span class="literal">null</span>) &#123;</span><br><span class="line">                    node.sons[i] = node.fail.sons[i];</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span> &#123;</span><br><span class="line">                    son.fail = node.fail.sons[i];</span><br><span class="line">                    queue.push(son);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;string&#125;</span> <span class="variable">s</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;string[]&#125;</span> <span class="variable">words</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;number[]&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> findSubstring = <span class="function"><span class="keyword">function</span>(<span class="params">s, words</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> tire = <span class="keyword">new</span> ACautomata(<span class="number">26</span>);</span><br><span class="line">    <span class="keyword">let</span> wsum = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">let</span> res = <span class="keyword">new</span> <span class="built_in">Array</span>();</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> word <span class="keyword">of</span> words) &#123;</span><br><span class="line">        tire.insert(word);</span><br><span class="line">        wsum += word.length;</span><br><span class="line">    &#125;</span><br><span class="line">    tire.build();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i + wsum &lt;= s.length; ++i) &#123;</span><br><span class="line">        <span class="keyword">if</span>(tire.match(s.substring(i, i + wsum)) == words.length) &#123;</span><br><span class="line">            res.push(i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2020/11/14/9c3dq8DsHRPvQ7G.png" alt="" /></p><p>æ—¶é—´å¤æ‚åº¦<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><mi>n</mi><mi>k</mi><mo>+</mo><mi>k</mi><mo>+</mo><mi>k</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">O(nk + k + k)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathit">n</span><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mbin">+</span><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mbin">+</span><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mclose">)</span></span></span></span>ï¼Œå…¶ä¸­<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.69444em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.03148em;">k</span></span></span></span>æ˜¯å­—å…¸æ‰€æœ‰å•è¯çš„é•¿åº¦ï¼Œ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><mi>k</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">O(k)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mclose">)</span></span></span></span>å»ºtireæ ‘ï¼Œ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><mi>k</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">O(k)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mclose">)</span></span></span></span>å»ºç«‹failæŒ‡é’ˆ</p><h4 id="é•¿åº¦ä¸€è‡´"><a class="markdownIt-Anchor" href="#é•¿åº¦ä¸€è‡´"></a> é•¿åº¦ä¸€è‡´</h4><p>å› ä¸ºæœ¬é¢˜æœ‰é•¿åº¦ä¸€è‡´çš„æ¡ä»¶ï¼Œå°±ä¸ç”¨ACè‡ªåŠ¨æœºæ¥åŒ¹é…äº†ï¼Œæˆ‘ä»¬ç”¨ä¸€ä¸ªhashè¡¨<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>m</mi><mi>h</mi><mi>a</mi><mi>s</mi><mi>h</mi><mi>M</mi><mi>a</mi><mi>p</mi></mrow><annotation encoding="application/x-tex">mhashMap</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord mathit">m</span><span class="mord mathit">h</span><span class="mord mathit">a</span><span class="mord mathit">s</span><span class="mord mathit">h</span><span class="mord mathit" style="margin-right:0.10903em;">M</span><span class="mord mathit">a</span><span class="mord mathit">p</span></span></span></span>è®°å½•wordsä¸­æ¯ä¸ªå•è¯å‡ºç°çš„æ¬¡æ•°ï¼Œå¯¹äº<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi></mrow><annotation encoding="application/x-tex">s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.43056em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">s</span></span></span></span>æ¥è¯´ï¼Œå–å‡º<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mi mathvariant="normal">.</mi><mi>s</mi><mi>u</mi><mi>b</mi><mi>s</mi><mi>t</mi><mi>r</mi><mi>i</mi><mi>n</mi><mi>g</mi><mo>(</mo><mi>i</mi><mo separator="true">,</mo><mi>i</mi><mo>+</mo><mi>w</mi><mi>o</mi><mi>r</mi><mi>d</mi><mi mathvariant="normal">_</mi><mi>l</mi><mi>e</mi><mi>n</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">s.substring(i, i + word\_len)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1.06em;vertical-align:-0.31em;"></span><span class="base textstyle uncramped"><span class="mord mathit">s</span><span class="mord mathrm">.</span><span class="mord mathit">s</span><span class="mord mathit">u</span><span class="mord mathit">b</span><span class="mord mathit">s</span><span class="mord mathit">t</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">i</span><span class="mord mathit">n</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mopen">(</span><span class="mord mathit">i</span><span class="mpunct">,</span><span class="mord mathit">i</span><span class="mbin">+</span><span class="mord mathit" style="margin-right:0.02691em;">w</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">d</span><span class="mord mathrm" style="margin-right:0.02778em;">_</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">e</span><span class="mord mathit">n</span><span class="mclose">)</span></span></span></span>å°±æ˜¯ä¸€ä¸ªå¾…åŒ¹é…çš„å•è¯ï¼Œåˆ°hashè¡¨é‡ŒæŸ¥æ‰¾å³å¯ï¼Œå¦è®¾ä¸€ä¸ªhashè¡¨<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>f</mi><mi>r</mi><mi>e</mi><mi>q</mi><mi>M</mi><mi>a</mi><mi>p</mi></mrow><annotation encoding="application/x-tex">freqMap</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.03588em;">q</span><span class="mord mathit" style="margin-right:0.10903em;">M</span><span class="mord mathit">a</span><span class="mord mathit">p</span></span></span></span>è¡¨ç¤ºåŒ¹é…åˆ°äº†å¤šå°‘ä¸ªwordsä¸­çš„å­—ç¬¦ï¼Œåªè¦æŸä¸ªå­—ä¸²æ»¡è¶³æ‰€æœ‰å•è¯éƒ½åœ¨wordsä¸­<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>m</mi><mi>h</mi><mi>a</mi><mi>s</mi><mi>h</mi><mi>M</mi><mi>a</mi><mi>p</mi><mi mathvariant="normal">.</mi><mi>h</mi><mi>a</mi><mi>s</mi><mi>h</mi><mo>(</mo><mi>w</mi><mi>o</mi><mi>r</mi><mi>d</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">mhashMap.hash(word)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">m</span><span class="mord mathit">h</span><span class="mord mathit">a</span><span class="mord mathit">s</span><span class="mord mathit">h</span><span class="mord mathit" style="margin-right:0.10903em;">M</span><span class="mord mathit">a</span><span class="mord mathit">p</span><span class="mord mathrm">.</span><span class="mord mathit">h</span><span class="mord mathit">a</span><span class="mord mathit">s</span><span class="mord mathit">h</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.02691em;">w</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">d</span><span class="mclose">)</span></span></span></span>ï¼Œå¹¶ä¸”æ‰€æœ‰å•è¯å‡ºç°çš„æ¬¡æ•°éƒ½ä¸è¶…è¿‡åœ¨wordsä¸­çš„æ¬¡æ•°<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>f</mi><mi>r</mi><mi>e</mi><mi>q</mi><mi>M</mi><mi>a</mi><mi>p</mi><mi mathvariant="normal">.</mi><mi>g</mi><mi>e</mi><mi>t</mi><mo>(</mo><mi>w</mi><mi>o</mi><mi>r</mi><mi>d</mi><mo>)</mo><mo>&lt;</mo><mo>=</mo><mi>m</mi><mi>h</mi><mi>a</mi><mi>s</mi><mi>h</mi><mi>M</mi><mi>a</mi><mi>p</mi><mi mathvariant="normal">.</mi><mi>g</mi><mi>e</mi><mi>t</mi><mo>(</mo><mi>w</mi><mi>o</mi><mi>r</mi><mi>d</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">freqMap.get(word) &lt;= mhashMap.get(word)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.03588em;">q</span><span class="mord mathit" style="margin-right:0.10903em;">M</span><span class="mord mathit">a</span><span class="mord mathit">p</span><span class="mord mathrm">.</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord mathit">e</span><span class="mord mathit">t</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.02691em;">w</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">d</span><span class="mclose">)</span><span class="mrel">&lt;</span><span class="mrel">=</span><span class="mord mathit">m</span><span class="mord mathit">h</span><span class="mord mathit">a</span><span class="mord mathit">s</span><span class="mord mathit">h</span><span class="mord mathit" style="margin-right:0.10903em;">M</span><span class="mord mathit">a</span><span class="mord mathit">p</span><span class="mord mathrm">.</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord mathit">e</span><span class="mord mathit">t</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.02691em;">w</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">d</span><span class="mclose">)</span></span></span></span>ï¼Œè¿™ä¸ªå­ä¸²å°±æ˜¯æ»¡è¶³é¢˜æ„çš„ã€‚</p><p>å¦å¤–ç”±äºé•¿åº¦ä¸€è‡´ï¼Œä¹Ÿä¸éœ€è¦ä¾æ¬¡éå†å­—ç¬¦ï¼Œè€Œæ˜¯å¯ä»¥æ¯æ¬¡éå†ä¸€ä¸ªå•è¯ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> start = <span class="number">0</span>; start &lt; wlen; ++start)</span><br></pre></td></tr></table></figure><p>startä»£è¡¨æ¯æ¬¡çš„éå†çš„èµ·å§‹å…ƒç´ ï¼Œä¾‹å¦‚<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>w</mi><mi>o</mi><mi>r</mi><mi>d</mi><mi mathvariant="normal">_</mi><mi>l</mi><mi>e</mi><mi>n</mi><mo>=</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">word\_len = 2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:1.00444em;vertical-align:-0.31em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02691em;">w</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">d</span><span class="mord mathrm" style="margin-right:0.02778em;">_</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">e</span><span class="mord mathit">n</span><span class="mrel">=</span><span class="mord mathrm">2</span></span></span></span>æ—¶ï¼Œæ¯æ¬¡éå†å°±æ˜¯<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>(</mo><mn>0</mn><mo separator="true">,</mo><mn>2</mn><mo separator="true">,</mo><mn>4</mn><mo separator="true">,</mo><mo>â€¦</mo><mo>)</mo><mo separator="true">,</mo><mo>(</mo><mn>1</mn><mo separator="true">,</mo><mn>3</mn><mo separator="true">,</mo><mn>5</mn><mo separator="true">,</mo><mo>â€¦</mo><mo>)</mo></mrow><annotation encoding="application/x-tex">(0, 2, 4, \ldots),(1,3,5,\ldots)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mopen">(</span><span class="mord mathrm">0</span><span class="mpunct">,</span><span class="mord mathrm">2</span><span class="mpunct">,</span><span class="mord mathrm">4</span><span class="mpunct">,</span><span class="minner">â€¦</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mopen">(</span><span class="mord mathrm">1</span><span class="mpunct">,</span><span class="mord mathrm">3</span><span class="mpunct">,</span><span class="mord mathrm">5</span><span class="mpunct">,</span><span class="minner">â€¦</span><span class="mclose">)</span></span></span></span></p><p>è¿˜å¯ä»¥ç»§ç»­ä¼˜åŒ–ï¼Œå€Ÿé‰´KMPçš„æ€æƒ³ï¼Œå¯¹äºæ¯ä¸€ä¸ªå¾…åŒ¹é…çš„å•è¯ï¼Œæœ‰ä»¥ä¸‹å‡ ç§æƒ…å†µï¼š</p><ul><li><p>ä¸åœ¨wordsä¸­</p><p><img src="https://i.loli.net/2020/11/14/WlRPpYHoe6ugZLN.png" alt="" /></p><p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œè“è‰²æ˜¯åŒ¹é…æˆåŠŸçš„å•è¯ï¼Œçº¢è‰²çš„è¡¨ç¤ºä¸åœ¨wordsçš„å•è¯ï¼Œé‚£ä¹ˆæ‰€æœ‰åŒ…å«çº¢è‰²å•è¯çš„å­ä¸²éƒ½ä¸æ»¡è¶³é¢˜æ„ï¼Œå¯ä»¥ç›´æ¥è·³è¿‡ï¼Œå°†æŒ‡é’ˆç§»åŠ¨åˆ°çº¢è‰²å•è¯çš„ä¸‹ä¸€ä¸ªå•è¯ï¼Œå¹¶å°†<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>f</mi><mi>r</mi><mi>e</mi><mi>q</mi><mi>M</mi><mi>a</mi><mi>p</mi></mrow><annotation encoding="application/x-tex">freqMap</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.03588em;">q</span><span class="mord mathit" style="margin-right:0.10903em;">M</span><span class="mord mathit">a</span><span class="mord mathit">p</span></span></span></span>æ¸…ç©º</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> cword = s.substring(j, j + wlen);</span><br><span class="line"><span class="keyword">if</span>(!whashMap.has(cword)) &#123;</span><br><span class="line">freqMap.clear();</span><br><span class="line">i = j + wlen;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>åœ¨wordsä¸­ï¼Œä½†å‡ºç°æ¬¡æ•°è¶…é™äº†</p><p><img src="https://i.loli.net/2020/11/14/rmKHUNF1th3glZL.png" alt="" /></p><p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œword2çš„æ¬¡æ•°è¶…é™ï¼Œæˆ‘ä»¬å°±éœ€è¦å°†æŒ‡é’ˆå‰ç§»ï¼ŒçŸ¥é“æ‰¾åˆ°ä¸€ä¸ªword2ï¼Œå°†æŒ‡é’ˆç§»åŠ¨åˆ°è¿™ä¸ªword2çš„å‰ä¸€ä¸ªå•è¯ï¼Œåœ¨æ­¤è¿‡ç¨‹ä¸­æ›´æ–°<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>f</mi><mi>r</mi><mi>e</mi><mi>q</mi><mi>M</mi><mi>a</mi><mi>p</mi></mrow><annotation encoding="application/x-tex">freqMap</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.03588em;">q</span><span class="mord mathit" style="margin-right:0.10903em;">M</span><span class="mord mathit">a</span><span class="mord mathit">p</span></span></span></span>è¡¨</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> pword = s.substring(i, i + wlen);</span><br><span class="line"><span class="keyword">while</span>(pword != cword) &#123;</span><br><span class="line">freqMap.set(pword, freqMap.get(pword) - <span class="number">1</span>);</span><br><span class="line">i += wlen;</span><br><span class="line">pword = s.substring(i, i + wlen);</span><br><span class="line">&#125;</span><br><span class="line">i += wlen;</span><br></pre></td></tr></table></figure></li><li><p>åœ¨wordsä¸­ï¼Œå‡ºç°æ¬¡æ•°ä¹Ÿæ²¡æœ‰è¶…é™</p><p>æ›´æ–°<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>f</mi><mi>r</mi><mi>e</mi><mi>q</mi><mi>M</mi><mi>a</mi><mi>p</mi></mrow><annotation encoding="application/x-tex">freqMap</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.03588em;">q</span><span class="mord mathit" style="margin-right:0.10903em;">M</span><span class="mord mathit">a</span><span class="mord mathit">p</span></span></span></span>è¡¨ï¼Œå¦å¤–è‹¥å½“å‰åŒ¹é…çš„å­ä¸²é•¿åº¦æ»¡è¶³<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>m</mi><mi>a</mi><mi>t</mi><mi>c</mi><mi>h</mi><mi mathvariant="normal">_</mi><mi>l</mi><mi>e</mi><mi>n</mi><mo>=</mo><mo>=</mo><msub><mo>âˆ‘</mo><mrow><mi>w</mi><mi>o</mi><mi>r</mi><mi>d</mi><mo>âˆˆ</mo><mi>w</mi><mi>o</mi><mi>r</mi><mi>d</mi><mi>s</mi></mrow></msub><mi>l</mi><mi>e</mi><mi>n</mi><mo>(</mo><mi>w</mi><mi>o</mi><mi>r</mi><mi>d</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">match\_len == \sum_{word \in words} len(word)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1.07738em;vertical-align:-0.32738em;"></span><span class="base textstyle uncramped"><span class="mord mathit">m</span><span class="mord mathit">a</span><span class="mord mathit">t</span><span class="mord mathit">c</span><span class="mord mathit">h</span><span class="mord mathrm" style="margin-right:0.02778em;">_</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">e</span><span class="mord mathit">n</span><span class="mrel">=</span><span class="mrel">=</span><span class="mop"><span class="op-symbol small-op mop" style="top:-0.0000050000000000050004em;">âˆ‘</span><span class="vlist"><span style="top:0.30001em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02691em;">w</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">d</span><span class="mrel">âˆˆ</span><span class="mord mathit" style="margin-right:0.02691em;">w</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">d</span><span class="mord mathit">s</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">e</span><span class="mord mathit">n</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.02691em;">w</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">d</span><span class="mclose">)</span></span></span></span>ï¼Œè¯´æ˜æ‰¾åˆ°ä¸€ä¸ªç­”æ¡ˆï¼Œè®°å½•å¹¶å°†æŒ‡é’ˆå‰ç§»ä¸€ä¸ªå•è¯ï¼Œæ›´æ–°<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>f</mi><mi>r</mi><mi>e</mi><mi>q</mi><mi>M</mi><mi>a</mi><mi>p</mi></mrow><annotation encoding="application/x-tex">freqMap</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.03588em;">q</span><span class="mord mathit" style="margin-right:0.10903em;">M</span><span class="mord mathit">a</span><span class="mord mathit">p</span></span></span></span>è¡¨</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">freqMap.set(cword, freqMap.has(cword) ? freqMap.get(cword) + <span class="number">1</span> : <span class="number">1</span>);</span><br><span class="line"><span class="keyword">if</span>(j + wlen - i == wsum) &#123;</span><br><span class="line">res.push(i);</span><br><span class="line"><span class="keyword">let</span> pword = s.substring(i, i + wlen);</span><br><span class="line">i = i + wlen;</span><br><span class="line">freqMap.set(pword, freqMap.get(pword) - <span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p>å®Œæ•´ä»£ç ä¸ºï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;string&#125;</span> <span class="variable">s</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;string[]&#125;</span> <span class="variable">words</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;number[]&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> findSubstring = <span class="function"><span class="keyword">function</span>(<span class="params">s, words</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> wlen = words[<span class="number">0</span>].length;</span><br><span class="line">    <span class="keyword">let</span> wsize = words.length;</span><br><span class="line">    <span class="keyword">let</span> wsum = wsize * wlen;</span><br><span class="line">    <span class="keyword">let</span> res = <span class="keyword">new</span> <span class="built_in">Array</span>();</span><br><span class="line">    <span class="keyword">let</span> whashMap = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line">    <span class="keyword">let</span> freqMap = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line">    </span><br><span class="line">    words.forEach(<span class="function">(<span class="params">v</span>) =&gt;</span> &#123;</span><br><span class="line">        whashMap.has(v) ? whashMap.set(v, whashMap.get(v) + <span class="number">1</span>) : whashMap.set(v, <span class="number">1</span>);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> start = <span class="number">0</span>; start &lt;= wlen; ++start) &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">let</span> i = start; i + wsum &lt;= s.length; ) &#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">let</span> j = i; j - i &lt; wsum; j += wlen) &#123;</span><br><span class="line">                <span class="keyword">let</span> cword = s.substring(j, j + wlen);</span><br><span class="line">                <span class="keyword">if</span>(!whashMap.has(cword)) &#123;</span><br><span class="line">                    freqMap.clear();</span><br><span class="line">                    i = j + wlen;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span>(!freqMap.has(cword) || freqMap.get(cword) &lt; whashMap.get(cword)) &#123;</span><br><span class="line">                    freqMap.set(cword, freqMap.has(cword) ? freqMap.get(cword) + <span class="number">1</span> : <span class="number">1</span>);</span><br><span class="line">                    <span class="keyword">if</span>(j + wlen - i == wsum) &#123;</span><br><span class="line">                        res.push(i);</span><br><span class="line">                        <span class="keyword">let</span> pword = s.substring(i, i + wlen);</span><br><span class="line">                        i = i + wlen;</span><br><span class="line">                        freqMap.set(pword, freqMap.get(pword) - <span class="number">1</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span>&#123;</span><br><span class="line">                    <span class="keyword">let</span> pword = s.substring(i, i + wlen);</span><br><span class="line">                    <span class="keyword">while</span>(pword != cword) &#123;</span><br><span class="line">                        freqMap.set(pword, freqMap.get(pword) - <span class="number">1</span>);</span><br><span class="line">                        i += wlen;</span><br><span class="line">                        pword = s.substring(i, i + wlen);</span><br><span class="line">                    &#125;</span><br><span class="line">                    i += wlen;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2020/11/14/kQhnoJ3z4Pedw27.png" alt="" /></p><p>æ—¶é—´å¤æ‚åº¦æœ€å<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><mi>n</mi><mi>k</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">O(nk)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathit">n</span><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mclose">)</span></span></span></span>ï¼Œå‡æ‘Šä¸€ä¸‹å¯ä»¥åˆ°<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><mi>n</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathit">n</span><span class="mclose">)</span></span></span></span></p>]]></content>
    
    
    <summary type="html">&lt;h3 id=&quot;é¢˜æ„&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#é¢˜æ„&quot;&gt;&lt;/a&gt; é¢˜æ„&lt;/h3&gt;
&lt;h4 id=&quot;è‹±æ–‡é¢˜æ„&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#è‹±æ–‡é¢˜æ„&quot;&gt;&lt;/a&gt; è‹±æ–‡é¢˜æ„&lt;/h4&gt;
&lt;p&gt;&lt;img src=&quot;https://i.loli.net/2020/11/13/NZvi7wJnyp1tabm.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="leetcode" scheme="https://christopherrliu.github.io/categories/leetcode/"/>
    
    
    <category term="ç®—æ³•" scheme="https://christopherrliu.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
    <category term="é¢è¯•" scheme="https://christopherrliu.github.io/tags/%E9%9D%A2%E8%AF%95/"/>
    
    <category term="javascript" scheme="https://christopherrliu.github.io/tags/javascript/"/>
    
    <category term="ACè‡ªåŠ¨æœº" scheme="https://christopherrliu.github.io/tags/AC%E8%87%AA%E5%8A%A8%E6%9C%BA/"/>
    
    <category term="éå†" scheme="https://christopherrliu.github.io/tags/%E9%81%8D%E5%8E%86/"/>
    
  </entry>
  
  <entry>
    <title>æ¯å¤©ä¸€é“leetcode-odd-even-linked-list</title>
    <link href="https://christopherrliu.github.io/2020/11/13/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode-odd-even-linked-list/"/>
    <id>https://christopherrliu.github.io/2020/11/13/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode-odd-even-linked-list/</id>
    <published>2020-11-13T07:39:42.000Z</published>
    <updated>2020-11-13T07:54:12.256Z</updated>
    
    <content type="html"><![CDATA[<h3 id="é¢˜æ„"><a class="markdownIt-Anchor" href="#é¢˜æ„"></a> é¢˜æ„</h3><h4 id="è‹±æ–‡é¢˜æ„"><a class="markdownIt-Anchor" href="#è‹±æ–‡é¢˜æ„"></a> è‹±æ–‡é¢˜æ„</h4><p><img src="https://i.loli.net/2020/11/13/ufHvnL846e5aqGJ.png" alt="" /></p><a id="more"></a><h4 id="ä¸­æ–‡é¢˜æ„"><a class="markdownIt-Anchor" href="#ä¸­æ–‡é¢˜æ„"></a> ä¸­æ–‡é¢˜æ„</h4><p><img src="https://i.loli.net/2020/11/13/gIrSmzEYAVs6C8X.png" alt="" /></p><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>ç”¨ä¸¤ä¸ªæŒ‡é’ˆæŒ‡å‘å½“å‰å¥‡æ•°èŠ‚ç‚¹é“¾è¡¨å’Œå¶æ•°èŠ‚ç‚¹é“¾è¡¨çš„æœ«å°¾å…ƒç´ ï¼Œç„¶åè¿­ä»£å¥‡æ•°èŠ‚ç‚¹å’Œå¶æ•°èŠ‚ç‚¹ï¼Œæ”¹å˜nextæŒ‡é’ˆæŒ‡å‘ï¼Œå¦‚å›¾ï¼š</p><p><img src="https://i.loli.net/2020/11/13/nI2py7VZsY9WH4J.png" alt="" /></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"># class ListNode:</span></span><br><span class="line"><span class="comment">#     def __init__(self, val=0, next=None):</span></span><br><span class="line"><span class="comment">#         self.val = val</span></span><br><span class="line"><span class="comment">#         self.next = next</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">oddEvenList</span>(<span class="params">self, head: ListNode</span>) -&gt; ListNode:</span></span><br><span class="line">        <span class="keyword">if</span> head <span class="keyword">is</span> <span class="literal">None</span> <span class="keyword">or</span> head.next <span class="keyword">is</span> <span class="literal">None</span> : <span class="keyword">return</span> head</span><br><span class="line">        current_odd_ptr, current_even_ptr, odd = head, head.next, head.next.next</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> odd :</span><br><span class="line">            even = odd.next</span><br><span class="line">            odd.next = current_odd_ptr.next</span><br><span class="line">            current_odd_ptr.next = odd</span><br><span class="line">            current_odd_ptr = odd</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> even <span class="keyword">is</span> <span class="literal">None</span> : <span class="keyword">break</span></span><br><span class="line">            odd = even.next</span><br><span class="line">            current_even_ptr.next = even</span><br><span class="line">            current_even_ptr = even</span><br><span class="line">    </span><br><span class="line">        current_even_ptr.next = <span class="literal">None</span></span><br><span class="line">        <span class="keyword">return</span> head</span><br></pre></td></tr></table></figure><p>æ—¶é—´å¤æ‚åº¦<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><mi>n</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathit">n</span><span class="mclose">)</span></span></span></span>ï¼Œç©ºé—´å¤æ‚åº¦<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><mn>1</mn><mo>)</mo></mrow><annotation encoding="application/x-tex">O(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathrm">1</span><span class="mclose">)</span></span></span></span></p>]]></content>
    
    
    <summary type="html">&lt;h3 id=&quot;é¢˜æ„&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#é¢˜æ„&quot;&gt;&lt;/a&gt; é¢˜æ„&lt;/h3&gt;
&lt;h4 id=&quot;è‹±æ–‡é¢˜æ„&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#è‹±æ–‡é¢˜æ„&quot;&gt;&lt;/a&gt; è‹±æ–‡é¢˜æ„&lt;/h4&gt;
&lt;p&gt;&lt;img src=&quot;https://i.loli.net/2020/11/13/ufHvnL846e5aqGJ.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="leetcode" scheme="https://christopherrliu.github.io/categories/leetcode/"/>
    
    
    <category term="ç®—æ³•" scheme="https://christopherrliu.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
    <category term="é¢è¯•" scheme="https://christopherrliu.github.io/tags/%E9%9D%A2%E8%AF%95/"/>
    
    <category term="python" scheme="https://christopherrliu.github.io/tags/python/"/>
    
    <category term="åŒæŒ‡é’ˆ" scheme="https://christopherrliu.github.io/tags/%E5%8F%8C%E6%8C%87%E9%92%88/"/>
    
  </entry>
  
  <entry>
    <title>æ¯å¤©ä¸€é“leetcode-er-cha-shu-ren-wu-diao-du</title>
    <link href="https://christopherrliu.github.io/2020/11/12/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode-er-cha-shu-ren-wu-diao-du/"/>
    <id>https://christopherrliu.github.io/2020/11/12/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode-er-cha-shu-ren-wu-diao-du/</id>
    <published>2020-11-12T12:40:37.000Z</published>
    <updated>2020-11-14T12:49:22.066Z</updated>
    
    <content type="html"><![CDATA[<h3 id="é¢˜æ„"><a class="markdownIt-Anchor" href="#é¢˜æ„"></a> é¢˜æ„</h3><p><img src="https://i.loli.net/2020/11/12/fHcECQjRoOvbxs7.png" alt="" /></p><a id="more"></a><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><h4 id="çæ"><a class="markdownIt-Anchor" href="#çæ"></a> çæğŸ˜‚</h4><p>ç”±é¢˜æ„æˆ‘ä»¬ä¸éš¾å¾—å‡ºï¼Œå¯¹äºæŸä¸ªä»»åŠ¡æ ‘æ¥è¯´ï¼Œæ‰§è¡Œæ—¶é—´å¿…å®šä¸ºå¹¶è¡Œæ—¶é—´<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>p</mi><mi>a</mi><mi>r</mi><mi>l</mi><mi>l</mi><mi>e</mi><mi>l</mi></mrow><annotation encoding="application/x-tex">parllel</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord mathit">p</span><span class="mord mathit">a</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.01968em;">l</span></span></span></span>å’Œä¸²è¡Œæ—¶é—´<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mi>e</mi><mi>r</mi><mi>i</mi><mi>a</mi><mi>l</mi></mrow><annotation encoding="application/x-tex">serial</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.69444em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">s</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">i</span><span class="mord mathit">a</span><span class="mord mathit" style="margin-right:0.01968em;">l</span></span></span></span>çš„å’Œï¼Œå¯¹äºæŸä¸ªä»»åŠ¡æ¥è¯´ï¼Œæ‰§è¡Œå®Œå·¦å­æ ‘å’Œå³å­æ ‘ä¹‹åæ‰å¯ä»¥æ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯æ ¹èŠ‚ç‚¹ä»»åŠ¡æœ¬èº«åªèƒ½ä¸²è¡Œï¼Œè®¾å·¦å­æ ‘çš„å¹¶è¡Œæ—¶é—´ä¸º<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>p</mi><mi>a</mi><mi>r</mi><mi>a</mi><mi>l</mi><mi>l</mi><mi>e</mi><msub><mi>l</mi><mrow><mi>l</mi><mi>s</mi><mi>o</mi><mi>n</mi></mrow></msub></mrow><annotation encoding="application/x-tex">parallel_{lson}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord mathit">p</span><span class="mord mathit">a</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">a</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">e</span><span class="mord"><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.01968em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">s</span><span class="mord mathit">o</span><span class="mord mathit">n</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span>ï¼Œå³å­æ ‘çš„å¹¶è¡Œæ—¶é—´ä¸º<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>p</mi><mi>a</mi><mi>r</mi><mi>a</mi><mi>l</mi><mi>l</mi><mi>e</mi><msub><mi>l</mi><mrow><mi>r</mi><mi>s</mi><mi>o</mi><mi>n</mi></mrow></msub></mrow><annotation encoding="application/x-tex">parallel_{rson}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord mathit">p</span><span class="mord mathit">a</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">a</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">e</span><span class="mord"><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.01968em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">s</span><span class="mord mathit">o</span><span class="mord mathit">n</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span>ï¼Œé‚£ä¹ˆ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>p</mi><mi>a</mi><mi>r</mi><mi>a</mi><mi>l</mi><mi>l</mi><mi>e</mi><mi>l</mi><mo>â‰¥</mo><mi>p</mi><mi>a</mi><mi>r</mi><mi>a</mi><mi>l</mi><mi>l</mi><mi>e</mi><msub><mi>l</mi><mrow><mi>l</mi><mi>s</mi><mi>o</mi><mi>n</mi></mrow></msub><mo>+</mo><mi>p</mi><mi>a</mi><mi>r</mi><mi>a</mi><mi>l</mi><mi>l</mi><mi>e</mi><msub><mi>l</mi><mrow><mi>r</mi><mi>s</mi><mi>o</mi><mi>n</mi></mrow></msub></mrow><annotation encoding="application/x-tex">parallel \ge parallel_{lson} + parallel_{rson}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord mathit">p</span><span class="mord mathit">a</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">a</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mrel">â‰¥</span><span class="mord mathit">p</span><span class="mord mathit">a</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">a</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">e</span><span class="mord"><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.01968em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">s</span><span class="mord mathit">o</span><span class="mord mathit">n</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">+</span><span class="mord mathit">p</span><span class="mord mathit">a</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">a</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">e</span><span class="mord"><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.01968em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">s</span><span class="mord mathit">o</span><span class="mord mathit">n</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span>ï¼Œè¿™ä¸¤ä¸ªå¹¶è¡Œæ—¶é—´è‚¯å®šæ— æ³•ä¼˜åŒ–ï¼Œç„¶åå¯¹äºä¸¤ä¸ªä¸²è¡Œæ—¶é—´<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mi>e</mi><mi>r</mi><mi>i</mi><mi>a</mi><msub><mi>l</mi><mrow><mi>l</mi><mi>s</mi><mi>o</mi><mi>n</mi></mrow></msub></mrow><annotation encoding="application/x-tex">serial_{lson}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="base textstyle uncramped"><span class="mord mathit">s</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">i</span><span class="mord mathit">a</span><span class="mord"><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.01968em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">s</span><span class="mord mathit">o</span><span class="mord mathit">n</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span>å’Œ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mi>e</mi><mi>r</mi><mi>i</mi><mi>a</mi><msub><mi>l</mi><mrow><mi>r</mi><mi>s</mi><mi>o</mi><mi>n</mi></mrow></msub></mrow><annotation encoding="application/x-tex">serial_{rson}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="base textstyle uncramped"><span class="mord mathit">s</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">i</span><span class="mord mathit">a</span><span class="mord"><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.01968em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">s</span><span class="mord mathit">o</span><span class="mord mathit">n</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span>ï¼Œå¯ä»¥å¹¶è¡Œæ‰§è¡Œ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>m</mi><mi>i</mi><mi>n</mi><mo>(</mo><mi>s</mi><mi>e</mi><mi>r</mi><mi>i</mi><mi>a</mi><msub><mi>l</mi><mrow><mi>l</mi><mi>s</mi><mi>o</mi><mi>n</mi></mrow></msub><mo separator="true">,</mo><mi>s</mi><mi>e</mi><mi>r</mi><mi>i</mi><mi>a</mi><msub><mi>l</mi><mrow><mi>r</mi><mi>s</mi><mi>o</mi><mi>n</mi></mrow></msub><mo>)</mo></mrow><annotation encoding="application/x-tex">min(serial_{lson}, serial_{rson})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">m</span><span class="mord mathit">i</span><span class="mord mathit">n</span><span class="mopen">(</span><span class="mord mathit">s</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">i</span><span class="mord mathit">a</span><span class="mord"><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.01968em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">s</span><span class="mord mathit">o</span><span class="mord mathit">n</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord mathit">s</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">i</span><span class="mord mathit">a</span><span class="mord"><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.01968em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">s</span><span class="mord mathit">o</span><span class="mord mathit">n</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span>ï¼Œæˆ‘ä»¬åˆ—å‡ºè¿™æ—¶çš„<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mi>e</mi><mi>r</mi><mi>i</mi><mi>a</mi><mi>l</mi></mrow><annotation encoding="application/x-tex">serial</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.69444em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">s</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">i</span><span class="mord mathit">a</span><span class="mord mathit" style="margin-right:0.01968em;">l</span></span></span></span>å’Œ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>p</mi><mi>a</mi><mi>r</mi><mi>a</mi><mi>l</mi><mi>l</mi><mi>e</mi><mi>l</mi></mrow><annotation encoding="application/x-tex">parallel</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord mathit">p</span><span class="mord mathit">a</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">a</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.01968em;">l</span></span></span></span>ï¼š</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mtable><mtr><mtd><mrow><mi>s</mi><mi>e</mi><mi>r</mi><mi>i</mi><mi>a</mi><mi>l</mi></mrow></mtd><mtd><mrow><mrow></mrow><mo>â‰¥</mo><mi>v</mi><mi>a</mi><mi>l</mi></mrow></mtd></mtr><mtr><mtd><mrow><mi>p</mi><mi>a</mi><mi>r</mi><mi>a</mi><mi>l</mi><mi>l</mi><mi>e</mi><mi>l</mi></mrow></mtd><mtd><mrow><mrow></mrow><mo>â‰¥</mo><mi>p</mi><mi>a</mi><mi>r</mi><mi>a</mi><mi>l</mi><mi>l</mi><mi>e</mi><msub><mi>l</mi><mrow><mi>l</mi><mi>s</mi><mi>o</mi><mi>n</mi></mrow></msub><mo>+</mo><mi>p</mi><mi>a</mi><mi>r</mi><mi>a</mi><mi>l</mi><mi>l</mi><mi>e</mi><msub><mi>l</mi><mrow><mi>r</mi><mi>s</mi><mi>o</mi><mi>n</mi></mrow></msub><mo>+</mo><mi>m</mi><mi>i</mi><mi>n</mi><mo>(</mo><mi>s</mi><mi>e</mi><mi>r</mi><mi>i</mi><mi>a</mi><msub><mi>l</mi><mrow><mi>l</mi><mi>s</mi><mi>o</mi><mi>n</mi></mrow></msub><mo separator="true">,</mo><mi>s</mi><mi>e</mi><mi>r</mi><mi>i</mi><mi>a</mi><msub><mi>l</mi><mrow><mi>r</mi><mi>s</mi><mi>o</mi><mi>n</mi></mrow></msub><mo>)</mo></mrow></mtd></mtr></mtable></mrow><annotation encoding="application/x-tex">\begin{aligned}serial &amp;\ge val \\parallel &amp;\ge parallel_{lson} + parallel_{rson} + min(serial_{lson}, serial_{rson})\end{aligned}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.45em;"></span><span class="strut bottom" style="height:2.4000000000000004em;vertical-align:-0.9500000000000004em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist"><span style="top:-0.6099999999999999em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord mathit">s</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">i</span><span class="mord mathit">a</span><span class="mord mathit" style="margin-right:0.01968em;">l</span></span></span><span style="top:0.5900000000000003em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord mathit">p</span><span class="mord mathit">a</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">a</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.01968em;">l</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="col-align-l"><span class="vlist"><span style="top:-0.6099999999999999em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord displaystyle textstyle uncramped"></span><span class="mrel">â‰¥</span><span class="mord mathit" style="margin-right:0.03588em;">v</span><span class="mord mathit">a</span><span class="mord mathit" style="margin-right:0.01968em;">l</span></span></span><span style="top:0.5900000000000003em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord displaystyle textstyle uncramped"></span><span class="mrel">â‰¥</span><span class="mord mathit">p</span><span class="mord mathit">a</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">a</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">e</span><span class="mord"><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.01968em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">s</span><span class="mord mathit">o</span><span class="mord mathit">n</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">+</span><span class="mord mathit">p</span><span class="mord mathit">a</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">a</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">e</span><span class="mord"><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.01968em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">s</span><span class="mord mathit">o</span><span class="mord mathit">n</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">+</span><span class="mord mathit">m</span><span class="mord mathit">i</span><span class="mord mathit">n</span><span class="mopen">(</span><span class="mord mathit">s</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">i</span><span class="mord mathit">a</span><span class="mord"><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.01968em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">s</span><span class="mord mathit">o</span><span class="mord mathit">n</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord mathit">s</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">i</span><span class="mord mathit">a</span><span class="mord"><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.01968em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">s</span><span class="mord mathit">o</span><span class="mord mathit">n</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span></span></span></span></p><p>è¿˜å‰©ä¸‹æœ€åçš„ä¸€æ®µæ—¶é—´<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>a</mi><mi>b</mi><mi>s</mi><mo>(</mo><mi>s</mi><mi>e</mi><mi>r</mi><mi>i</mi><mi>a</mi><msub><mi>l</mi><mrow><mi>l</mi><mi>s</mi><mi>o</mi><mi>n</mi></mrow></msub><mo>âˆ’</mo><mi>s</mi><mi>e</mi><mi>r</mi><mi>i</mi><mi>a</mi><msub><mi>l</mi><mrow><mi>r</mi><mi>s</mi><mi>o</mi><mi>n</mi></mrow></msub><mo>)</mo></mrow><annotation encoding="application/x-tex">abs(serial_{lson} - serial_{rson})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">a</span><span class="mord mathit">b</span><span class="mord mathit">s</span><span class="mopen">(</span><span class="mord mathit">s</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">i</span><span class="mord mathit">a</span><span class="mord"><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.01968em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">s</span><span class="mord mathit">o</span><span class="mord mathit">n</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">âˆ’</span><span class="mord mathit">s</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">i</span><span class="mord mathit">a</span><span class="mord"><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.01968em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">s</span><span class="mord mathit">o</span><span class="mord mathit">n</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span>ï¼Œè¦ä½¿å¾—æœ€ä¼˜ï¼Œåªæœ‰ä¼˜åŒ–è¿™ä¸ªéƒ¨åˆ†ï¼›å› ä¸ºä»»åŠ¡å¯ä»¥æš‚åœï¼Œæˆ‘ä»¬å¯ä»¥ä»<strong>å¦ä¸€ä¸ªå­æ ‘çš„å¹¶è¡Œçš„ä»»åŠ¡ä¸­æŠ½ä¸€ä¸ªcpuæ¥æ‰§è¡Œè¿™æ®µä»»åŠ¡</strong>ï¼Œè¿™æ ·çš„è¯è€—è´¹çš„æ—¶é—´å°±æ˜¯<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>a</mi><mi>b</mi><mi>s</mi><mo>(</mo><mi>s</mi><mi>e</mi><mi>r</mi><mi>i</mi><mi>a</mi><msub><mi>l</mi><mrow><mi>l</mi><mi>s</mi><mi>o</mi><mi>n</mi></mrow></msub><mo>âˆ’</mo><mi>s</mi><mi>e</mi><mi>r</mi><mi>i</mi><mi>a</mi><msub><mi>l</mi><mrow><mi>r</mi><mi>s</mi><mi>o</mi><mi>n</mi></mrow></msub><mo>)</mo><mi mathvariant="normal">/</mi><mn>2</mn></mrow><annotation encoding="application/x-tex">abs(serial_{lson} - serial_{rson}) / 2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">a</span><span class="mord mathit">b</span><span class="mord mathit">s</span><span class="mopen">(</span><span class="mord mathit">s</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">i</span><span class="mord mathit">a</span><span class="mord"><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.01968em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">s</span><span class="mord mathit">o</span><span class="mord mathit">n</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">âˆ’</span><span class="mord mathit">s</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">i</span><span class="mord mathit">a</span><span class="mord"><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.01968em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">s</span><span class="mord mathit">o</span><span class="mord mathit">n</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mord mathrm">/</span><span class="mord mathrm">2</span></span></span></span>ï¼Œä½†æ˜¯è¿˜è¦è€ƒè™‘å¦ä¸€ä¸ªå­æ ‘çš„å¹¶è¡Œæ—¶é—´ï¼Œè‹¥<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>a</mi><mi>b</mi><mi>s</mi><mo>(</mo><mi>s</mi><mi>e</mi><mi>r</mi><mi>i</mi><mi>a</mi><msub><mi>l</mi><mrow><mi>l</mi><mi>s</mi><mi>o</mi><mi>n</mi></mrow></msub><mo>âˆ’</mo><mi>s</mi><mi>e</mi><mi>r</mi><mi>i</mi><mi>a</mi><msub><mi>l</mi><mrow><mi>r</mi><mi>s</mi><mi>o</mi><mi>n</mi></mrow></msub><mo>)</mo></mrow><annotation encoding="application/x-tex">abs(serial_{lson} - serial_{rson})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">a</span><span class="mord mathit">b</span><span class="mord mathit">s</span><span class="mopen">(</span><span class="mord mathit">s</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">i</span><span class="mord mathit">a</span><span class="mord"><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.01968em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">s</span><span class="mord mathit">o</span><span class="mord mathit">n</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">âˆ’</span><span class="mord mathit">s</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">i</span><span class="mord mathit">a</span><span class="mord"><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.01968em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">s</span><span class="mord mathit">o</span><span class="mord mathit">n</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span>æ‰§è¡Œå®Œæˆä¹‹å‰å¦ä¸€ä¸ªå­æ ‘çš„å¹¶è¡Œä»»åŠ¡å°±æ‰§è¡Œå®Œäº†ï¼Œ å‰©ä¸‹çš„å°±åªèƒ½å¹¶è¡Œäº†ï¼Œæˆ‘ä»¬å‡è®¾<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mi>e</mi><mi>r</mi><mi>i</mi><mi>a</mi><msub><mi>l</mi><mrow><mi>l</mi><mi>s</mi><mi>o</mi><mi>n</mi></mrow></msub><mo>&gt;</mo><mi>s</mi><mi>e</mi><mi>r</mi><mi>i</mi><mi>a</mi><msub><mi>l</mi><mrow><mi>r</mi><mi>s</mi><mi>o</mi><mi>n</mi></mrow></msub></mrow><annotation encoding="application/x-tex">serial_{lson} \gt serial_{rson}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="base textstyle uncramped"><span class="mord mathit">s</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">i</span><span class="mord mathit">a</span><span class="mord"><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.01968em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">s</span><span class="mord mathit">o</span><span class="mord mathit">n</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">&gt;</span><span class="mord mathit">s</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">i</span><span class="mord mathit">a</span><span class="mord"><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.01968em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">s</span><span class="mord mathit">o</span><span class="mord mathit">n</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span>ï¼Œå¾—å‡º<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mi>e</mi><mi>r</mi><mi>i</mi><mi>a</mi><mi>l</mi></mrow><annotation encoding="application/x-tex">serial</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.69444em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">s</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">i</span><span class="mord mathit">a</span><span class="mord mathit" style="margin-right:0.01968em;">l</span></span></span></span>å’Œ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>p</mi><mi>a</mi><mi>r</mi><mi>a</mi><mi>l</mi><mi>l</mi><mi>e</mi><mi>l</mi></mrow><annotation encoding="application/x-tex">parallel</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord mathit">p</span><span class="mord mathit">a</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">a</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.01968em;">l</span></span></span></span></p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mtable><mtr><mtd><mrow><mi>s</mi><mi>e</mi><mi>r</mi><mi>i</mi><mi>a</mi><mi>l</mi></mrow></mtd><mtd><mrow><mrow></mrow><mo>=</mo><mi>v</mi><mi>a</mi><mi>l</mi><mo>+</mo><mi>m</mi><mi>a</mi><mi>x</mi><mo>(</mo><mn>0</mn><mo separator="true">,</mo><mi>e</mi><mi>x</mi><mi>t</mi><mi>r</mi><mi>a</mi><mo>âˆ’</mo><mi>t</mi><mi>o</mi><mi>t</mi><mi>a</mi><msub><mi>l</mi><mrow><mi>r</mi><mi>s</mi><mi>o</mi><mi>n</mi></mrow></msub><mo>+</mo><mi>p</mi><mi>a</mi><mi>r</mi><mi>a</mi><mi>l</mi><mi>l</mi><mi>e</mi><msub><mi>l</mi><mrow><mi>r</mi><mi>s</mi><mi>o</mi><mi>n</mi></mrow></msub><mo>)</mo></mrow></mtd></mtr><mtr><mtd><mrow><mi>p</mi><mi>a</mi><mi>r</mi><mi>a</mi><mi>l</mi><mi>l</mi><mi>e</mi><mi>l</mi></mrow></mtd><mtd><mrow><mrow></mrow><mo>=</mo><mi>p</mi><mi>a</mi><mi>r</mi><mi>a</mi><mi>l</mi><mi>l</mi><mi>e</mi><msub><mi>l</mi><mrow><mi>l</mi><mi>s</mi><mi>o</mi><mi>n</mi></mrow></msub><mo>+</mo><mi>p</mi><mi>a</mi><mi>r</mi><mi>a</mi><mi>l</mi><mi>l</mi><mi>e</mi><msub><mi>l</mi><mrow><mi>r</mi><mi>s</mi><mi>o</mi><mi>n</mi></mrow></msub><mo>+</mo><mi>s</mi><mi>e</mi><mi>r</mi><mi>i</mi><mi>a</mi><msub><mi>l</mi><mrow><mi>r</mi><mi>s</mi><mi>o</mi><mi>n</mi></mrow></msub><mo>+</mo><mi>m</mi><mi>i</mi><mi>n</mi><mo>(</mo><mi>e</mi><mi>x</mi><mi>t</mi><mi>r</mi><mi>a</mi><mo separator="true">,</mo><mi>t</mi><mi>o</mi><mi>t</mi><mi>a</mi><msub><mi>l</mi><mrow><mi>r</mi><mi>s</mi><mi>o</mi><mi>n</mi></mrow></msub><mo>âˆ’</mo><mi>p</mi><mi>a</mi><mi>r</mi><mi>a</mi><mi>l</mi><mi>l</mi><mi>e</mi><msub><mi>l</mi><mrow><mi>r</mi><mi>s</mi><mi>o</mi><mi>n</mi></mrow></msub><mo>)</mo></mrow></mtd></mtr><mtr><mtd><mrow><mi>e</mi><mi>x</mi><mi>t</mi><mi>r</mi><mi>a</mi></mrow></mtd><mtd><mrow><mrow></mrow><mo>=</mo><mi>s</mi><mi>e</mi><mi>r</mi><mi>i</mi><mi>a</mi><msub><mi>l</mi><mrow><mi>l</mi><mi>s</mi><mi>o</mi><mi>n</mi></mrow></msub><mo>âˆ’</mo><mi>s</mi><mi>e</mi><mi>r</mi><mi>i</mi><mi>a</mi><msub><mi>l</mi><mrow><mi>r</mi><mi>s</mi><mi>o</mi><mi>n</mi></mrow></msub></mrow></mtd></mtr><mtr><mtd><mrow></mrow></mtd></mtr></mtable></mrow><annotation encoding="application/x-tex">\begin{aligned}serial &amp;= val + max(0, extra - total_{rson} + parallel_{rson}) \\parallel &amp;= parallel_{lson} + parallel_{rson} + serial_{rson} + min(extra, total_{rson} - parallel_{rson}) \\extra &amp;= serial_{lson} - serial_{rson} \\\end{aligned}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:2.6500000000000004em;"></span><span class="strut bottom" style="height:4.800000000000001em;vertical-align:-2.1500000000000004em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist"><span style="top:-1.8100000000000003em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord mathit">s</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">i</span><span class="mord mathit">a</span><span class="mord mathit" style="margin-right:0.01968em;">l</span></span></span><span style="top:-0.6100000000000001em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord mathit">p</span><span class="mord mathit">a</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">a</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.01968em;">l</span></span></span><span style="top:0.5900000000000001em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord mathit">e</span><span class="mord mathit">x</span><span class="mord mathit">t</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">a</span></span></span><span style="top:1.7900000000000003em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="mord displaystyle textstyle uncramped"></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="col-align-l"><span class="vlist"><span style="top:-1.8100000000000003em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord displaystyle textstyle uncramped"></span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.03588em;">v</span><span class="mord mathit">a</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mbin">+</span><span class="mord mathit">m</span><span class="mord mathit">a</span><span class="mord mathit">x</span><span class="mopen">(</span><span class="mord mathrm">0</span><span class="mpunct">,</span><span class="mord mathit">e</span><span class="mord mathit">x</span><span class="mord mathit">t</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">a</span><span class="mbin">âˆ’</span><span class="mord mathit">t</span><span class="mord mathit">o</span><span class="mord mathit">t</span><span class="mord mathit">a</span><span class="mord"><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.01968em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">s</span><span class="mord mathit">o</span><span class="mord mathit">n</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">+</span><span class="mord mathit">p</span><span class="mord mathit">a</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">a</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">e</span><span class="mord"><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.01968em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">s</span><span class="mord mathit">o</span><span class="mord mathit">n</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span><span style="top:-0.6100000000000001em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord displaystyle textstyle uncramped"></span><span class="mrel">=</span><span class="mord mathit">p</span><span class="mord mathit">a</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">a</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">e</span><span class="mord"><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.01968em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">s</span><span class="mord mathit">o</span><span class="mord mathit">n</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">+</span><span class="mord mathit">p</span><span class="mord mathit">a</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">a</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">e</span><span class="mord"><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.01968em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">s</span><span class="mord mathit">o</span><span class="mord mathit">n</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">+</span><span class="mord mathit">s</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">i</span><span class="mord mathit">a</span><span class="mord"><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.01968em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">s</span><span class="mord mathit">o</span><span class="mord mathit">n</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">+</span><span class="mord mathit">m</span><span class="mord mathit">i</span><span class="mord mathit">n</span><span class="mopen">(</span><span class="mord mathit">e</span><span class="mord mathit">x</span><span class="mord mathit">t</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">a</span><span class="mpunct">,</span><span class="mord mathit">t</span><span class="mord mathit">o</span><span class="mord mathit">t</span><span class="mord mathit">a</span><span class="mord"><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.01968em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">s</span><span class="mord mathit">o</span><span class="mord mathit">n</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">âˆ’</span><span class="mord mathit">p</span><span class="mord mathit">a</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">a</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">e</span><span class="mord"><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.01968em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">s</span><span class="mord mathit">o</span><span class="mord mathit">n</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span><span style="top:0.5900000000000001em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord displaystyle textstyle uncramped"></span><span class="mrel">=</span><span class="mord mathit">s</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">i</span><span class="mord mathit">a</span><span class="mord"><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.01968em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">s</span><span class="mord mathit">o</span><span class="mord mathit">n</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">âˆ’</span><span class="mord mathit">s</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">i</span><span class="mord mathit">a</span><span class="mord"><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.01968em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">s</span><span class="mord mathit">o</span><span class="mord mathit">n</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span></span></span></span></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for a binary tree node.</span></span><br><span class="line"><span class="comment"> * struct TreeNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     TreeNode *left;</span></span><br><span class="line"><span class="comment"> *     TreeNode *right;</span></span><br><span class="line"><span class="comment"> *     TreeNode(int x) : val(x), left(NULL), right(NULL) &#123;&#125;</span></span><br><span class="line"><span class="comment"> * &#125;;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">typedef</span> <span class="built_in">pair</span>&lt;<span class="keyword">double</span>, <span class="keyword">double</span>&gt; pp;</span><br><span class="line">    <span class="keyword">typedef</span> <span class="built_in">pair</span>&lt;<span class="keyword">double</span>, pp&gt; state;</span><br><span class="line">    <span class="function">state <span class="title">dfs</span><span class="params">(TreeNode* ptr)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(ptr == <span class="literal">nullptr</span>) <span class="keyword">return</span> <span class="built_in">make_pair</span>(<span class="number">0.0</span>, <span class="built_in">make_pair</span>(<span class="number">0.0</span>, <span class="number">0.0</span>));</span><br><span class="line">        state lson = dfs(ptr-&gt;left);</span><br><span class="line">        state rson = dfs(ptr-&gt;right);</span><br><span class="line">        <span class="keyword">if</span>(lson.second.first &lt; rson.second.first) swap(lson, rson);</span><br><span class="line">        state root = <span class="built_in">make_pair</span>(ptr-&gt;val + lson.first + rson.first, <span class="built_in">make_pair</span>(ptr-&gt;val, lson.second.second + rson.second.second));</span><br><span class="line">        <span class="keyword">double</span> extra = lson.second.first - rson.second.first;</span><br><span class="line">        root.second.second += rson.second.first;</span><br><span class="line">        root.second.second += min(extra, rson.first - rson.second.first) / <span class="number">2</span>;</span><br><span class="line">        root.second.first += max(<span class="number">0.0</span>, extra - rson.first + rson.second.first);</span><br><span class="line">        <span class="keyword">return</span> root;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">double</span> <span class="title">minimalExecTime</span><span class="params">(TreeNode* root)</span> </span>&#123;</span><br><span class="line">        state res = dfs(root);</span><br><span class="line">        <span class="keyword">return</span> res.second.first + res.second.second;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2020/11/12/7hVru3FMJY9Lfgq.png" alt="" /></p><p>æ—¶é—´å¤æ‚åº¦<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><mi>n</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathit">n</span><span class="mclose">)</span></span></span></span></p><h4 id="æ ‘å½¢dp"><a class="markdownIt-Anchor" href="#æ ‘å½¢dp"></a> æ ‘å½¢dpğŸ’¡</h4><p>ç”¨<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>d</mi><mi>p</mi><mo>[</mo><mi>i</mi><mo>]</mo></mrow><annotation encoding="application/x-tex">dp[i]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">d</span><span class="mord mathit">p</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mclose">]</span></span></span></span>è¡¨ç¤ºèŠ‚ç‚¹<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.65952em;"></span><span class="strut bottom" style="height:0.65952em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">i</span></span></span></span>å¯¹åº”çš„ä»»åŠ¡çš„æœ€çŸ­æ‰§è¡Œæ—¶é—´ï¼Œæ ¹æ®å­æ ‘çš„æƒ…å†µåˆ†ç±»è®¨è®ºï¼š</p><ul><li><p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.65952em;"></span><span class="strut bottom" style="height:0.65952em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">i</span></span></span></span>æ— å­æ ‘ï¼Œåªèƒ½ä¸²è¡Œ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>d</mi><mi>p</mi><mo>[</mo><mi>i</mi><mo>]</mo><mo>=</mo><mi>v</mi><mi>a</mi><mi>l</mi></mrow><annotation encoding="application/x-tex">dp[i] = val</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">d</span><span class="mord mathit">p</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mclose">]</span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.03588em;">v</span><span class="mord mathit">a</span><span class="mord mathit" style="margin-right:0.01968em;">l</span></span></span></span></p></li><li><p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.65952em;"></span><span class="strut bottom" style="height:0.65952em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">i</span></span></span></span>æœ‰ä¸€ä¸ªå­æ ‘ï¼Œä¸å¤±ä¸€èˆ¬æ€§ï¼Œè®¾åªæœ‰å·¦å­æ ‘ï¼Œåˆ™åªèƒ½æ‰§è¡Œå®Œå·¦å­æ ‘ä¹‹åï¼Œæ‰èƒ½ä¸²è¡Œæ‰§è¡Œå½“å‰ä»»åŠ¡<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>d</mi><mi>p</mi><mo>[</mo><mi>i</mi><mo>]</mo><mo>=</mo><mi>d</mi><mi>p</mi><mo>[</mo><mi>l</mi><mi>s</mi><mi>o</mi><mi>n</mi><mo>]</mo><mo>+</mo><mi>v</mi><mi>a</mi><mi>l</mi></mrow><annotation encoding="application/x-tex">dp[i] = dp[lson] + val</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">d</span><span class="mord mathit">p</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mclose">]</span><span class="mrel">=</span><span class="mord mathit">d</span><span class="mord mathit">p</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">s</span><span class="mord mathit">o</span><span class="mord mathit">n</span><span class="mclose">]</span><span class="mbin">+</span><span class="mord mathit" style="margin-right:0.03588em;">v</span><span class="mord mathit">a</span><span class="mord mathit" style="margin-right:0.01968em;">l</span></span></span></span></p></li><li><p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.65952em;"></span><span class="strut bottom" style="height:0.65952em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">i</span></span></span></span>æœ‰ä¸¤ä¸ªå­æ ‘ï¼Œæ­¤æ—¶æœ‰ä¸¤ç§æƒ…å†µï¼š</p><ul><li><p>å…ˆæ‰§è¡Œå®Œå·¦å­æ ‘ï¼Œå†æ‰§è¡Œå®Œå³å­æ ‘ï¼Œæœ€åæ‰§è¡Œæ ¹ä»»åŠ¡ï¼š<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>d</mi><mi>p</mi><mo>[</mo><mi>i</mi><mo>]</mo><mo>=</mo><mi>d</mi><mi>p</mi><mo>[</mo><mi>l</mi><mi>s</mi><mi>o</mi><mi>n</mi><mo>]</mo><mo>+</mo><mi>d</mi><mi>p</mi><mo>[</mo><mi>r</mi><mi>s</mi><mi>o</mi><mi>n</mi><mo>]</mo><mo>+</mo><mi>v</mi><mi>a</mi><mi>l</mi></mrow><annotation encoding="application/x-tex">dp[i] = dp[lson] + dp[rson] + val</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">d</span><span class="mord mathit">p</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mclose">]</span><span class="mrel">=</span><span class="mord mathit">d</span><span class="mord mathit">p</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">s</span><span class="mord mathit">o</span><span class="mord mathit">n</span><span class="mclose">]</span><span class="mbin">+</span><span class="mord mathit">d</span><span class="mord mathit">p</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">s</span><span class="mord mathit">o</span><span class="mord mathit">n</span><span class="mclose">]</span><span class="mbin">+</span><span class="mord mathit" style="margin-right:0.03588em;">v</span><span class="mord mathit">a</span><span class="mord mathit" style="margin-right:0.01968em;">l</span></span></span></span></p></li><li><p>å·¦å­æ ‘å¹¶è¡Œæ‰§è¡Œ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.43056em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">x</span></span></span></span>ï¼Œå³å­æ ‘å¹¶è¡Œæ‰§è¡Œ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>y</mi></mrow><annotation encoding="application/x-tex">y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.03588em;">y</span></span></span></span>ï¼Œå·¦å³å­æ ‘ä¸€èµ·æ‰§è¡Œ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>m</mi><mi>a</mi><mi>x</mi><mo>(</mo><mi>s</mi><mi>u</mi><mi>m</mi><mo>[</mo><mi>l</mi><mi>s</mi><mi>o</mi><mi>n</mi><mo>]</mo><mo>âˆ’</mo><mi>x</mi><mo separator="true">,</mo><mi>s</mi><mi>u</mi><mi>m</mi><mo>[</mo><mi>r</mi><mi>s</mi><mi>o</mi><mi>n</mi><mo>]</mo><mo>âˆ’</mo><mi>y</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">max(sum[lson] - x, sum[rson] - y)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">m</span><span class="mord mathit">a</span><span class="mord mathit">x</span><span class="mopen">(</span><span class="mord mathit">s</span><span class="mord mathit">u</span><span class="mord mathit">m</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">s</span><span class="mord mathit">o</span><span class="mord mathit">n</span><span class="mclose">]</span><span class="mbin">âˆ’</span><span class="mord mathit">x</span><span class="mpunct">,</span><span class="mord mathit">s</span><span class="mord mathit">u</span><span class="mord mathit">m</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">s</span><span class="mord mathit">o</span><span class="mord mathit">n</span><span class="mclose">]</span><span class="mbin">âˆ’</span><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="mclose">)</span></span></span></span>ï¼Œå³<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>d</mi><mi>p</mi><mo>[</mo><mi>i</mi><mo>]</mo><mo>=</mo><mi>m</mi><mi>i</mi><msub><mi>n</mi><mrow><mi>f</mi><mi>o</mi><mi>r</mi><mspace width="1em"></mspace><mi>a</mi><mi>l</mi><mi>l</mi><mspace width="1em"></mspace><mi>y</mi><mo>âˆ’</mo><mi>x</mi></mrow></msub><mi>m</mi><mi>a</mi><mi>x</mi><mo>(</mo><mi>s</mi><mi>u</mi><mi>m</mi><mo>[</mo><mi>l</mi><mi>s</mi><mi>o</mi><mi>n</mi><mo>]</mo><mo>+</mo><mi>y</mi><mo>âˆ’</mo><mi>x</mi><mo separator="true">,</mo><mi>s</mi><mi>u</mi><mi>m</mi><mo>[</mo><mi>r</mi><mi>s</mi><mi>o</mi><mi>n</mi><mo>]</mo><mo>âˆ’</mo><mo>(</mo><mi>y</mi><mo>âˆ’</mo><mi>x</mi><mo>)</mo><mo>)</mo><mo>+</mo><mi>v</mi><mi>a</mi><mi>l</mi></mrow><annotation encoding="application/x-tex">dp[i] = min_{for\quad all\quad y - x}max(sum[lson] + y - x, sum[rson] - (y - x)) + val</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1.036108em;vertical-align:-0.286108em;"></span><span class="base textstyle uncramped"><span class="mord mathit">d</span><span class="mord mathit">p</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mclose">]</span><span class="mrel">=</span><span class="mord mathit">m</span><span class="mord mathit">i</span><span class="mord"><span class="mord mathit">n</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mspace quad"></span><span class="mord mathit">a</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mspace quad"></span><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="mbin">âˆ’</span><span class="mord mathit">x</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathit">m</span><span class="mord mathit">a</span><span class="mord mathit">x</span><span class="mopen">(</span><span class="mord mathit">s</span><span class="mord mathit">u</span><span class="mord mathit">m</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">s</span><span class="mord mathit">o</span><span class="mord mathit">n</span><span class="mclose">]</span><span class="mbin">+</span><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="mbin">âˆ’</span><span class="mord mathit">x</span><span class="mpunct">,</span><span class="mord mathit">s</span><span class="mord mathit">u</span><span class="mord mathit">m</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">s</span><span class="mord mathit">o</span><span class="mord mathit">n</span><span class="mclose">]</span><span class="mbin">âˆ’</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="mbin">âˆ’</span><span class="mord mathit">x</span><span class="mclose">)</span><span class="mclose">)</span><span class="mbin">+</span><span class="mord mathit" style="margin-right:0.03588em;">v</span><span class="mord mathit">a</span><span class="mord mathit" style="margin-right:0.01968em;">l</span></span></span></span>ã€‚</p><p>æˆ‘ä»¬è®¾<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>t</mi><mo>=</mo><mi>y</mi><mo>âˆ’</mo><mi>x</mi></mrow><annotation encoding="application/x-tex">t = y - x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.61508em;"></span><span class="strut bottom" style="height:0.80952em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord mathit">t</span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="mbin">âˆ’</span><span class="mord mathit">x</span></span></span></span>ï¼Œè€ƒè™‘<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>t</mi></mrow><annotation encoding="application/x-tex">t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.61508em;"></span><span class="strut bottom" style="height:0.61508em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">t</span></span></span></span>çš„èŒƒå›´ï¼šå¯¹äºæ¯ä¸ªä»»åŠ¡æ ‘æ¥è¯´å‡è®¾æœ€å¤§å¹¶è¡Œæ—¶é—´ä¸º<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>p</mi><mi>a</mi><mi>r</mi><mi>a</mi></mrow><annotation encoding="application/x-tex">para</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord mathit">p</span><span class="mord mathit">a</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">a</span></span></span></span>ï¼Œæ€»çš„ä»»åŠ¡æ—¶é—´å’Œä¸º<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mi>u</mi><mi>m</mi></mrow><annotation encoding="application/x-tex">sum</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.43056em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">s</span><span class="mord mathit">u</span><span class="mord mathit">m</span></span></span></span>ï¼Œé‚£ä¹ˆæœ€çŸ­æ‰§è¡Œæ—¶é—´å°±ä¸º<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mi>u</mi><mi>m</mi><mo>âˆ’</mo><mi>p</mi><mi>a</mi><mi>r</mi><mi>a</mi></mrow><annotation encoding="application/x-tex">sum - para</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.58333em;"></span><span class="strut bottom" style="height:0.7777700000000001em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord mathit">s</span><span class="mord mathit">u</span><span class="mord mathit">m</span><span class="mbin">âˆ’</span><span class="mord mathit">p</span><span class="mord mathit">a</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">a</span></span></span></span>ï¼Œåœ¨æˆ‘ä»¬çš„è®¾ç½®ä¸­ï¼Œ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mi>u</mi><mi>m</mi><mo>âˆ’</mo><mi>p</mi><mi>a</mi><mi>r</mi><mi>a</mi><mo>=</mo><mi>d</mi><mi>p</mi><mo>[</mo><mi>i</mi><mo>]</mo></mrow><annotation encoding="application/x-tex">sum - para = dp[i]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">s</span><span class="mord mathit">u</span><span class="mord mathit">m</span><span class="mbin">âˆ’</span><span class="mord mathit">p</span><span class="mord mathit">a</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">a</span><span class="mrel">=</span><span class="mord mathit">d</span><span class="mord mathit">p</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mclose">]</span></span></span></span>ï¼Œå› æ­¤æœ‰<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi><mo>âˆˆ</mo><mo>[</mo><mn>0</mn><mo separator="true">,</mo><mi>s</mi><mi>u</mi><mi>m</mi><mo>[</mo><mi>l</mi><mi>s</mi><mi>o</mi><mi>n</mi><mo>]</mo><mo>âˆ’</mo><mi>d</mi><mi>p</mi><mo>[</mo><mi>l</mi><mi>s</mi><mi>o</mi><mi>n</mi><mo>]</mo><mo>]</mo></mrow><annotation encoding="application/x-tex">x \in [0, sum[lson] - dp[lson]]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">x</span><span class="mrel">âˆˆ</span><span class="mopen">[</span><span class="mord mathrm">0</span><span class="mpunct">,</span><span class="mord mathit">s</span><span class="mord mathit">u</span><span class="mord mathit">m</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">s</span><span class="mord mathit">o</span><span class="mord mathit">n</span><span class="mclose">]</span><span class="mbin">âˆ’</span><span class="mord mathit">d</span><span class="mord mathit">p</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">s</span><span class="mord mathit">o</span><span class="mord mathit">n</span><span class="mclose">]</span><span class="mclose">]</span></span></span></span>ï¼Œè¿›è€Œå¯ä»¥å¾—çŸ¥<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>t</mi></mrow><annotation encoding="application/x-tex">t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.61508em;"></span><span class="strut bottom" style="height:0.61508em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">t</span></span></span></span>çš„èŒƒå›´æ˜¯<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>[</mo><mi>d</mi><mi>p</mi><mo>[</mo><mi>l</mi><mi>s</mi><mi>o</mi><mi>n</mi><mo>]</mo><mo>âˆ’</mo><mi>s</mi><mi>u</mi><mi>m</mi><mo>[</mo><mi>l</mi><mi>s</mi><mi>o</mi><mi>n</mi><mo>]</mo><mo separator="true">,</mo><mi>s</mi><mi>u</mi><mi>m</mi><mo>[</mo><mi>r</mi><mi>s</mi><mi>o</mi><mi>n</mi><mo>]</mo><mo>âˆ’</mo><mi>d</mi><mi>p</mi><mo>[</mo><mi>r</mi><mi>s</mi><mi>o</mi><mi>n</mi><mo>]</mo><mo>]</mo></mrow><annotation encoding="application/x-tex">[dp[lson] - sum[lson], sum[rson] - dp[rson]]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mopen">[</span><span class="mord mathit">d</span><span class="mord mathit">p</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">s</span><span class="mord mathit">o</span><span class="mord mathit">n</span><span class="mclose">]</span><span class="mbin">âˆ’</span><span class="mord mathit">s</span><span class="mord mathit">u</span><span class="mord mathit">m</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">s</span><span class="mord mathit">o</span><span class="mord mathit">n</span><span class="mclose">]</span><span class="mpunct">,</span><span class="mord mathit">s</span><span class="mord mathit">u</span><span class="mord mathit">m</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">s</span><span class="mord mathit">o</span><span class="mord mathit">n</span><span class="mclose">]</span><span class="mbin">âˆ’</span><span class="mord mathit">d</span><span class="mord mathit">p</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">s</span><span class="mord mathit">o</span><span class="mord mathit">n</span><span class="mclose">]</span><span class="mclose">]</span></span></span></span></p><p>å½“å‰çš„é—®é¢˜å°±å˜æˆäº†åœ¨<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>t</mi><mo>âˆˆ</mo><mo>[</mo><mi>d</mi><mi>p</mi><mo>[</mo><mi>l</mi><mi>s</mi><mi>o</mi><mi>n</mi><mo>]</mo><mo>âˆ’</mo><mi>s</mi><mi>u</mi><mi>m</mi><mo>[</mo><mi>l</mi><mi>s</mi><mi>o</mi><mi>n</mi><mo>]</mo><mo separator="true">,</mo><mi>s</mi><mi>u</mi><mi>m</mi><mo>[</mo><mi>r</mi><mi>s</mi><mi>o</mi><mi>n</mi><mo>]</mo><mo>âˆ’</mo><mi>d</mi><mi>p</mi><mo>[</mo><mi>r</mi><mi>s</mi><mi>o</mi><mi>n</mi><mo>]</mo><mo>]</mo></mrow><annotation encoding="application/x-tex">t \in [dp[lson] - sum[lson], sum[rson] - dp[rson]]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">t</span><span class="mrel">âˆˆ</span><span class="mopen">[</span><span class="mord mathit">d</span><span class="mord mathit">p</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">s</span><span class="mord mathit">o</span><span class="mord mathit">n</span><span class="mclose">]</span><span class="mbin">âˆ’</span><span class="mord mathit">s</span><span class="mord mathit">u</span><span class="mord mathit">m</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">s</span><span class="mord mathit">o</span><span class="mord mathit">n</span><span class="mclose">]</span><span class="mpunct">,</span><span class="mord mathit">s</span><span class="mord mathit">u</span><span class="mord mathit">m</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">s</span><span class="mord mathit">o</span><span class="mord mathit">n</span><span class="mclose">]</span><span class="mbin">âˆ’</span><span class="mord mathit">d</span><span class="mord mathit">p</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">s</span><span class="mord mathit">o</span><span class="mord mathit">n</span><span class="mclose">]</span><span class="mclose">]</span></span></span></span>æ—¶ï¼Œæ±‚<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>y</mi><mo>=</mo><mi>t</mi><mo>+</mo><mi>s</mi><mi>u</mi><mi>m</mi><mo>[</mo><mi>l</mi><mi>s</mi><mi>o</mi><mi>n</mi><mo>]</mo></mrow><annotation encoding="application/x-tex">y = t + sum[lson]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="mrel">=</span><span class="mord mathit">t</span><span class="mbin">+</span><span class="mord mathit">s</span><span class="mord mathit">u</span><span class="mord mathit">m</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">s</span><span class="mord mathit">o</span><span class="mord mathit">n</span><span class="mclose">]</span></span></span></span>å’Œ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>y</mi><mo>=</mo><mo>âˆ’</mo><mi>t</mi><mo>+</mo><mi>s</mi><mi>u</mi><mi>m</mi><mo>[</mo><mi>r</mi><mi>s</mi><mi>o</mi><mi>n</mi><mo>]</mo></mrow><annotation encoding="application/x-tex">y = -t + sum[rson]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="mrel">=</span><span class="mord">âˆ’</span><span class="mord mathit">t</span><span class="mbin">+</span><span class="mord mathit">s</span><span class="mord mathit">u</span><span class="mord mathit">m</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">s</span><span class="mord mathit">o</span><span class="mord mathit">n</span><span class="mclose">]</span></span></span></span>ä¸¤ä¸ªå‡½æ•°çš„<strong>è¾ƒå¤§å€¼ä¸­çš„æœ€å°å€¼</strong>ï¼Œç”»å›¾åˆ†æï¼š</p><p><img src="https://i.loli.net/2020/11/14/PyARluTOG8gHhJQ.png" alt="" /></p><p>å¯ä»¥çœ‹å‡ºè¿™ä¸ªæœ€å°å€¼åªä¼šå–åˆ°<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mfrac><mrow><mi>s</mi><mi>u</mi><mi>m</mi><mo>[</mo><mi>l</mi><mi>s</mi><mi>o</mi><mi>n</mi><mo>]</mo><mo>+</mo><mi>s</mi><mi>u</mi><mi>m</mi><mo>[</mo><mi>r</mi><mi>s</mi><mi>o</mi><mi>n</mi><mo>]</mo></mrow><mrow><mn>2</mn></mrow></mfrac><mo separator="true">,</mo><mi>d</mi><mi>p</mi><mo>[</mo><mi>l</mi><mi>s</mi><mi>o</mi><mi>n</mi><mo>]</mo><mo separator="true">,</mo><mi>d</mi><mi>p</mi><mo>[</mo><mi>r</mi><mi>s</mi><mi>o</mi><mi>n</mi><mo>]</mo></mrow><annotation encoding="application/x-tex">\frac{sum[lson] + sum[rson]}{2},dp[lson],dp[rson]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.01em;"></span><span class="strut bottom" style="height:1.355em;vertical-align:-0.345em;"></span><span class="base textstyle uncramped"><span class="mord reset-textstyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.345em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathrm">2</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.485em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit">s</span><span class="mord mathit">u</span><span class="mord mathit">m</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">s</span><span class="mord mathit">o</span><span class="mord mathit">n</span><span class="mclose">]</span><span class="mbin">+</span><span class="mord mathit">s</span><span class="mord mathit">u</span><span class="mord mathit">m</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">s</span><span class="mord mathit">o</span><span class="mord mathit">n</span><span class="mclose">]</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span><span class="mpunct">,</span><span class="mord mathit">d</span><span class="mord mathit">p</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">s</span><span class="mord mathit">o</span><span class="mord mathit">n</span><span class="mclose">]</span><span class="mpunct">,</span><span class="mord mathit">d</span><span class="mord mathit">p</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">s</span><span class="mord mathit">o</span><span class="mord mathit">n</span><span class="mclose">]</span></span></span></span>ä¸‰è€…ä¸­çš„æœ€å¤§å€¼ï¼Œå› æ­¤<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>d</mi><mi>p</mi><mo>[</mo><mi>i</mi><mo>]</mo><mo>=</mo><mi>m</mi><mi>a</mi><mi>x</mi><mo>(</mo><mi>d</mi><mi>p</mi><mo>[</mo><mi>l</mi><mi>s</mi><mi>o</mi><mi>n</mi><mo>]</mo><mo separator="true">,</mo><mi>d</mi><mi>p</mi><mo>[</mo><mi>r</mi><mi>s</mi><mi>o</mi><mi>n</mi><mo>]</mo><mo separator="true">,</mo><mfrac><mrow><mi>s</mi><mi>u</mi><mi>m</mi><mo>[</mo><mi>l</mi><mi>s</mi><mi>o</mi><mi>n</mi><mo>]</mo><mo>+</mo><mi>s</mi><mi>u</mi><mi>m</mi><mo>[</mo><mi>r</mi><mi>s</mi><mi>o</mi><mi>n</mi><mo>]</mo></mrow><mrow><mn>2</mn></mrow></mfrac><mo>)</mo><mo>+</mo><mi>v</mi><mi>a</mi><mi>l</mi></mrow><annotation encoding="application/x-tex">dp[i] = max(dp[lson],dp[rson],\frac{sum[lson] + sum[rson]}{2}) + val</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.01em;"></span><span class="strut bottom" style="height:1.355em;vertical-align:-0.345em;"></span><span class="base textstyle uncramped"><span class="mord mathit">d</span><span class="mord mathit">p</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mclose">]</span><span class="mrel">=</span><span class="mord mathit">m</span><span class="mord mathit">a</span><span class="mord mathit">x</span><span class="mopen">(</span><span class="mord mathit">d</span><span class="mord mathit">p</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">s</span><span class="mord mathit">o</span><span class="mord mathit">n</span><span class="mclose">]</span><span class="mpunct">,</span><span class="mord mathit">d</span><span class="mord mathit">p</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">s</span><span class="mord mathit">o</span><span class="mord mathit">n</span><span class="mclose">]</span><span class="mpunct">,</span><span class="mord reset-textstyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.345em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathrm">2</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.485em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit">s</span><span class="mord mathit">u</span><span class="mord mathit">m</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">s</span><span class="mord mathit">o</span><span class="mord mathit">n</span><span class="mclose">]</span><span class="mbin">+</span><span class="mord mathit">s</span><span class="mord mathit">u</span><span class="mord mathit">m</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">s</span><span class="mord mathit">o</span><span class="mord mathit">n</span><span class="mclose">]</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span><span class="mclose">)</span><span class="mbin">+</span><span class="mord mathit" style="margin-right:0.03588em;">v</span><span class="mord mathit">a</span><span class="mord mathit" style="margin-right:0.01968em;">l</span></span></span></span></p></li></ul></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Definition for a binary tree node.</span></span><br><span class="line"><span class="comment"># class TreeNode:</span></span><br><span class="line"><span class="comment">#     def __init__(self, x):</span></span><br><span class="line"><span class="comment">#         self.val = x</span></span><br><span class="line"><span class="comment">#         self.left = None</span></span><br><span class="line"><span class="comment">#         self.right = None</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">minimalExecTime</span>(<span class="params">self, root: TreeNode</span>) -&gt; float:</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">dfs</span>(<span class="params">rt: TreeNode</span>) :</span></span><br><span class="line">            <span class="keyword">if</span> rt <span class="keyword">is</span> <span class="literal">None</span> :</span><br><span class="line">                <span class="keyword">return</span> <span class="number">0</span>, <span class="number">0</span></span><br><span class="line">            lsum, ldp = dfs(rt.left)</span><br><span class="line">            rsum, rdp = dfs(rt.right)</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> lsum + rsum + rt.val, max(ldp, rdp, (lsum + rsum) / <span class="number">2</span>) + rt.val</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> dfs(root)[<span class="number">1</span>]</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2020/11/12/swrScCOTkdVF7pz.png" alt="" /></p><p>æ—¶é—´å¤æ‚åº¦<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><mi>n</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathit">n</span><span class="mclose">)</span></span></span></span></p>]]></content>
    
    
    <summary type="html">&lt;h3 id=&quot;é¢˜æ„&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#é¢˜æ„&quot;&gt;&lt;/a&gt; é¢˜æ„&lt;/h3&gt;
&lt;p&gt;&lt;img src=&quot;https://i.loli.net/2020/11/12/fHcECQjRoOvbxs7.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="leetcode" scheme="https://christopherrliu.github.io/categories/leetcode/"/>
    
    
    <category term="C++" scheme="https://christopherrliu.github.io/tags/C/"/>
    
    <category term="è´ªå¿ƒ" scheme="https://christopherrliu.github.io/tags/%E8%B4%AA%E5%BF%83/"/>
    
    <category term="ç®—æ³•" scheme="https://christopherrliu.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
    <category term="é¢è¯•" scheme="https://christopherrliu.github.io/tags/%E9%9D%A2%E8%AF%95/"/>
    
    <category term="python" scheme="https://christopherrliu.github.io/tags/python/"/>
    
    <category term="æ ‘å½¢dp" scheme="https://christopherrliu.github.io/tags/%E6%A0%91%E5%BD%A2dp/"/>
    
    <category term="dfs" scheme="https://christopherrliu.github.io/tags/dfs/"/>
    
  </entry>
  
  <entry>
    <title>æ¯å¤©ä¸€é“leetcode-maximum-sum-bst-in-binary-tree</title>
    <link href="https://christopherrliu.github.io/2020/11/12/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode-maximum-sum-bst-in-binary-tree/"/>
    <id>https://christopherrliu.github.io/2020/11/12/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode-maximum-sum-bst-in-binary-tree/</id>
    <published>2020-11-12T05:43:48.000Z</published>
    <updated>2020-11-12T05:54:32.891Z</updated>
    
    <content type="html"><![CDATA[<h3 id="é¢˜æ„"><a class="markdownIt-Anchor" href="#é¢˜æ„"></a> é¢˜æ„</h3><h4 id="è‹±æ–‡é¢˜æ„"><a class="markdownIt-Anchor" href="#è‹±æ–‡é¢˜æ„"></a> è‹±æ–‡é¢˜æ„</h4><p><img src="https://i.loli.net/2020/11/12/ILVHJAq87OaivGx.png" alt="" /></p><a id="more"></a><h4 id="ä¸­æ–‡é¢˜æ„"><a class="markdownIt-Anchor" href="#ä¸­æ–‡é¢˜æ„"></a> ä¸­æ–‡é¢˜æ„</h4><p><img src="https://i.loli.net/2020/11/12/U7abC3kwR5ZSJKI.png" alt="" /></p><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>å› ä¸ºæ±‚çš„æ˜¯å­æ ‘ï¼Œæ‰€ä»¥åˆ†ææ¯æ£µå­æ ‘ï¼Œæˆ‘ä»¬å‡è®¾å½“å‰èŠ‚ç‚¹ä¸º<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>c</mi><mi>u</mi><mi>r</mi><mi>P</mi><mi>t</mi><mi>r</mi></mrow><annotation encoding="application/x-tex">curPtr</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">c</span><span class="mord mathit">u</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit" style="margin-right:0.13889em;">P</span><span class="mord mathit">t</span><span class="mord mathit" style="margin-right:0.02778em;">r</span></span></span></span>ï¼Œæƒ³è¦ä½¿å½“å‰å­æ ‘æˆä¸ºåˆæ³•çš„äºŒå‰æœç´¢æ ‘ï¼Œå°±è¦æ»¡è¶³<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>l</mi><mi>e</mi><mi>f</mi><mi>t</mi><mi>s</mi><mi>o</mi><mi>n</mi><mo>âˆ’</mo><mo>&gt;</mo><mi>u</mi><mi>p</mi><mi>p</mi><mi>e</mi><mi>r</mi><mo>&lt;</mo><mi>c</mi><mi>u</mi><mi>r</mi><mi>P</mi><mi>t</mi><mi>r</mi><mo>âˆ’</mo><mo>&gt;</mo><mi>v</mi><mi>a</mi><mi>l</mi><mi>l</mi><mo>&lt;</mo><mi>r</mi><mi>i</mi><mi>g</mi><mi>h</mi><mi>t</mi><mi>s</mi><mi>o</mi><mi>n</mi><mo>âˆ’</mo><mo>&gt;</mo><mi>l</mi><mi>o</mi><mi>w</mi><mi>e</mi><mi>r</mi></mrow><annotation encoding="application/x-tex">leftson-&gt;upper &lt; curPtr-&gt;vall &lt; rightson-&gt;lower</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mord mathit">t</span><span class="mord mathit">s</span><span class="mord mathit">o</span><span class="mord mathit">n</span><span class="mbin">âˆ’</span><span class="mrel">&gt;</span><span class="mord mathit">u</span><span class="mord mathit">p</span><span class="mord mathit">p</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mrel">&lt;</span><span class="mord mathit">c</span><span class="mord mathit">u</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit" style="margin-right:0.13889em;">P</span><span class="mord mathit">t</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mbin">âˆ’</span><span class="mrel">&gt;</span><span class="mord mathit" style="margin-right:0.03588em;">v</span><span class="mord mathit">a</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mrel">&lt;</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">i</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord mathit">h</span><span class="mord mathit">t</span><span class="mord mathit">s</span><span class="mord mathit">o</span><span class="mord mathit">n</span><span class="mbin">âˆ’</span><span class="mrel">&gt;</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right:0.02691em;">w</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.02778em;">r</span></span></span></span>ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦è®°å½•æ¯ä¸ªåˆæ³•å­æ ‘çš„ä¸Šä¸‹ç•Œå’Œå…ƒç´ å’Œï¼Œåˆ©ç”¨å›æº¯é€æ¬¡å‘ä¸Šæ›´æ–°å³å¯ï¼Œä¸€äº›ç»†èŠ‚è§ä»£ç </p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for a binary tree node.</span></span><br><span class="line"><span class="comment"> * struct TreeNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     TreeNode *left;</span></span><br><span class="line"><span class="comment"> *     TreeNode *right;</span></span><br><span class="line"><span class="comment"> *     TreeNode() : val(0), left(nullptr), right(nullptr) &#123;&#125;</span></span><br><span class="line"><span class="comment"> *     TreeNode(int x) : val(x), left(nullptr), right(nullptr) &#123;&#125;</span></span><br><span class="line"><span class="comment"> *     TreeNode(int x, TreeNode *left, TreeNode *right) : val(x), left(left), right(right) &#123;&#125;</span></span><br><span class="line"><span class="comment"> * &#125;;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">typedef</span> <span class="built_in">pair</span>&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; pp;</span><br><span class="line">    <span class="keyword">typedef</span> <span class="built_in">pair</span>&lt;<span class="keyword">int</span>, pp&gt; state;</span><br><span class="line">    <span class="function">state <span class="title">dfs</span><span class="params">(TreeNode* treePtr)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//ç©ºå­æ ‘ä¸å½±å“æ›´æ–°ï¼Œå°†ä¸Šä¸‹ç•Œè®¾ä¸ºæå¤§å€¼å’Œæå°å€¼</span></span><br><span class="line">        <span class="keyword">if</span>(treePtr == <span class="literal">nullptr</span>) <span class="keyword">return</span> <span class="built_in">make_pair</span>(<span class="number">0</span>, <span class="built_in">make_pair</span>(INT_MAX, -INT_MAX));</span><br><span class="line">        state leftSubTree = dfs(treePtr-&gt;left);</span><br><span class="line">        state rightSubTree = dfs(treePtr-&gt;right);</span><br><span class="line">        <span class="keyword">int</span> sum, lo, up;</span><br><span class="line">        sum = lo = up = treePtr-&gt;val;</span><br><span class="line">        <span class="keyword">if</span>(leftSubTree.second.second &lt; treePtr-&gt;val &amp;&amp; rightSubTree.second.first &gt; treePtr-&gt;val) &#123;</span><br><span class="line">            sum += leftSubTree.first + rightSubTree.first;</span><br><span class="line">            lo = leftSubTree.second.first == INT_MAX ? lo : leftSubTree.second.first;</span><br><span class="line">            up = rightSubTree.second.second == -INT_MAX ? up : rightSubTree.second.second;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// å½“å‰å­æ ‘å·²ç»ä¸èƒ½ç»„æˆæœç´¢æ ‘ï¼Œçˆ¶è¾ˆå­æ ‘ä¹Ÿä¸èƒ½äº†ï¼Œå°†ä¸Šä¸‹ç•Œè®¾ä¸ºæå°å€¼å’Œæå¤§å€¼</span></span><br><span class="line">            sum = <span class="number">0</span>;</span><br><span class="line">            lo = -INT_MAX;</span><br><span class="line">            up = INT_MAX;</span><br><span class="line">        &#125;</span><br><span class="line">        ans = max(ans, sum);</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">make_pair</span>(sum, <span class="built_in">make_pair</span>(lo, up));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">maxSumBST</span><span class="params">(TreeNode* root)</span> </span>&#123;</span><br><span class="line">        dfs(root);</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2020/11/12/OodhnsG568MqEFf.png" alt="" /></p><p>æ—¶é—´å¤æ‚åº¦<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><mi>n</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathit">n</span><span class="mclose">)</span></span></span></span>ï¼Œç©ºé—´å¤æ‚åº¦ä¸æ ˆç©ºé—´æœ‰å…³ï¼Œæœ€åä¸º<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><mi>n</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathit">n</span><span class="mclose">)</span></span></span></span></p>]]></content>
    
    
    <summary type="html">&lt;h3 id=&quot;é¢˜æ„&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#é¢˜æ„&quot;&gt;&lt;/a&gt; é¢˜æ„&lt;/h3&gt;
&lt;h4 id=&quot;è‹±æ–‡é¢˜æ„&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#è‹±æ–‡é¢˜æ„&quot;&gt;&lt;/a&gt; è‹±æ–‡é¢˜æ„&lt;/h4&gt;
&lt;p&gt;&lt;img src=&quot;https://i.loli.net/2020/11/12/ILVHJAq87OaivGx.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="leetcode" scheme="https://christopherrliu.github.io/categories/leetcode/"/>
    
    
    <category term="C++" scheme="https://christopherrliu.github.io/tags/C/"/>
    
    <category term="ç®—æ³•" scheme="https://christopherrliu.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
    <category term="é¢è¯•" scheme="https://christopherrliu.github.io/tags/%E9%9D%A2%E8%AF%95/"/>
    
    <category term="dfs" scheme="https://christopherrliu.github.io/tags/dfs/"/>
    
  </entry>
  
  <entry>
    <title>æ¯å¤©ä¸€é“leetcode-sort-array-by-parity-ii</title>
    <link href="https://christopherrliu.github.io/2020/11/12/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode-sort-array-by-parity-ii/"/>
    <id>https://christopherrliu.github.io/2020/11/12/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode-sort-array-by-parity-ii/</id>
    <published>2020-11-12T02:51:30.000Z</published>
    <updated>2020-11-12T02:55:50.337Z</updated>
    
    <content type="html"><![CDATA[<h3 id="é¢˜æ„"><a class="markdownIt-Anchor" href="#é¢˜æ„"></a> é¢˜æ„</h3><h4 id="è‹±æ–‡é¢˜æ„"><a class="markdownIt-Anchor" href="#è‹±æ–‡é¢˜æ„"></a> è‹±æ–‡é¢˜æ„</h4><p><img src="https://i.loli.net/2020/11/12/ZsJQEdWYMA5OVpr.png" alt="" /></p><a id="more"></a><h4 id="ä¸­æ–‡é¢˜æ„"><a class="markdownIt-Anchor" href="#ä¸­æ–‡é¢˜æ„"></a> ä¸­æ–‡é¢˜æ„</h4><p><img src="https://i.loli.net/2020/11/12/QWbKsT4mCLxBD3k.png" alt="" /></p><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>ç”¨ä¸¤ä¸ªæŒ‡é’ˆåˆ†åˆ«æŒ‡å‘å¥‡æ•°ä½ç½®å’Œå¶æ•°ä½ç½®ï¼Œåˆ†åˆ«æ‰¾åˆ°å¥‡æ•°ä½ç½®ä¸ä¸ºå¥‡æ•°å’Œå¶æ•°ä½ç½®ä¸ä¸ºå¶æ•°çš„ä½ç½®ï¼Œç„¶åäº¤æ¢ï¼Œå¦‚æœæ‰¾ä¸åˆ°è¿™æ ·çš„ä½ç½®å°±é€€å‡º</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; <span class="title">sortArrayByParityII</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; A)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(A.size() == <span class="number">0</span>) <span class="keyword">return</span> A;</span><br><span class="line">        <span class="keyword">int</span> left = <span class="number">0</span>, right = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span>(left &lt; A.size() &amp;&amp; right &lt; A.size()) &#123;</span><br><span class="line">            <span class="keyword">while</span>(left &lt; A.size() &amp;&amp; A[left] % <span class="number">2</span> == <span class="number">0</span>) left += <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">while</span>(right &lt; A.size() &amp;&amp; A[right] % <span class="number">2</span> == <span class="number">1</span>) right += <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">if</span>(left &lt; A.size() &amp;&amp; right &lt; A.size()) &#123;</span><br><span class="line">                swap(A[left], A[right]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> A;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2020/11/12/hoyvseTkWinrjMO.png" alt="" /></p><p>æ—¶é—´å¤æ‚åº¦<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><mi>n</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathit">n</span><span class="mclose">)</span></span></span></span>ï¼Œç©ºé—´å¤æ‚åº¦<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><mn>1</mn><mo>)</mo></mrow><annotation encoding="application/x-tex">O(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathrm">1</span><span class="mclose">)</span></span></span></span></p>]]></content>
    
    
    <summary type="html">&lt;h3 id=&quot;é¢˜æ„&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#é¢˜æ„&quot;&gt;&lt;/a&gt; é¢˜æ„&lt;/h3&gt;
&lt;h4 id=&quot;è‹±æ–‡é¢˜æ„&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#è‹±æ–‡é¢˜æ„&quot;&gt;&lt;/a&gt; è‹±æ–‡é¢˜æ„&lt;/h4&gt;
&lt;p&gt;&lt;img src=&quot;https://i.loli.net/2020/11/12/ZsJQEdWYMA5OVpr.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="leetcode" scheme="https://christopherrliu.github.io/categories/leetcode/"/>
    
    
    <category term="C++" scheme="https://christopherrliu.github.io/tags/C/"/>
    
    <category term="ç®—æ³•" scheme="https://christopherrliu.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
    <category term="é¢è¯•" scheme="https://christopherrliu.github.io/tags/%E9%9D%A2%E8%AF%95/"/>
    
    <category term="åŒæŒ‡é’ˆ" scheme="https://christopherrliu.github.io/tags/%E5%8F%8C%E6%8C%87%E9%92%88/"/>
    
  </entry>
  
  <entry>
    <title>æ¯å¤©ä¸€é“leetcode-find-the-winner-of-an-array-game</title>
    <link href="https://christopherrliu.github.io/2020/11/11/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode-find-the-winner-of-an-array-game/"/>
    <id>https://christopherrliu.github.io/2020/11/11/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode-find-the-winner-of-an-array-game/</id>
    <published>2020-11-11T12:44:45.000Z</published>
    <updated>2020-11-12T02:52:25.097Z</updated>
    
    <content type="html"><![CDATA[<h3 id="é¢˜æ„"><a class="markdownIt-Anchor" href="#é¢˜æ„"></a> é¢˜æ„</h3><h4 id="è‹±æ–‡é¢˜æ„"><a class="markdownIt-Anchor" href="#è‹±æ–‡é¢˜æ„"></a> è‹±æ–‡é¢˜æ„</h4><p><img src="https://i.loli.net/2020/11/11/IyMU6FAKYrCmNZD.png" alt="" /></p><a id="more"></a><h4 id="ä¸­æ–‡é¢˜æ„"><a class="markdownIt-Anchor" href="#ä¸­æ–‡é¢˜æ„"></a> ä¸­æ–‡é¢˜æ„</h4><p><img src="https://i.loli.net/2020/11/11/3OmYJ81cRk6FPzq.png" alt="" /></p><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><h4 id="æš´åŠ›"><a class="markdownIt-Anchor" href="#æš´åŠ›"></a> æš´åŠ›âŒ</h4><p>çœ‹åˆ°é¢˜ç›®ï¼Œ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>k</mi><mo>â‰¥</mo><mi>n</mi><mo>âˆ’</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">k \ge n - 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.83041em;vertical-align:-0.13597em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mrel">â‰¥</span><span class="mord mathit">n</span><span class="mbin">âˆ’</span><span class="mord mathrm">1</span></span></span></span>çš„æ—¶å€™å–æœ€å¤§å€¼ï¼Œé‚£ä¹ˆ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.69444em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.03148em;">k</span></span></span></span>çš„èŒƒå›´ä¸æ•°ç»„é•¿åº¦ä¸€è‡´ï¼Œç›´æ¥æš´åŠ›ï¼</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">getWinner</span>(<span class="params">self, arr: List[int], k: int</span>) -&gt; int:</span></span><br><span class="line">        n = len(arr)</span><br><span class="line">        first, win_number = arr[<span class="number">0</span>], <span class="number">0</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> k &gt;= n :</span><br><span class="line">            <span class="keyword">return</span> max(arr)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> <span class="literal">True</span> :</span><br><span class="line">            first, second, *rest = arr</span><br><span class="line">            <span class="keyword">if</span> first &lt; second :</span><br><span class="line">                <span class="keyword">if</span> win_number == k :</span><br><span class="line">                    <span class="keyword">break</span></span><br><span class="line">                win_number = <span class="number">1</span></span><br><span class="line">                arr = [second] + rest + [first]</span><br><span class="line"></span><br><span class="line">            <span class="keyword">else</span> :</span><br><span class="line">                win_number += <span class="number">1</span></span><br><span class="line">                <span class="keyword">if</span> win_number == k :</span><br><span class="line">                    <span class="keyword">break</span></span><br><span class="line">                arr[<span class="number">1</span>: ] = rest + [second]</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> first</span><br></pre></td></tr></table></figure><p>æœæ–­è¶…æ—¶</p><p><img src="https://i.loli.net/2020/11/11/5aisAVuEZLWSwX4.png" alt="" /></p><p><s>æœç„¶ä¸­ç­‰é¢˜ç›®ä¸ä¼šè¿™ä¹ˆç®€å•</s></p><h4 id="ä¼˜åŒ–"><a class="markdownIt-Anchor" href="#ä¼˜åŒ–"></a> ä¼˜åŒ–ğŸ”‘</h4><p>è€ƒè™‘å¦‚ä½•ä¼˜åŒ–ï¼Œè§‚å¯Ÿåˆ°è¿™ä¸ªè¿‡ç¨‹ç±»ä¼¼äºä¸€ä¸ªå†’æ³¡çš„è¿‡ç¨‹ï¼Œæ‰€ä»¥æˆ‘ä»¬ä»å¤´éå†ï¼Œè®°å½•æ¯ä¸ªå…ƒç´ è·èƒœçš„æ¬¡æ•°ï¼Œé‡åˆ°æœ€å¤§å…ƒç´ å°±ç›´æ¥é€€å‡ºï¼›å¦å¤–å»é™¤ç§»åŠ¨æ•°ç»„çš„è¿‡ç¨‹ï¼Œå‡å°‘æ—¶é—´æ¶ˆè€—</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">getWinner</span>(<span class="params">self, arr: List[int], k: int</span>) -&gt; int:</span></span><br><span class="line">        n = len(arr)</span><br><span class="line">        win_number = <span class="number">0</span></span><br><span class="line">        max_element = max(arr)</span><br><span class="line">        first, win_number = arr[<span class="number">0</span>], <span class="number">0</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> k &gt;= n :</span><br><span class="line">            <span class="keyword">return</span> max_element</span><br><span class="line"></span><br><span class="line">        base = arr[<span class="number">0</span>]</span><br><span class="line">        <span class="keyword">for</span> element <span class="keyword">in</span> arr[<span class="number">1</span>:] :</span><br><span class="line">            <span class="keyword">if</span> element == max_element :</span><br><span class="line">                <span class="keyword">return</span> max_element</span><br><span class="line">            <span class="keyword">if</span> element &lt; base :</span><br><span class="line">                win_number += <span class="number">1</span></span><br><span class="line">                <span class="keyword">if</span> win_number == k :</span><br><span class="line">                    <span class="keyword">return</span> base</span><br><span class="line">                </span><br><span class="line">            <span class="keyword">else</span> :</span><br><span class="line">                win_number = <span class="number">1</span></span><br><span class="line">                base = element</span><br><span class="line">                <span class="keyword">if</span> win_number == k :</span><br><span class="line">                    <span class="keyword">return</span> base</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> base</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2020/11/11/qD1x2pjvZToMAYJ.png" alt="" /></p><p>æ—¶é—´å¤æ‚åº¦<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><mi>n</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathit">n</span><span class="mclose">)</span></span></span></span>ï¼Œç©ºé—´å¤æ‚åº¦<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><mn>1</mn><mo>)</mo></mrow><annotation encoding="application/x-tex">O(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathrm">1</span><span class="mclose">)</span></span></span></span></p>]]></content>
    
    
    <summary type="html">&lt;h3 id=&quot;é¢˜æ„&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#é¢˜æ„&quot;&gt;&lt;/a&gt; é¢˜æ„&lt;/h3&gt;
&lt;h4 id=&quot;è‹±æ–‡é¢˜æ„&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#è‹±æ–‡é¢˜æ„&quot;&gt;&lt;/a&gt; è‹±æ–‡é¢˜æ„&lt;/h4&gt;
&lt;p&gt;&lt;img src=&quot;https://i.loli.net/2020/11/11/IyMU6FAKYrCmNZD.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="leetcode" scheme="https://christopherrliu.github.io/categories/leetcode/"/>
    
    
    <category term="ç®—æ³•" scheme="https://christopherrliu.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
    <category term="é¢è¯•" scheme="https://christopherrliu.github.io/tags/%E9%9D%A2%E8%AF%95/"/>
    
    <category term="python" scheme="https://christopherrliu.github.io/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>è®ºæ–‡é˜…è¯»-Leveraging Pre-trained Checkpoints for Sequence Generation Tasks</title>
    <link href="https://christopherrliu.github.io/2020/11/11/%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB/%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB-Leveraging-Pre-trained-Checkpoints-for-Sequence-Generation-Tasks/"/>
    <id>https://christopherrliu.github.io/2020/11/11/%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB/%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB-Leveraging-Pre-trained-Checkpoints-for-Sequence-Generation-Tasks/</id>
    <published>2020-11-11T07:39:41.000Z</published>
    <updated>2020-11-13T06:03:59.427Z</updated>
    
    <content type="html"><![CDATA[<h2 id="leveraging-pre-trained-checkpoints-for-sequence-generation-tasks"><a class="markdownIt-Anchor" href="#leveraging-pre-trained-checkpoints-for-sequence-generation-tasks"></a> Leveraging Pre-trained Checkpoints for Sequence Generation Tasks</h2><p>è¿™ç¯‡æ–‡ç« è®¨è®ºäº†å¦‚ä½•å°†é¢„è®­ç»ƒå‚æ•°åº”ç”¨äºæ–‡æœ¬åºåˆ—ç”Ÿæˆï¼Œç»è¿‡å¤§é‡å®éªŒå‘ç°encoderå’ŒdecoderåŠ è½½BERTå’ŒRoBERTaå‚æ•°æ¨¡å‹æ•ˆæœæœ€å¥½</p><p><img src="https://i.loli.net/2020/11/13/Wft2IMQqlu4KaRh.png" alt="" /></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;leveraging-pre-trained-checkpoints-for-sequence-generation-tasks&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#leveraging-pre-trained-checkpo</summary>
      
    
    
    
    <category term="è®ºæ–‡é˜…è¯»" scheme="https://christopherrliu.github.io/categories/%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB/"/>
    
    
    <category term="nlp" scheme="https://christopherrliu.github.io/tags/nlp/"/>
    
    <category term="sequence generation" scheme="https://christopherrliu.github.io/tags/sequence-generation/"/>
    
    <category term="è¯­è¨€æ¨¡å‹" scheme="https://christopherrliu.github.io/tags/%E8%AF%AD%E8%A8%80%E6%A8%A1%E5%9E%8B/"/>
    
    <category term="BERT" scheme="https://christopherrliu.github.io/tags/BERT/"/>
    
    <category term="GPT-2" scheme="https://christopherrliu.github.io/tags/GPT-2/"/>
    
  </entry>
  
  <entry>
    <title>æ¯å¤©ä¸€é“leetcode-longest-valid-parentheses</title>
    <link href="https://christopherrliu.github.io/2020/11/11/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode-longest-valid-parentheses/"/>
    <id>https://christopherrliu.github.io/2020/11/11/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode-longest-valid-parentheses/</id>
    <published>2020-11-11T06:35:54.000Z</published>
    <updated>2020-11-11T07:32:39.983Z</updated>
    
    <content type="html"><![CDATA[<h3 id="é¢˜æ„"><a class="markdownIt-Anchor" href="#é¢˜æ„"></a> é¢˜æ„</h3><h4 id="è‹±æ–‡é¢˜æ„"><a class="markdownIt-Anchor" href="#è‹±æ–‡é¢˜æ„"></a> è‹±æ–‡é¢˜æ„</h4><p><img src="https://i.loli.net/2020/11/11/nUAZxGVpbtCPT4q.png" alt="" /></p><a id="more"></a><h4 id="ä¸­æ–‡é¢˜æ„"><a class="markdownIt-Anchor" href="#ä¸­æ–‡é¢˜æ„"></a> ä¸­æ–‡é¢˜æ„</h4><p><img src="https://i.loli.net/2020/11/11/l8brteR6kxDfUTv.png" alt="" /></p><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><h4 id="æ ˆ"><a class="markdownIt-Anchor" href="#æ ˆ"></a> æ ˆ</h4><p>é¦–å…ˆç”¨ä¸€ä¸ªæ ˆæ‰¾å‡ºæ‰€æœ‰åˆæ³•çš„æ‹¬å·åºåˆ—ï¼Œ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>b</mi><mi>r</mi><mi>a</mi><mi>c</mi><mi>k</mi><mi>e</mi><mi>t</mi><mi>S</mi><mi>e</mi><mi>q</mi><mi>u</mi><mi>e</mi><mi>n</mi><mi>c</mi><mi>e</mi><mi>L</mi><mi>e</mi><mi>n</mi><mi>g</mi><mi>t</mi><mi>h</mi><mo>[</mo><mi>i</mi><mo>]</mo></mrow><annotation encoding="application/x-tex">bracketSequenceLength[i]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">b</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">a</span><span class="mord mathit">c</span><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mord mathit">e</span><span class="mord mathit">t</span><span class="mord mathit" style="margin-right:0.05764em;">S</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.03588em;">q</span><span class="mord mathit">u</span><span class="mord mathit">e</span><span class="mord mathit">n</span><span class="mord mathit">c</span><span class="mord mathit">e</span><span class="mord mathit">L</span><span class="mord mathit">e</span><span class="mord mathit">n</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord mathit">t</span><span class="mord mathit">h</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mclose">]</span></span></span></span>è¡¨ç¤ºä»¥<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.65952em;"></span><span class="strut bottom" style="height:0.65952em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">i</span></span></span></span>ç»“å°¾çš„åˆæ³•åºåˆ—é•¿åº¦ï¼Œç„¶åéå†è¿™ä¸ªæ•°ç»„ï¼Œè‹¥<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>b</mi><mi>r</mi><mi>a</mi><mi>c</mi><mi>k</mi><mi>e</mi><mi>t</mi><mi>S</mi><mi>e</mi><mi>q</mi><mi>u</mi><mi>e</mi><mi>n</mi><mi>c</mi><mi>e</mi><mi>L</mi><mi>e</mi><mi>n</mi><mi>g</mi><mi>t</mi><mi>h</mi><mo>[</mo><mi>i</mi><mo>âˆ’</mo><mi>b</mi><mi>r</mi><mi>a</mi><mi>c</mi><mi>k</mi><mi>e</mi><mi>t</mi><mi>S</mi><mi>e</mi><mi>q</mi><mi>u</mi><mi>e</mi><mi>n</mi><mi>c</mi><mi>e</mi><mi>L</mi><mi>e</mi><mi>n</mi><mi>g</mi><mi>t</mi><mi>h</mi><mo>]</mo><mo>â‰ </mo><mn>0</mn></mrow><annotation encoding="application/x-tex">bracketSequenceLength[i - bracketSequenceLength] \ne 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">b</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">a</span><span class="mord mathit">c</span><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mord mathit">e</span><span class="mord mathit">t</span><span class="mord mathit" style="margin-right:0.05764em;">S</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.03588em;">q</span><span class="mord mathit">u</span><span class="mord mathit">e</span><span class="mord mathit">n</span><span class="mord mathit">c</span><span class="mord mathit">e</span><span class="mord mathit">L</span><span class="mord mathit">e</span><span class="mord mathit">n</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord mathit">t</span><span class="mord mathit">h</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mbin">âˆ’</span><span class="mord mathit">b</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">a</span><span class="mord mathit">c</span><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mord mathit">e</span><span class="mord mathit">t</span><span class="mord mathit" style="margin-right:0.05764em;">S</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.03588em;">q</span><span class="mord mathit">u</span><span class="mord mathit">e</span><span class="mord mathit">n</span><span class="mord mathit">c</span><span class="mord mathit">e</span><span class="mord mathit">L</span><span class="mord mathit">e</span><span class="mord mathit">n</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord mathit">t</span><span class="mord mathit">h</span><span class="mclose">]</span><span class="mrel">â‰ </span><span class="mord mathrm">0</span></span></span></span>ï¼Œè¯´æ˜æ‹¬å·åºåˆ—å¯ä»¥åˆå¹¶å°±æ›´æ–°<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>b</mi><mi>r</mi><mi>a</mi><mi>c</mi><mi>k</mi><mi>e</mi><mi>t</mi><mi>S</mi><mi>e</mi><mi>q</mi><mi>u</mi><mi>e</mi><mi>n</mi><mi>c</mi><mi>e</mi><mi>L</mi><mi>e</mi><mi>n</mi><mi>g</mi><mi>t</mi><mi>h</mi><mo>[</mo><mi>i</mi><mo>]</mo><mo>+</mo><mo>=</mo><mi>b</mi><mi>r</mi><mi>a</mi><mi>c</mi><mi>k</mi><mi>e</mi><mi>t</mi><mi>S</mi><mi>e</mi><mi>q</mi><mi>u</mi><mi>e</mi><mi>n</mi><mi>c</mi><mi>e</mi><mi>L</mi><mi>e</mi><mi>n</mi><mi>g</mi><mi>t</mi><mi>h</mi><mo>[</mo><mi>i</mi><mo>âˆ’</mo><mi>b</mi><mi>r</mi><mi>a</mi><mi>c</mi><mi>k</mi><mi>e</mi><mi>t</mi><mi>S</mi><mi>e</mi><mi>q</mi><mi>u</mi><mi>e</mi><mi>n</mi><mi>c</mi><mi>e</mi><mi>L</mi><mi>e</mi><mi>n</mi><mi>g</mi><mi>t</mi><mi>h</mi><mo>]</mo><mo>â‰ </mo><mn>0</mn></mrow><annotation encoding="application/x-tex">bracketSequenceLength[i] += bracketSequenceLength[i - bracketSequenceLength] \ne 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">b</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">a</span><span class="mord mathit">c</span><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mord mathit">e</span><span class="mord mathit">t</span><span class="mord mathit" style="margin-right:0.05764em;">S</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.03588em;">q</span><span class="mord mathit">u</span><span class="mord mathit">e</span><span class="mord mathit">n</span><span class="mord mathit">c</span><span class="mord mathit">e</span><span class="mord mathit">L</span><span class="mord mathit">e</span><span class="mord mathit">n</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord mathit">t</span><span class="mord mathit">h</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mclose">]</span><span class="mbin">+</span><span class="mrel">=</span><span class="mord mathit">b</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">a</span><span class="mord mathit">c</span><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mord mathit">e</span><span class="mord mathit">t</span><span class="mord mathit" style="margin-right:0.05764em;">S</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.03588em;">q</span><span class="mord mathit">u</span><span class="mord mathit">e</span><span class="mord mathit">n</span><span class="mord mathit">c</span><span class="mord mathit">e</span><span class="mord mathit">L</span><span class="mord mathit">e</span><span class="mord mathit">n</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord mathit">t</span><span class="mord mathit">h</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mbin">âˆ’</span><span class="mord mathit">b</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">a</span><span class="mord mathit">c</span><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mord mathit">e</span><span class="mord mathit">t</span><span class="mord mathit" style="margin-right:0.05764em;">S</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.03588em;">q</span><span class="mord mathit">u</span><span class="mord mathit">e</span><span class="mord mathit">n</span><span class="mord mathit">c</span><span class="mord mathit">e</span><span class="mord mathit">L</span><span class="mord mathit">e</span><span class="mord mathit">n</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord mathit">t</span><span class="mord mathit">h</span><span class="mclose">]</span><span class="mrel">â‰ </span><span class="mord mathrm">0</span></span></span></span>ï¼Œæœ€å¤§çš„<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>b</mi><mi>r</mi><mi>a</mi><mi>c</mi><mi>k</mi><mi>e</mi><mi>t</mi><mi>S</mi><mi>e</mi><mi>q</mi><mi>u</mi><mi>e</mi><mi>n</mi><mi>c</mi><mi>e</mi><mi>L</mi><mi>e</mi><mi>n</mi><mi>g</mi><mi>t</mi><mi>h</mi><mo>[</mo><mi>i</mi><mo>]</mo></mrow><annotation encoding="application/x-tex">bracketSequenceLength[i]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">b</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">a</span><span class="mord mathit">c</span><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mord mathit">e</span><span class="mord mathit">t</span><span class="mord mathit" style="margin-right:0.05764em;">S</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.03588em;">q</span><span class="mord mathit">u</span><span class="mord mathit">e</span><span class="mord mathit">n</span><span class="mord mathit">c</span><span class="mord mathit">e</span><span class="mord mathit">L</span><span class="mord mathit">e</span><span class="mord mathit">n</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord mathit">t</span><span class="mord mathit">h</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mclose">]</span></span></span></span>å°±æ˜¯ç­”æ¡ˆ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;string&#125;</span> <span class="variable">s</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;number&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> longestValidParentheses = <span class="function"><span class="keyword">function</span>(<span class="params">s</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> n = s.length;</span><br><span class="line">    <span class="keyword">let</span> ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">let</span> bracketSequenceLength = <span class="keyword">new</span> <span class="built_in">Array</span>(n + <span class="number">5</span>).fill(<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">let</span> stack = <span class="keyword">new</span> <span class="built_in">Array</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; s.length; ++i) &#123;</span><br><span class="line">        <span class="keyword">let</span> bracket = s.charAt(i);</span><br><span class="line">        <span class="keyword">if</span>(bracket === <span class="string">&#x27;(&#x27;</span>) &#123;</span><br><span class="line">            stack.push(i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">if</span>(stack.length) &#123;</span><br><span class="line">                <span class="keyword">let</span> top = stack.pop();</span><br><span class="line">                bracketSequenceLength[i + <span class="number">1</span>] = i - top + <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">2</span>; i &lt;= s.length; ++i) &#123;</span><br><span class="line">        bracketSequenceLength[i] += bracketSequenceLength[i - bracketSequenceLength[i]];</span><br><span class="line">        ans = <span class="built_in">Math</span>.max(ans, bracketSequenceLength[i]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2020/11/11/kQlOqCtgocdyN7L.png" alt="" /></p><p>æ—¶é—´å¤æ‚åº¦<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><mi>n</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathit">n</span><span class="mclose">)</span></span></span></span>ï¼Œç©ºé—´å¤æ‚åº¦<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><mi>n</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathit">n</span><span class="mclose">)</span></span></span></span></p><h4 id="åŠ¨æ€è§„åˆ’"><a class="markdownIt-Anchor" href="#åŠ¨æ€è§„åˆ’"></a> åŠ¨æ€è§„åˆ’</h4><p>ä»¥<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>d</mi><mi>p</mi><mo>[</mo><mi>i</mi><mo>]</mo></mrow><annotation encoding="application/x-tex">dp[i]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">d</span><span class="mord mathit">p</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mclose">]</span></span></span></span>è¡¨ç¤ºä»¥<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.65952em;"></span><span class="strut bottom" style="height:0.65952em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">i</span></span></span></span>ä¸ºç»“å°¾çš„æœ€é•¿æ‹¬å·åºåˆ—ï¼Œé‚£ä¹ˆæ˜¾ç„¶<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>d</mi><mi>p</mi><mo>[</mo><mi>i</mi><mo>]</mo><mo>=</mo><mn>0</mn><mo separator="true">,</mo><mi>s</mi><mo>[</mo><mi>i</mi><mo>]</mo><mo>=</mo><msup><mo>=</mo><mrow><mi mathvariant="normal">â€²</mi></mrow></msup><msup><mo>(</mo><mrow><mi mathvariant="normal">â€²</mi></mrow></msup></mrow><annotation encoding="application/x-tex">dp[i] = 0, s[i]==&#x27;(&#x27;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.751892em;"></span><span class="strut bottom" style="height:1.001892em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">d</span><span class="mord mathit">p</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mclose">]</span><span class="mrel">=</span><span class="mord mathrm">0</span><span class="mpunct">,</span><span class="mord mathit">s</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mclose">]</span><span class="mrel">=</span><span class="mrel"><span class="mrel">=</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen"><span class="mopen">(</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span>ï¼Œå†æ¥æ€è€ƒ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>d</mi><mi>p</mi><mo>[</mo><mi>i</mi><mo>âˆ’</mo><mn>1</mn><mo>]</mo></mrow><annotation encoding="application/x-tex">dp[i - 1]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">d</span><span class="mord mathit">p</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mbin">âˆ’</span><span class="mord mathrm">1</span><span class="mclose">]</span></span></span></span>åˆ°<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>d</mi><mi>p</mi><mo>[</mo><mi>i</mi><mo>]</mo></mrow><annotation encoding="application/x-tex">dp[i]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">d</span><span class="mord mathit">p</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mclose">]</span></span></span></span>çš„é€’æ¨å…³ç³»ï¼Œå› ä¸ºæ‹¬å·åºåˆ—æ€»æ˜¯æˆå¯¹å‡ºç°çš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦æŸ¥çœ‹<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mo>[</mo><mi>i</mi><mo>âˆ’</mo><mn>1</mn><mo>]</mo></mrow><annotation encoding="application/x-tex">s[i-1]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">s</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mbin">âˆ’</span><span class="mord mathrm">1</span><span class="mclose">]</span></span></span></span>çš„æƒ…å†µï¼Œå¦‚ä¸‹ï¼š</p><ul><li><p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mo>[</mo><mi>i</mi><mo>âˆ’</mo><mn>1</mn><mo>]</mo><mo>=</mo><msup><mo>=</mo><mrow><mi mathvariant="normal">â€²</mi></mrow></msup><msup><mo>)</mo><mrow><mi mathvariant="normal">â€²</mi></mrow></msup></mrow><annotation encoding="application/x-tex">s[i - 1] == &#x27;)&#x27;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.751892em;"></span><span class="strut bottom" style="height:1.001892em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">s</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mbin">âˆ’</span><span class="mord mathrm">1</span><span class="mclose">]</span><span class="mrel">=</span><span class="mrel"><span class="mrel">=</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose"><span class="mclose">)</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span>ï¼Œé‚£ä¹ˆ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mo>[</mo><mi>i</mi><mo>âˆ’</mo><mn>1</mn><mo>]</mo></mrow><annotation encoding="application/x-tex">s[i - 1]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">s</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mbin">âˆ’</span><span class="mord mathrm">1</span><span class="mclose">]</span></span></span></span>å’Œ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mo>[</mo><mi>i</mi><mo>]</mo></mrow><annotation encoding="application/x-tex">s[i]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">s</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mclose">]</span></span></span></span>ä¸èƒ½é…å¯¹ï¼Œæˆ‘ä»¬éœ€è¦æŸ¥çœ‹å‰é¢çš„åºåˆ—</p><p><img src="https://i.loli.net/2020/11/11/JfwWAuQHZyRvVq3.png" alt="" /></p><p>å¦‚å›¾æ‰€ç¤ºï¼Œè½¬ç§»å…¬å¼ä¸º<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>d</mi><mi>p</mi><mo>[</mo><mi>i</mi><mo>]</mo><mo>=</mo><mi>d</mi><mi>p</mi><mo>[</mo><mi>i</mi><mo>âˆ’</mo><mn>1</mn><mo>]</mo><mo>+</mo><mn>2</mn><mo>+</mo><mi>d</mi><mi>p</mi><mo>[</mo><mi>i</mi><mo>âˆ’</mo><mi>d</mi><mi>p</mi><mo>[</mo><mi>i</mi><mo>âˆ’</mo><mn>1</mn><mo>]</mo><mo>âˆ’</mo><mn>2</mn><mo>]</mo><mo>(</mo><mi>s</mi><mo>[</mo><mi>i</mi><mo>âˆ’</mo><mi>d</mi><mi>p</mi><mo>[</mo><mi>i</mi><mo>âˆ’</mo><mn>1</mn><mo>]</mo><mo>âˆ’</mo><mn>1</mn><mo>]</mo><mo>=</mo><msup><mo>=</mo><mrow><mi mathvariant="normal">â€²</mi></mrow></msup><msup><mo>(</mo><mrow><mi mathvariant="normal">â€²</mi></mrow></msup><mo>)</mo></mrow><annotation encoding="application/x-tex">dp[i] = dp[i - 1] + 2 + dp[i - dp[i - 1] - 2](s[i - dp[i - 1] - 1] == &#x27;(&#x27;)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.751892em;"></span><span class="strut bottom" style="height:1.001892em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">d</span><span class="mord mathit">p</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mclose">]</span><span class="mrel">=</span><span class="mord mathit">d</span><span class="mord mathit">p</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mbin">âˆ’</span><span class="mord mathrm">1</span><span class="mclose">]</span><span class="mbin">+</span><span class="mord mathrm">2</span><span class="mbin">+</span><span class="mord mathit">d</span><span class="mord mathit">p</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mbin">âˆ’</span><span class="mord mathit">d</span><span class="mord mathit">p</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mbin">âˆ’</span><span class="mord mathrm">1</span><span class="mclose">]</span><span class="mbin">âˆ’</span><span class="mord mathrm">2</span><span class="mclose">]</span><span class="mopen">(</span><span class="mord mathit">s</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mbin">âˆ’</span><span class="mord mathit">d</span><span class="mord mathit">p</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mbin">âˆ’</span><span class="mord mathrm">1</span><span class="mclose">]</span><span class="mbin">âˆ’</span><span class="mord mathrm">1</span><span class="mclose">]</span><span class="mrel">=</span><span class="mrel"><span class="mrel">=</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen"><span class="mopen">(</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span></p></li><li><p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mo>[</mo><mi>i</mi><mo>âˆ’</mo><mn>1</mn><mo>]</mo><mo>=</mo><msup><mo>=</mo><mrow><mi mathvariant="normal">â€²</mi></mrow></msup><msup><mo>(</mo><mrow><mi mathvariant="normal">â€²</mi></mrow></msup></mrow><annotation encoding="application/x-tex">s[i - 1] == &#x27;(&#x27;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.751892em;"></span><span class="strut bottom" style="height:1.001892em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">s</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mbin">âˆ’</span><span class="mord mathrm">1</span><span class="mclose">]</span><span class="mrel">=</span><span class="mrel"><span class="mrel">=</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen"><span class="mopen">(</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span>ï¼Œé‚£ä¹ˆ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mo>[</mo><mi>i</mi><mo>âˆ’</mo><mn>1</mn><mo>]</mo></mrow><annotation encoding="application/x-tex">s[i - 1]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">s</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mbin">âˆ’</span><span class="mord mathrm">1</span><span class="mclose">]</span></span></span></span>å’Œ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mo>[</mo><mi>i</mi><mo>]</mo></mrow><annotation encoding="application/x-tex">s[i]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">s</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mclose">]</span></span></span></span>å¯ä»¥é…å¯¹</p><p><img src="https://i.loli.net/2020/11/11/arnQIuyHp7WgVXh.png" alt="" /></p><p>å¦‚å›¾æ‰€ç¤ºï¼Œè½¬ç§»å…¬å¼ä¸º<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>d</mi><mi>p</mi><mo>[</mo><mi>i</mi><mo>]</mo><mo>=</mo><mi>d</mi><mi>p</mi><mo>[</mo><mi>i</mi><mo>âˆ’</mo><mn>2</mn><mo>]</mo><mo>+</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">dp[i] = dp[i - 2] + 2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">d</span><span class="mord mathit">p</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mclose">]</span><span class="mrel">=</span><span class="mord mathit">d</span><span class="mord mathit">p</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mbin">âˆ’</span><span class="mord mathrm">2</span><span class="mclose">]</span><span class="mbin">+</span><span class="mord mathrm">2</span></span></span></span></p></li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">longestValidParentheses</span><span class="params">(<span class="built_in">string</span> s)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = s.length();</span><br><span class="line">        <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">        <span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; <span class="title">dp</span><span class="params">(n + <span class="number">5</span>, <span class="number">0</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">2</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">            <span class="keyword">if</span>(s.at(i - <span class="number">1</span>) == <span class="string">&#x27;(&#x27;</span>) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="keyword">if</span>(s.at(i - <span class="number">2</span>) == <span class="string">&#x27;(&#x27;</span>) &#123;</span><br><span class="line">                dp[i] = dp[i - <span class="number">2</span>] + <span class="number">2</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(i - dp[i - <span class="number">1</span>] - <span class="number">2</span> &gt;= <span class="number">0</span> &amp;&amp; s.at(i - dp[i - <span class="number">1</span>] - <span class="number">2</span>) == <span class="string">&#x27;(&#x27;</span>)&#123;</span><br><span class="line">                dp[i] = dp[i - <span class="number">1</span>] + <span class="number">2</span> + dp[i - dp[i - <span class="number">1</span>] - <span class="number">2</span>];</span><br><span class="line">            &#125;</span><br><span class="line">            ans = max(ans, dp[i]);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2020/11/11/jmYaHM1Dc6XRAnW.png" alt="" /></p><p>æ—¶é—´å¤æ‚åº¦<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><mi>n</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathit">n</span><span class="mclose">)</span></span></span></span>ï¼Œç©ºé—´å¤æ‚åº¦<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><mi>n</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathit">n</span><span class="mclose">)</span></span></span></span></p><h4 id="éå†æ³•"><a class="markdownIt-Anchor" href="#éå†æ³•"></a> éå†æ³•</h4><p>è¿˜å¯ä»¥åˆ©ç”¨æ‹¬å·åºåˆ—çš„æ€§è´¨ï¼Œç”¨ä¸¤ä¸ªå˜é‡è®°å½•<code>(</code>å’Œ<code>)</code>çš„æ•°é‡ï¼Œä»å·¦å‘å³éå†æ—¶ä¸€æ—¦<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi><mi>u</mi><mi>m</mi><msup><mo>(</mo><mrow><mi mathvariant="normal">â€²</mi></mrow></msup><msup><mo>(</mo><mrow><mi mathvariant="normal">â€²</mi></mrow></msup><mo>)</mo><mo>=</mo><mo>=</mo><mi>n</mi><mi>u</mi><mi>m</mi><msup><mo>(</mo><mrow><mi mathvariant="normal">â€²</mi></mrow></msup><msup><mo>)</mo><mrow><mi mathvariant="normal">â€²</mi></mrow></msup><mo>)</mo></mrow><annotation encoding="application/x-tex">num(&#x27;(&#x27;) == num(&#x27;)&#x27;)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.751892em;"></span><span class="strut bottom" style="height:1.001892em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">n</span><span class="mord mathit">u</span><span class="mord mathit">m</span><span class="mopen"><span class="mopen">(</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen"><span class="mopen">(</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mrel">=</span><span class="mrel">=</span><span class="mord mathit">n</span><span class="mord mathit">u</span><span class="mord mathit">m</span><span class="mopen"><span class="mopen">(</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose"><span class="mclose">)</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span>æ—¶ï¼Œå°±æ›´æ–°ç­”æ¡ˆï¼Œä¸€æ—¦<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi><mi>u</mi><mi>m</mi><msup><mo>(</mo><mrow><mi mathvariant="normal">â€²</mi></mrow></msup><msup><mo>)</mo><mrow><mi mathvariant="normal">â€²</mi></mrow></msup><mo>)</mo><mo>&gt;</mo><mi>n</mi><mi>u</mi><mi>m</mi><msup><mo>(</mo><mrow><mi mathvariant="normal">â€²</mi></mrow></msup><msup><mo>(</mo><mrow><mi mathvariant="normal">â€²</mi></mrow></msup><mo>)</mo></mrow><annotation encoding="application/x-tex">num(&#x27;)&#x27;) &gt; num(&#x27;(&#x27;)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.751892em;"></span><span class="strut bottom" style="height:1.001892em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">n</span><span class="mord mathit">u</span><span class="mord mathit">m</span><span class="mopen"><span class="mopen">(</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose"><span class="mclose">)</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mrel">&gt;</span><span class="mord mathit">n</span><span class="mord mathit">u</span><span class="mord mathit">m</span><span class="mopen"><span class="mopen">(</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen"><span class="mopen">(</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span>ï¼Œå°±è¯´æ˜å‡ºç°äº†ä¸åˆæ³•çš„æ‹¬å·ï¼Œå°†ä¸¤ä¸ªå˜é‡æ¸…é›¶ï¼Œä»å³å‘å·¦éå†æ—¶å°±è¦åè¿‡æ¥</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">longestValidParentheses</span>(<span class="params">self, s: str</span>) -&gt; int:</span></span><br><span class="line">        n = len(s)</span><br><span class="line">        left, right, ans = <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(n) :</span><br><span class="line">            <span class="keyword">if</span> s[i] == <span class="string">&#x27;(&#x27;</span> :</span><br><span class="line">                left += <span class="number">1</span></span><br><span class="line">            <span class="keyword">else</span> :</span><br><span class="line">                right += <span class="number">1</span></span><br><span class="line">            <span class="keyword">if</span> left == right :</span><br><span class="line">                ans = max(ans, <span class="number">2</span> * right)</span><br><span class="line">            <span class="keyword">if</span> right &gt; left :</span><br><span class="line">                left, right = <span class="number">0</span>, <span class="number">0</span></span><br><span class="line"></span><br><span class="line">        left, right = <span class="number">0</span>, <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(n - <span class="number">1</span>, <span class="number">-1</span>, <span class="number">-1</span>) :</span><br><span class="line">            <span class="keyword">if</span> s[i] == <span class="string">&#x27;(&#x27;</span> :</span><br><span class="line">                left += <span class="number">1</span></span><br><span class="line">            <span class="keyword">else</span> :</span><br><span class="line">                right += <span class="number">1</span></span><br><span class="line">            <span class="keyword">if</span> left == right :</span><br><span class="line">                ans = max(ans, <span class="number">2</span> * right)</span><br><span class="line">            <span class="keyword">if</span> right &lt; left :</span><br><span class="line">                left, right = <span class="number">0</span>, <span class="number">0</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> ans</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2020/11/11/J3uAweEb5PFsxYG.png" alt="" /></p><p>æ—¶é—´å¤æ‚åº¦<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><mi>n</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathit">n</span><span class="mclose">)</span></span></span></span>ï¼Œç©ºé—´å¤æ‚åº¦<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><mn>1</mn><mo>)</mo></mrow><annotation encoding="application/x-tex">O(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathrm">1</span><span class="mclose">)</span></span></span></span></p>]]></content>
    
    
    <summary type="html">&lt;h3 id=&quot;é¢˜æ„&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#é¢˜æ„&quot;&gt;&lt;/a&gt; é¢˜æ„&lt;/h3&gt;
&lt;h4 id=&quot;è‹±æ–‡é¢˜æ„&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#è‹±æ–‡é¢˜æ„&quot;&gt;&lt;/a&gt; è‹±æ–‡é¢˜æ„&lt;/h4&gt;
&lt;p&gt;&lt;img src=&quot;https://i.loli.net/2020/11/11/nUAZxGVpbtCPT4q.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="leetcode" scheme="https://christopherrliu.github.io/categories/leetcode/"/>
    
    
    <category term="C++" scheme="https://christopherrliu.github.io/tags/C/"/>
    
    <category term="åŠ¨æ€è§„åˆ’" scheme="https://christopherrliu.github.io/tags/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/"/>
    
    <category term="ç®—æ³•" scheme="https://christopherrliu.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
    <category term="é¢è¯•" scheme="https://christopherrliu.github.io/tags/%E9%9D%A2%E8%AF%95/"/>
    
    <category term="javascript" scheme="https://christopherrliu.github.io/tags/javascript/"/>
    
    <category term="æ ˆ" scheme="https://christopherrliu.github.io/tags/%E6%A0%88/"/>
    
  </entry>
  
  <entry>
    <title>æ¯å¤©ä¸€é“leetcode-swap-adjacent-in-lr-string</title>
    <link href="https://christopherrliu.github.io/2020/11/11/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode-swap-adjacent-in-lr-string/"/>
    <id>https://christopherrliu.github.io/2020/11/11/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode-swap-adjacent-in-lr-string/</id>
    <published>2020-11-11T05:31:38.000Z</published>
    <updated>2020-11-11T05:43:05.370Z</updated>
    
    <content type="html"><![CDATA[<h3 id="é¢˜æ„"><a class="markdownIt-Anchor" href="#é¢˜æ„"></a> é¢˜æ„</h3><h4 id="è‹±æ–‡é¢˜æ„"><a class="markdownIt-Anchor" href="#è‹±æ–‡é¢˜æ„"></a> è‹±æ–‡é¢˜æ„</h4><p><img src="https://i.loli.net/2020/11/11/ApnceNIPKuaRo2t.png" alt="" /></p><a id="more"></a><h4 id="ä¸­æ–‡é¢˜æ„"><a class="markdownIt-Anchor" href="#ä¸­æ–‡é¢˜æ„"></a> ä¸­æ–‡é¢˜æ„</h4><p><img src="https://i.loli.net/2020/11/11/keRC5XQ9vWDqiVS.png" alt="" /></p><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>æ ¹æ®é¢˜æ„ä¸éš¾å¾—å‡ºä»¥ä¸‹çš„æ€§è´¨ï¼š</p><ul><li>Rå’ŒLçš„ç›¸å¯¹ä½ç½®ä¸ä¼šæ”¹å˜</li><li>åœ¨æ»¡è¶³å‰ä¸€æ¡çš„æƒ…å†µä¸‹ï¼ŒRåªèƒ½å‘å‘å³ç§»åŠ¨ï¼ŒLåªèƒ½å‘å·¦ç§»åŠ¨</li></ul><p>é‚£ä¹ˆæˆ‘ä»¬å°†startå’Œendçš„Rã€Læ‰¾å‡ºæ¥ï¼Œä¾æ¬¡åˆ¤æ–­æ˜¯å¦æ»¡è¶³ä¸Šè¿°æ¡ä»¶å³å¯</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;string&#125;</span> <span class="variable">start</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;string&#125;</span> <span class="variable">end</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;boolean&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> canTransform = <span class="function"><span class="keyword">function</span>(<span class="params">start, end</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> rex = <span class="regexp">/[RL]/g</span>;</span><br><span class="line">    <span class="keyword">let</span> startMatches = [...start.matchAll(rex)];</span><br><span class="line">    <span class="keyword">let</span> endMatched = [...end.matchAll(rex)];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(startMatches.length != endMatched.length) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; startMatches.length; ++i) &#123;</span><br><span class="line">        <span class="keyword">if</span>(startMatches[i][<span class="number">0</span>] != endMatched[i][<span class="number">0</span>]) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(startMatches[i][<span class="number">0</span>] == <span class="string">&#x27;R&#x27;</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span>(endMatched[i].index &lt; startMatches[i].index) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">if</span>(endMatched[i].index &gt; startMatches[i].index) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2020/11/11/lqv2CehPkofdBb7.png" alt="" /></p><p>æ—¶é—´å¤æ‚åº¦<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><mi>n</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathit">n</span><span class="mclose">)</span></span></span></span></p>]]></content>
    
    
    <summary type="html">&lt;h3 id=&quot;é¢˜æ„&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#é¢˜æ„&quot;&gt;&lt;/a&gt; é¢˜æ„&lt;/h3&gt;
&lt;h4 id=&quot;è‹±æ–‡é¢˜æ„&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#è‹±æ–‡é¢˜æ„&quot;&gt;&lt;/a&gt; è‹±æ–‡é¢˜æ„&lt;/h4&gt;
&lt;p&gt;&lt;img src=&quot;https://i.loli.net/2020/11/11/ApnceNIPKuaRo2t.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="leetcode" scheme="https://christopherrliu.github.io/categories/leetcode/"/>
    
    
    <category term="ç®—æ³•" scheme="https://christopherrliu.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
    <category term="é¢è¯•" scheme="https://christopherrliu.github.io/tags/%E9%9D%A2%E8%AF%95/"/>
    
    <category term="javascript" scheme="https://christopherrliu.github.io/tags/javascript/"/>
    
  </entry>
  
  <entry>
    <title>æ¯å¤©ä¸€é“leetcode-cat-and-mouse</title>
    <link href="https://christopherrliu.github.io/2020/11/11/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode-cat-and-mouse/"/>
    <id>https://christopherrliu.github.io/2020/11/11/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode-cat-and-mouse/</id>
    <published>2020-11-11T02:42:38.000Z</published>
    <updated>2020-11-11T12:10:39.999Z</updated>
    
    <content type="html"><![CDATA[<h3 id="é¢˜æ„"><a class="markdownIt-Anchor" href="#é¢˜æ„"></a> é¢˜æ„</h3><h4 id="è‹±æ–‡é¢˜æ„"><a class="markdownIt-Anchor" href="#è‹±æ–‡é¢˜æ„"></a> è‹±æ–‡é¢˜æ„</h4><p><img src="https://i.loli.net/2020/11/11/LRoIV8e1DGlzZ7r.png" alt="" /></p><a id="more"></a><h4 id="ä¸­æ–‡é¢˜æ„"><a class="markdownIt-Anchor" href="#ä¸­æ–‡é¢˜æ„"></a> ä¸­æ–‡é¢˜æ„</h4><p><img src="https://i.loli.net/2020/11/11/TzGV45AFRYwBj7I.png" alt="" /></p><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>è¿™æ˜¯ä¸€ä¸ªéå¸¸ç»å…¸çš„åšå¼ˆé—®é¢˜ï¼Œé¦–å…ˆç”¨<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mi>t</mi><mi>a</mi><mi>t</mi><mi>e</mi><mo>[</mo><mi>i</mi><mo>]</mo><mo>[</mo><mi>j</mi><mo>]</mo><mo>[</mo><mi>k</mi><mo>]</mo></mrow><annotation encoding="application/x-tex">state[i][j][k]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">s</span><span class="mord mathit">t</span><span class="mord mathit">a</span><span class="mord mathit">t</span><span class="mord mathit">e</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mclose">]</span></span></span></span>è¡¨ç¤ºè€é¼ åœ¨<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.65952em;"></span><span class="strut bottom" style="height:0.65952em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">i</span></span></span></span>ç‚¹ï¼ŒçŒ«åœ¨<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>j</mi></mrow><annotation encoding="application/x-tex">j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.65952em;"></span><span class="strut bottom" style="height:0.85396em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.05724em;">j</span></span></span></span>ç‚¹ï¼Œç°åœ¨èµ°äº†<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.69444em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.03148em;">k</span></span></span></span>æ­¥çš„çŠ¶æ€ï¼Œæ ¹æ®é¢˜æ„ä¸éš¾å¾—å‡ºï¼š</p><ul><li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mi>t</mi><mi>a</mi><mi>t</mi><mi>e</mi><mo>[</mo><mi>i</mi><mo>]</mo><mo>[</mo><mi>i</mi><mo>]</mo><mo>[</mo><mi>k</mi><mo>]</mo><mo>=</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">state[i][i][k] = 2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">s</span><span class="mord mathit">t</span><span class="mord mathit">a</span><span class="mord mathit">t</span><span class="mord mathit">e</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mclose">]</span><span class="mrel">=</span><span class="mord mathrm">2</span></span></span></span></li><li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mi>t</mi><mi>a</mi><mi>t</mi><mi>e</mi><mo>[</mo><mn>0</mn><mo>]</mo><mo>[</mo><mi>j</mi><mo>]</mo><mo>[</mo><mi>k</mi><mo>]</mo><mo>=</mo><mn>1</mn><mo>(</mo><mi>j</mi><mo>â‰ </mo><mn>0</mn><mo>)</mo></mrow><annotation encoding="application/x-tex">state[0][j][k] = 1(j \ne 0)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">s</span><span class="mord mathit">t</span><span class="mord mathit">a</span><span class="mord mathit">t</span><span class="mord mathit">e</span><span class="mopen">[</span><span class="mord mathrm">0</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mclose">]</span><span class="mrel">=</span><span class="mord mathrm">1</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mrel">â‰ </span><span class="mord mathrm">0</span><span class="mclose">)</span></span></span></span></li></ul><p>ç„¶åå°±kè¯¥è€ƒè™‘å¦‚ä½•è½¬ç§»çŠ¶æ€ï¼Œè¿™é‡Œåˆ†ä¸ºä¸¤ç§æ€è€ƒæ–¹å¼ï¼š</p><h5 id="top-down"><a class="markdownIt-Anchor" href="#top-down"></a> top down</h5><p>å³è‡ªé¡¶å‘ä¸‹çš„æ–¹å¼ï¼Œé‚£ä¹ˆåˆå§‹çŠ¶æ€æ˜¾ç„¶ä¸º<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mi>t</mi><mi>a</mi><mi>t</mi><mi>e</mi><mo>[</mo><mn>1</mn><mo>]</mo><mo>[</mo><mn>2</mn><mo>]</mo><mo>[</mo><mn>1</mn><mo>]</mo></mrow><annotation encoding="application/x-tex">state[1][2][1]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">s</span><span class="mord mathit">t</span><span class="mord mathit">a</span><span class="mord mathit">t</span><span class="mord mathit">e</span><span class="mopen">[</span><span class="mord mathrm">1</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathrm">2</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathrm">1</span><span class="mclose">]</span></span></span></span>ï¼Œå¯¹äºæŸä¸ªçŠ¶æ€<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mi>t</mi><mi>a</mi><mi>t</mi><mi>e</mi><mo>[</mo><mi>i</mi><mo>]</mo><mo>[</mo><mi>j</mi><mo>]</mo><mo>[</mo><mi>k</mi><mo>]</mo></mrow><annotation encoding="application/x-tex">state[i][j][k]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">s</span><span class="mord mathit">t</span><span class="mord mathit">a</span><span class="mord mathit">t</span><span class="mord mathit">e</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mclose">]</span></span></span></span>ï¼Œåˆ†ä¸ºå‡ ç§æƒ…å†µï¼š</p><ul><li><p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>k</mi><mo>&gt;</mo><mn>2</mn><mi>n</mi></mrow><annotation encoding="application/x-tex">k &gt; 2n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.73354em;vertical-align:-0.0391em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mrel">&gt;</span><span class="mord mathrm">2</span><span class="mord mathit">n</span></span></span></span>ï¼Œå› ä¸ºçŠ¶æ€çŒ«å’Œè€é¼ èµ°çš„æ­¥æ•°æœ€å¤šåªæœ‰<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>2</mn><mi>n</mi></mrow><annotation encoding="application/x-tex">2n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.64444em;"></span><span class="strut bottom" style="height:0.64444em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathrm">2</span><span class="mord mathit">n</span></span></span></span>æ­¥ï¼Œä¸€æ—¦è¶…å‡ºå°±æ˜¯å¹³å±€äº†</p></li><li><p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>i</mi><mo>=</mo><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">i == 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.65952em;"></span><span class="strut bottom" style="height:0.65952em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">i</span><span class="mrel">=</span><span class="mrel">=</span><span class="mord mathrm">0</span></span></span></span>ï¼Œè€é¼ è·èƒœï¼Œè¿”å›1</p></li><li><p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>i</mi><mo>=</mo><mo>=</mo><mi>j</mi></mrow><annotation encoding="application/x-tex">i == j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.65952em;"></span><span class="strut bottom" style="height:0.85396em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord mathit">i</span><span class="mrel">=</span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.05724em;">j</span></span></span></span>ï¼ŒçŒ«è·èƒœï¼Œè¿”å›2</p></li><li><p>è½®åˆ°è€é¼ èµ°ï¼Œéå†æ‰€æœ‰å­çŠ¶æ€ï¼š</p><ul><li>æœ‰å­çŠ¶æ€è¿”å›1ï¼Œå› ä¸ºæ˜¯ä»¥æœ€ä½³çŠ¶æ€å‚ä¸æ¸¸æˆï¼Œæ‰€ä»¥å½“å‰çŠ¶æ€ä¹Ÿæ˜¯å¿…èƒœæ€ï¼Œè¿”å›1</li><li>æ²¡æœ‰è¿”å›1çš„å­çŠ¶æ€ï¼Œä½†æ˜¯æœ‰è¿”å›0çš„å­çŠ¶æ€ï¼Œæ—¢ç„¶èµ¢ä¸äº†äº†ï¼Œåªèƒ½ä¿å¹³å±€ï¼Œè¿”å›0</li><li>æ‰€æœ‰çŠ¶æ€å…¨è¿”å›2ï¼Œå¿…è¾“ï¼Œè¿”å›2</li></ul></li><li><p>è½®åˆ°çŒ«èµ°ï¼Œæƒ…å†µä¸è€é¼ ç›¸ä¼¼</p></li></ul><p>åˆ†ææ¸…æ¥šä¹‹åï¼Œä¸éš¾å†™å‡ºè®°å¿†åŒ–æœç´¢çš„ä»£ç ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;number[][]&#125;</span> <span class="variable">graph</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;number&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> catMouseGame = <span class="function"><span class="keyword">function</span>(<span class="params">graph</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> n = graph.length;</span><br><span class="line">    <span class="keyword">let</span> state = <span class="keyword">new</span> <span class="built_in">Array</span>(n + <span class="number">1</span>)</span><br><span class="line">        .fill(<span class="number">0</span>)</span><br><span class="line">        .map(<span class="function"><span class="params">_</span> =&gt;</span> </span><br><span class="line">            <span class="keyword">new</span> <span class="built_in">Array</span>(n + <span class="number">1</span>)</span><br><span class="line">            .fill(<span class="number">0</span>)</span><br><span class="line">            .map(<span class="function"><span class="params">_</span> =&gt;</span> </span><br><span class="line">                <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">2</span> * n + <span class="number">1</span>)</span><br><span class="line">                .fill(<span class="number">-1</span>)));</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">const</span> stimulate = <span class="function">(<span class="params">mouseLocation, catLocation, steps</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(steps &gt; <span class="number">2</span> * n) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(state[mouseLocation][catLocation][steps] != <span class="number">-1</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> state[mouseLocation][catLocation][steps];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(mouseLocation === <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> state[mouseLocation][catLocation][steps] = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(mouseLocation === catLocation) &#123;</span><br><span class="line">            <span class="keyword">return</span> state[mouseLocation][catLocation][steps] = <span class="number">2</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(steps % <span class="number">2</span> === <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">let</span> res = <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">let</span> nextMouseLocation <span class="keyword">of</span> graph[mouseLocation]) &#123;</span><br><span class="line">                <span class="keyword">let</span> curRes = stimulate(nextMouseLocation, catLocation, steps + <span class="number">1</span>);</span><br><span class="line">                <span class="keyword">if</span>(curRes === <span class="number">1</span>) &#123;</span><br><span class="line">                    <span class="keyword">return</span> state[mouseLocation][catLocation][steps] = <span class="number">1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                res = <span class="built_in">Math</span>.min(res, curRes);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> state[mouseLocation][catLocation][steps] = res;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">let</span> res = <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">let</span> nextCatLocation <span class="keyword">of</span> graph[catLocation]) &#123;</span><br><span class="line">                <span class="keyword">if</span>(nextCatLocation === <span class="number">0</span>) &#123;</span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">let</span> curRes = stimulate(mouseLocation, nextCatLocation, steps + <span class="number">1</span>);</span><br><span class="line">                <span class="keyword">if</span>(curRes === <span class="number">2</span>) &#123;</span><br><span class="line">                    <span class="keyword">return</span> state[mouseLocation][catLocation][steps] = <span class="number">2</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                res = <span class="built_in">Math</span>.min(res, curRes);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> state[mouseLocation][catLocation][steps] = res;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> stimulate(<span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2020/11/11/Otr3uYQ8o7TJ5f4.png" alt="" /></p><p>æ—¶é—´å¤æ‚åº¦<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><msup><mi>n</mi><mn>3</mn></msup><mo>)</mo></mrow><annotation encoding="application/x-tex">O(n^3)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8141079999999999em;"></span><span class="strut bottom" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">n</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathrm">3</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span>ï¼Œç©ºé—´å¤æ‚åº¦<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><msup><mi>n</mi><mn>3</mn></msup><mo>)</mo></mrow><annotation encoding="application/x-tex">O(n^3)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8141079999999999em;"></span><span class="strut bottom" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">n</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathrm">3</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span></p><h4 id="bottom-up"><a class="markdownIt-Anchor" href="#bottom-up"></a> bottom up</h4><p>å³è‡ªåº•å‘ä¸Šçš„æ–¹æ³•ï¼Œå¯¹äºæŸä¸ªçŠ¶æ€<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mi>t</mi><mi>a</mi><mi>t</mi><mi>e</mi><mo>[</mo><mi>i</mi><mo>]</mo><mo>[</mo><mi>j</mi><mo>]</mo><mo>[</mo><mi>k</mi><mo>]</mo></mrow><annotation encoding="application/x-tex">state[i][j][k]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">s</span><span class="mord mathit">t</span><span class="mord mathit">a</span><span class="mord mathit">t</span><span class="mord mathit">e</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mclose">]</span></span></span></span>ï¼Œå®ƒçš„å‰ä¸€ä¸ªçŠ¶æ€<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mi>t</mi><mi>a</mi><mi>t</mi><mi>e</mi><mo>[</mo><mi>p</mi><mi>i</mi><mo>]</mo><mo>[</mo><mi>p</mi><mi>j</mi><mo>]</mo><mo>[</mo><mi>p</mi><mi>k</mi><mo>]</mo></mrow><annotation encoding="application/x-tex">state[pi][pj][pk]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">s</span><span class="mord mathit">t</span><span class="mord mathit">a</span><span class="mord mathit">t</span><span class="mord mathit">e</span><span class="mopen">[</span><span class="mord mathit">p</span><span class="mord mathit">i</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathit">p</span><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathit">p</span><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mclose">]</span></span></span></span>å¯ç”±å½“å‰çŠ¶æ€æ¨åˆ°å¾—æ¥ï¼š</p><ul><li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mi>t</mi><mi>a</mi><mi>t</mi><mi>e</mi><mo>[</mo><mi>i</mi><mo>]</mo><mo>[</mo><mi>j</mi><mo>]</mo><mo>[</mo><mi>k</mi><mo>]</mo></mrow><annotation encoding="application/x-tex">state[i][j][k]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">s</span><span class="mord mathit">t</span><span class="mord mathit">a</span><span class="mord mathit">t</span><span class="mord mathit">e</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mclose">]</span></span></span></span>å¯¹<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mi>t</mi><mi>a</mi><mi>t</mi><mi>e</mi><mo>[</mo><mi>p</mi><mi>i</mi><mo>]</mo><mo>[</mo><mi>p</mi><mi>j</mi><mo>]</mo><mo>[</mo><mi>p</mi><mi>k</mi><mo>]</mo></mrow><annotation encoding="application/x-tex">state[pi][pj][pk]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">s</span><span class="mord mathit">t</span><span class="mord mathit">a</span><span class="mord mathit">t</span><span class="mord mathit">e</span><span class="mopen">[</span><span class="mord mathit">p</span><span class="mord mathit">i</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathit">p</span><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathit">p</span><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mclose">]</span></span></span></span>æ¥è¯´æ˜¯èƒœæ€ï¼Œé‚£ä¹ˆ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mi>t</mi><mi>a</mi><mi>t</mi><mi>e</mi><mo>[</mo><mi>p</mi><mi>i</mi><mo>]</mo><mo>[</mo><mi>p</mi><mi>j</mi><mo>]</mo><mo>[</mo><mi>p</mi><mi>k</mi><mo>]</mo></mrow><annotation encoding="application/x-tex">state[pi][pj][pk]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">s</span><span class="mord mathit">t</span><span class="mord mathit">a</span><span class="mord mathit">t</span><span class="mord mathit">e</span><span class="mopen">[</span><span class="mord mathit">p</span><span class="mord mathit">i</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathit">p</span><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathit">p</span><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mclose">]</span></span></span></span>ä¹Ÿæ˜¯èƒœæ€</li><li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mi>t</mi><mi>a</mi><mi>t</mi><mi>e</mi><mo>[</mo><mi>i</mi><mo>]</mo><mo>[</mo><mi>j</mi><mo>]</mo><mo>[</mo><mi>k</mi><mo>]</mo></mrow><annotation encoding="application/x-tex">state[i][j][k]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">s</span><span class="mord mathit">t</span><span class="mord mathit">a</span><span class="mord mathit">t</span><span class="mord mathit">e</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mclose">]</span></span></span></span>å¯¹<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mi>t</mi><mi>a</mi><mi>t</mi><mi>e</mi><mo>[</mo><mi>p</mi><mi>i</mi><mo>]</mo><mo>[</mo><mi>p</mi><mi>j</mi><mo>]</mo><mo>[</mo><mi>p</mi><mi>k</mi><mo>]</mo></mrow><annotation encoding="application/x-tex">state[pi][pj][pk]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">s</span><span class="mord mathit">t</span><span class="mord mathit">a</span><span class="mord mathit">t</span><span class="mord mathit">e</span><span class="mopen">[</span><span class="mord mathit">p</span><span class="mord mathit">i</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathit">p</span><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathit">p</span><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mclose">]</span></span></span></span>æ¥è¯´æ˜¯è´Ÿæ€ï¼Œé‚£ä¹ˆåªæœ‰å½“<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mi>t</mi><mi>a</mi><mi>t</mi><mi>e</mi><mo>[</mo><mi>p</mi><mi>i</mi><mo>]</mo><mo>[</mo><mi>p</mi><mi>j</mi><mo>]</mo><mo>[</mo><mi>p</mi><mi>k</mi><mo>]</mo></mrow><annotation encoding="application/x-tex">state[pi][pj][pk]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">s</span><span class="mord mathit">t</span><span class="mord mathit">a</span><span class="mord mathit">t</span><span class="mord mathit">e</span><span class="mopen">[</span><span class="mord mathit">p</span><span class="mord mathit">i</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathit">p</span><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathit">p</span><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mclose">]</span></span></span></span>çš„æ‰€æœ‰åç»§çŠ¶æ€éƒ½ä¸ºè´Ÿæ€ï¼Œ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mi>t</mi><mi>a</mi><mi>t</mi><mi>e</mi><mo>[</mo><mi>p</mi><mi>i</mi><mo>]</mo><mo>[</mo><mi>p</mi><mi>j</mi><mo>]</mo><mo>[</mo><mi>p</mi><mi>k</mi><mo>]</mo></mrow><annotation encoding="application/x-tex">state[pi][pj][pk]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">s</span><span class="mord mathit">t</span><span class="mord mathit">a</span><span class="mord mathit">t</span><span class="mord mathit">e</span><span class="mopen">[</span><span class="mord mathit">p</span><span class="mord mathit">i</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathit">p</span><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathit">p</span><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mclose">]</span></span></span></span>æ‰ä¼šæ˜¯è´Ÿæ€ï¼Œå¦åˆ™å°±æ˜¯å¹³å±€ï¼Œæˆ‘ä»¬ç”¨ä¸€ä¸ªæ•°ç»„<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>d</mi><mi>e</mi><mi>g</mi><mi>r</mi><mi>e</mi><mi>e</mi></mrow><annotation encoding="application/x-tex">degree</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord mathit">d</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">e</span><span class="mord mathit">e</span></span></span></span>è®°å½•æŸä¸ªçŠ¶æ€çš„åç»§çŠ¶æ€æ•°ç›®ï¼Œæ¯æ¬¡é‡åˆ°è¿™ç§æƒ…å†µå°±é€’å‡ï¼Œ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>d</mi><mi>e</mi><mi>g</mi><mi>r</mi><mi>e</mi><mi>e</mi></mrow><annotation encoding="application/x-tex">degree</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord mathit">d</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">e</span><span class="mord mathit">e</span></span></span></span>ä¸º0ï¼Œå½“å‰çŠ¶æ€å°±æ˜¯è´Ÿæ€ã€‚</li></ul><p>æˆ‘ä»¬ç”¨ä¸€ä¸ªé˜Ÿåˆ—å­˜å‚¨æ‰€æœ‰çš„èƒœæ€å’Œè´Ÿæ€ï¼Œå–å‡ºé˜Ÿé¦–å…ƒç´ æ›´æ–°çˆ¶è¾ˆçŠ¶æ€ï¼Œè‹¥å¾—åˆ°æ–°çš„èƒœæ€å’Œè´Ÿæ€å°±å…¥é˜Ÿï¼Œè¿­ä»£å¤„ç†ç›´è‡³é˜Ÿåˆ—ä¸ºç©ºï¼›æ²¡æœ‰æ›´æ–°åˆ°çš„å°±æ˜¯å¹³å±€</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;string&#125;</span> <span class="variable">s</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;number&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> catMouseGame = <span class="function"><span class="keyword">function</span>(<span class="params">graph</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> n = graph.length;</span><br><span class="line">    <span class="keyword">let</span> ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">let</span> degree = <span class="keyword">new</span> <span class="built_in">Array</span>(n)</span><br><span class="line">        .fill(<span class="number">0</span>)</span><br><span class="line">        .map(<span class="function"><span class="params">_</span> =&gt;</span> <span class="keyword">new</span> <span class="built_in">Array</span>(n)</span><br><span class="line">            .fill(<span class="number">0</span>)</span><br><span class="line">            .map(<span class="function"><span class="params">_</span> =&gt;</span> </span><br><span class="line">                <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">2</span>)</span><br><span class="line">                .fill(<span class="number">0</span>)));</span><br><span class="line">    <span class="keyword">let</span> state = <span class="keyword">new</span> <span class="built_in">Array</span>(n)</span><br><span class="line">        .fill(<span class="number">0</span>)</span><br><span class="line">        .map(<span class="function"><span class="params">_</span> =&gt;</span> </span><br><span class="line">            <span class="keyword">new</span> <span class="built_in">Array</span>(n)</span><br><span class="line">            .fill(<span class="number">0</span>)</span><br><span class="line">            .map(<span class="function"><span class="params">_</span> =&gt;</span> </span><br><span class="line">                <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">2</span>)</span><br><span class="line">                .fill(<span class="number">0</span>)));</span><br><span class="line">    <span class="keyword">let</span> queue = <span class="keyword">new</span> <span class="built_in">Array</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; n; ++j) &#123;</span><br><span class="line">            degree[i][j][<span class="number">0</span>] = graph[i].length;</span><br><span class="line">            degree[i][j][<span class="number">1</span>] = graph[j].length;</span><br><span class="line">            <span class="keyword">if</span>(graph[j].indexOf(<span class="number">0</span>) != <span class="number">-1</span>) &#123;</span><br><span class="line">                degree[i][j][<span class="number">1</span>]--;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">let</span> step = <span class="number">0</span>; step &lt; <span class="number">2</span>; ++step) &#123;</span><br><span class="line">            state[<span class="number">0</span>][i][step] = <span class="number">1</span>;</span><br><span class="line">            queue.push([<span class="number">0</span>, i, step]);</span><br><span class="line">            <span class="keyword">if</span>(i &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                state[i][i][step] = <span class="number">2</span>;</span><br><span class="line">                queue.push([i, i, step]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(queue.length) &#123;</span><br><span class="line">        <span class="keyword">let</span> [mouse, cat, step] = queue.shift();</span><br><span class="line">        <span class="keyword">let</span> [preMouse, preCat, preStep] = [mouse, cat, (step - <span class="number">1</span> + <span class="number">2</span>) % <span class="number">2</span>];</span><br><span class="line">        <span class="keyword">let</span> [winState, loseState] = step === <span class="number">0</span> ? [<span class="number">2</span>, <span class="number">1</span>] : [<span class="number">1</span>, <span class="number">2</span>];</span><br><span class="line">        <span class="keyword">let</span> startPoint = step === <span class="number">0</span> ? cat : mouse;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">let</span> next <span class="keyword">of</span> graph[startPoint]) &#123;</span><br><span class="line">            step === <span class="number">0</span> ? preCat = next : preMouse = next; </span><br><span class="line">            <span class="keyword">if</span>(preCat == <span class="number">0</span> || state[preMouse][preCat][preStep] != <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(state[mouse][cat][step] === loseState) &#123;</span><br><span class="line">                degree[preMouse][preCat][preStep]--;</span><br><span class="line">                <span class="keyword">if</span>(degree[preMouse][preCat][preStep] === <span class="number">0</span>) &#123;</span><br><span class="line">                    state[preMouse][preCat][preStep] = loseState;</span><br><span class="line">                    queue.push([preMouse, preCat, preStep]);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="keyword">if</span>(preMouse == <span class="number">3</span> &amp;&amp; preCat == <span class="number">2</span>) <span class="built_in">console</span>.log(mouse, cat, step);</span><br><span class="line">                state[preMouse][preCat][preStep] = winState;</span><br><span class="line">                queue.push([preMouse, preCat, preStep]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> state[<span class="number">1</span>][<span class="number">2</span>][<span class="number">0</span>];</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2020/11/11/rdI2tojui36xNm9.png" alt="" /></p>]]></content>
    
    
    <summary type="html">&lt;h3 id=&quot;é¢˜æ„&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#é¢˜æ„&quot;&gt;&lt;/a&gt; é¢˜æ„&lt;/h3&gt;
&lt;h4 id=&quot;è‹±æ–‡é¢˜æ„&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#è‹±æ–‡é¢˜æ„&quot;&gt;&lt;/a&gt; è‹±æ–‡é¢˜æ„&lt;/h4&gt;
&lt;p&gt;&lt;img src=&quot;https://i.loli.net/2020/11/11/LRoIV8e1DGlzZ7r.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="leetcode" scheme="https://christopherrliu.github.io/categories/leetcode/"/>
    
    
    <category term="ç®—æ³•" scheme="https://christopherrliu.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
    <category term="é¢è¯•" scheme="https://christopherrliu.github.io/tags/%E9%9D%A2%E8%AF%95/"/>
    
    <category term="javascript" scheme="https://christopherrliu.github.io/tags/javascript/"/>
    
    <category term="è®°å¿†åŒ–æœç´¢" scheme="https://christopherrliu.github.io/tags/%E8%AE%B0%E5%BF%86%E5%8C%96%E6%90%9C%E7%B4%A2/"/>
    
    <category term="minmax" scheme="https://christopherrliu.github.io/tags/minmax/"/>
    
  </entry>
  
  <entry>
    <title>æ¯å¤©ä¸€é“leetcode-super-washing-machines</title>
    <link href="https://christopherrliu.github.io/2020/11/10/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode-super-washing-machines/"/>
    <id>https://christopherrliu.github.io/2020/11/10/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode-super-washing-machines/</id>
    <published>2020-11-10T12:45:59.000Z</published>
    <updated>2020-11-10T13:08:57.583Z</updated>
    
    <content type="html"><![CDATA[<h3 id="é¢˜æ„"><a class="markdownIt-Anchor" href="#é¢˜æ„"></a> é¢˜æ„</h3><h4 id="è‹±æ–‡é¢˜æ„"><a class="markdownIt-Anchor" href="#è‹±æ–‡é¢˜æ„"></a> è‹±æ–‡é¢˜æ„</h4><p><img src="https://i.loli.net/2020/11/10/wMGZsABjD7vEopx.png" alt="" /></p><a id="more"></a><h4 id="ä¸­æ–‡é¢˜æ„"><a class="markdownIt-Anchor" href="#ä¸­æ–‡é¢˜æ„"></a> ä¸­æ–‡é¢˜æ„</h4><p><img src="https://i.loli.net/2020/11/10/DFIc9eBMKZStxzo.png" alt="" /></p><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>æ˜ç¡®é—®é¢˜çš„æœ¬è´¨ï¼Œé¦–å…ˆè¡£æœçš„æ•°é‡å¿…é¡»ä¸º<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.43056em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">n</span></span></span></span>çš„æ•´æ•°å€ï¼Œå¦åˆ™æ— æ³•ç§»åŠ¨ä½¿æ•°é‡ç›¸ç­‰ï¼Œç„¶åæˆ‘ä»¬æŠŠæ‰€æœ‰å…ƒç´ ä¸å‡å€¼åšå·®å¾—åˆ°éœ€è¦ç§»åŠ¨çš„æ•°ç›®ï¼Œè®°ä¸ºæ•°ç»„<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi><mi>e</mi><mi>e</mi><mi>d</mi><mi>M</mi><mi>o</mi><mi>v</mi><mi>e</mi></mrow><annotation encoding="application/x-tex">needMove</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.69444em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">n</span><span class="mord mathit">e</span><span class="mord mathit">e</span><span class="mord mathit">d</span><span class="mord mathit" style="margin-right:0.10903em;">M</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right:0.03588em;">v</span><span class="mord mathit">e</span></span></span></span>ã€‚ç°åœ¨è€ƒè™‘ä»å·¦åˆ°å³ç¬¬ä¸€ä¸ª<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi><mi>e</mi><mi>e</mi><mi>d</mi><mi>M</mi><mi>o</mi><mi>v</mi><mi>e</mi></mrow><annotation encoding="application/x-tex">needMove</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.69444em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">n</span><span class="mord mathit">e</span><span class="mord mathit">e</span><span class="mord mathit">d</span><span class="mord mathit" style="margin-right:0.10903em;">M</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right:0.03588em;">v</span><span class="mord mathit">e</span></span></span></span>ä¸ä¸º<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>0</mn></mrow><annotation encoding="application/x-tex">0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.64444em;"></span><span class="strut bottom" style="height:0.64444em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathrm">0</span></span></span></span>çš„æ´—è¡£æœºï¼Œè‹¥<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi><mi>e</mi><mi>e</mi><mi>d</mi><mi>M</mi><mi>o</mi><mi>v</mi><mi>e</mi></mrow><annotation encoding="application/x-tex">needMove</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.69444em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">n</span><span class="mord mathit">e</span><span class="mord mathit">e</span><span class="mord mathit">d</span><span class="mord mathit" style="margin-right:0.10903em;">M</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right:0.03588em;">v</span><span class="mord mathit">e</span></span></span></span>ä¸ºæ­£ï¼Œæ ¹æ®è´ªå¿ƒçš„æƒ³æ³•ï¼Œå®ƒè‚¯å®šè¦å¾€å³æ–¹ç§»åŠ¨è¡£æœï¼Œä¸”éœ€è¦<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi><mi>e</mi><mi>e</mi><mi>d</mi><mi>M</mi><mi>o</mi><mi>v</mi><mi>e</mi></mrow><annotation encoding="application/x-tex">needMove</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.69444em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">n</span><span class="mord mathit">e</span><span class="mord mathit">e</span><span class="mord mathit">d</span><span class="mord mathit" style="margin-right:0.10903em;">M</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right:0.03588em;">v</span><span class="mord mathit">e</span></span></span></span>æ­¥ï¼›è‹¥ä¸ºè´Ÿï¼Œåˆ™éœ€è¦å³æ–¹ç§»å…¥ï¼Œä¹Ÿéœ€è¦<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi><mi>e</mi><mi>e</mi><mi>d</mi><mi>M</mi><mi>o</mi><mi>v</mi><mi>e</mi></mrow><annotation encoding="application/x-tex">needMove</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.69444em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">n</span><span class="mord mathit">e</span><span class="mord mathit">e</span><span class="mord mathit">d</span><span class="mord mathit" style="margin-right:0.10903em;">M</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right:0.03588em;">v</span><span class="mord mathit">e</span></span></span></span>æ­¥ï¼›ç§»åŠ¨å®Œåæ›´æ–°ä¸€ä¸‹åŸæ•°ç»„å’Œ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi><mi>e</mi><mi>e</mi><mi>d</mi><mi>M</mi><mi>o</mi><mi>v</mi><mi>e</mi></mrow><annotation encoding="application/x-tex">needMove</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.69444em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">n</span><span class="mord mathit">e</span><span class="mord mathit">e</span><span class="mord mathit">d</span><span class="mord mathit" style="margin-right:0.10903em;">M</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right:0.03588em;">v</span><span class="mord mathit">e</span></span></span></span>ï¼Œå†ç»§ç»­éå†ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°ä¸€ä¸ªæ­¥æ•°çš„æ•°ç»„<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mi>t</mi><mi>e</mi><mi>p</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">steps</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.61508em;"></span><span class="strut bottom" style="height:0.80952em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord mathit">s</span><span class="mord mathit">t</span><span class="mord mathit">e</span><span class="mord mathit">p</span><span class="mord mathit">s</span></span></span></span>ï¼Œå¦‚æœä¸€æ¬¡åªèƒ½ç§»åŠ¨ä¸€ä¸ªæ´—è¡£æœºçš„è¡£æœçš„è¯ï¼Œéœ€è¦çš„æ­¥æ•°å°±æ˜¯<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mi>t</mi><mi>e</mi><mi>p</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">steps</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.61508em;"></span><span class="strut bottom" style="height:0.80952em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord mathit">s</span><span class="mord mathit">t</span><span class="mord mathit">e</span><span class="mord mathit">p</span><span class="mord mathit">s</span></span></span></span>çš„å’Œï¼Œä½†æ˜¯è¿™ä¸ªé¢˜æ˜¯å¯ä»¥å¹¶è¡Œçš„ï¼Œå› æ­¤ç­”æ¡ˆå°±æ˜¯<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mi>t</mi><mi>e</mi><mi>p</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">steps</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.61508em;"></span><span class="strut bottom" style="height:0.80952em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord mathit">s</span><span class="mord mathit">t</span><span class="mord mathit">e</span><span class="mord mathit">p</span><span class="mord mathit">s</span></span></span></span>çš„æœ€å¤§å€¼</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">findMinMoves</span>(<span class="params">self, machines: List[int]</span>) -&gt; int:</span></span><br><span class="line">        n = len(machines)</span><br><span class="line">        target, b = divmod(sum(machines), n)</span><br><span class="line">        <span class="keyword">if</span> b != <span class="number">0</span>: </span><br><span class="line">            <span class="keyword">return</span> <span class="number">-1</span></span><br><span class="line">        steps = [<span class="number">0</span> <span class="keyword">for</span> i <span class="keyword">in</span> range(n)]</span><br><span class="line">        ans = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(n - <span class="number">1</span>):</span><br><span class="line">            <span class="keyword">if</span> machines[i] &gt; target:</span><br><span class="line">                steps[i] += machines[i] - target</span><br><span class="line">                machines[i + <span class="number">1</span>] += machines[i] - target</span><br><span class="line">                machines[i] = target</span><br><span class="line">                ans = max(ans, steps[i])</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                steps[i + <span class="number">1</span>] = target - machines[i]</span><br><span class="line">                machines[i + <span class="number">1</span>] -= target - machines[i]</span><br><span class="line">                machines[i] = target</span><br><span class="line">                ans = max(ans, steps[i + <span class="number">1</span>])</span><br><span class="line">        <span class="keyword">return</span> ans</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2020/11/10/5zUiunCqdcZXKrV.png" alt="" /></p><p>æ—¶é—´å¤æ‚åº¦<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><mi>n</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathit">n</span><span class="mclose">)</span></span></span></span></p>]]></content>
    
    
    <summary type="html">&lt;h3 id=&quot;é¢˜æ„&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#é¢˜æ„&quot;&gt;&lt;/a&gt; é¢˜æ„&lt;/h3&gt;
&lt;h4 id=&quot;è‹±æ–‡é¢˜æ„&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#è‹±æ–‡é¢˜æ„&quot;&gt;&lt;/a&gt; è‹±æ–‡é¢˜æ„&lt;/h4&gt;
&lt;p&gt;&lt;img src=&quot;https://i.loli.net/2020/11/10/wMGZsABjD7vEopx.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="leetcode" scheme="https://christopherrliu.github.io/categories/leetcode/"/>
    
    
    <category term="ç®—æ³•" scheme="https://christopherrliu.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
    <category term="é¢è¯•" scheme="https://christopherrliu.github.io/tags/%E9%9D%A2%E8%AF%95/"/>
    
    <category term="python" scheme="https://christopherrliu.github.io/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>æ¯å¤©ä¸€é“leetcode-next-permutation</title>
    <link href="https://christopherrliu.github.io/2020/11/10/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode-next-permutation/"/>
    <id>https://christopherrliu.github.io/2020/11/10/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode-next-permutation/</id>
    <published>2020-11-10T05:03:41.000Z</published>
    <updated>2020-11-10T05:32:33.709Z</updated>
    
    <content type="html"><![CDATA[<h3 id="é¢˜æ„"><a class="markdownIt-Anchor" href="#é¢˜æ„"></a> é¢˜æ„</h3><h4 id="è‹±æ–‡é¢˜æ„"><a class="markdownIt-Anchor" href="#è‹±æ–‡é¢˜æ„"></a> è‹±æ–‡é¢˜æ„</h4><p><img src="https://i.loli.net/2020/11/10/oUFGaXhAHPjR1O8.png" alt="" /></p><a id="more"></a><h4 id="ä¸­æ–‡é¢˜æ„"><a class="markdownIt-Anchor" href="#ä¸­æ–‡é¢˜æ„"></a> ä¸­æ–‡é¢˜æ„</h4><p><img src="https://i.loli.net/2020/11/10/C3wfaD4chm1lZP5.png" alt="" /></p><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>æ¯ä¸€ä¸ªåˆæ³•çš„æ’åˆ—éƒ½æ»¡è¶³ä»¥ä¸‹çš„æ€§è´¨ï¼š</p><p><img src="https://i.loli.net/2020/11/10/aBGHCuMfyjqPib8.png" alt="" /></p><p>å­˜åœ¨ä¸€ä¸ªbaseå…ƒç´ ï¼Œbaseä»¥å³çš„å…ƒç´ ï¼ˆç»¿è‰²ï¼‰ä¸ºé™åºï¼Œä»¥å³ï¼ˆåŒ…æ‹¬baseæœ¬èº«ï¼Œçº¢è‰²ï¼‰å¯ä»»æ„æ’åˆ—ã€‚çŸ¥é“äº†è¿™ä¸ªæ€§è´¨ï¼Œæœ¬é¢˜çš„è§£æ³•å°±å¾ˆæ˜¾ç„¶äº†ï¼Œæˆ‘ä»¬åªéœ€è¦æ‰¾åˆ°è¿™ä¸ªbaseå…ƒç´ ï¼Œç„¶ååœ¨å®ƒçš„å³é¢æ‰¾åˆ°æœ€å°çš„å¤§äºbaseçš„å…ƒç´ bigerï¼Œä¸¤è€…äº¤æ¢ï¼Œè¿™æ—¶biggerä¹‹åçš„å…ƒç´ ä¹Ÿæ˜¯é™åºçš„ï¼Œå¯ä»¥ç”¨åŒæŒ‡é’ˆå»è®©å®ƒä»¬å‡åºï¼Œè¿™æ ·å¾—åˆ°çš„åºåˆ—å°±æ˜¯è¦æ‰¾çš„åºåˆ—</p><p><img src="https://i.loli.net/2020/11/10/9bIhg2eiR5NDWGx.png" alt="" /></p><h4 id="ä½¿ç”¨æ’åºåº“å‡½æ•°"><a class="markdownIt-Anchor" href="#ä½¿ç”¨æ’åºåº“å‡½æ•°"></a> ä½¿ç”¨æ’åºåº“å‡½æ•°</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">nextPermutation</span>(<span class="params">self, nums: List[int]</span>) -&gt; <span class="keyword">None</span>:</span></span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        Do not return anything, modify nums in-place instead.</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        right = len(nums) - <span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> right == <span class="number">0</span> :</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        min_index = right</span><br><span class="line">        right -= <span class="number">1</span></span><br><span class="line">        <span class="keyword">while</span> right &gt;= <span class="number">0</span> <span class="keyword">and</span> nums[right] &gt;= nums[right + <span class="number">1</span>] :</span><br><span class="line">            right = right - <span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> right == <span class="number">-1</span> :</span><br><span class="line">            nums.sort()</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        <span class="keyword">while</span> min_index <span class="keyword">and</span> nums[min_index] &lt;= nums[right] :</span><br><span class="line">            min_index = min_index - <span class="number">1</span></span><br><span class="line">        nums[right], nums[min_index] = nums[min_index], nums[right]</span><br><span class="line">        nums[right + <span class="number">1</span>:] = sorted(nums[right + <span class="number">1</span>:])</span><br><span class="line">        <span class="keyword">return</span></span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2020/11/10/NgV8kUZTjJ2w6dP.png" alt="" /></p><h4 id="åŒæŒ‡é’ˆ"><a class="markdownIt-Anchor" href="#åŒæŒ‡é’ˆ"></a> åŒæŒ‡é’ˆ</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">nextPermutation</span>(<span class="params">self, nums: List[int]</span>) -&gt; <span class="keyword">None</span>:</span></span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        Do not return anything, modify nums in-place instead.</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        left, right = len(nums) - <span class="number">2</span>, len(nums) - <span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> left == <span class="number">-1</span> :</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        <span class="keyword">while</span> left &gt;= <span class="number">0</span> <span class="keyword">and</span> nums[left] &gt;= nums[left + <span class="number">1</span>] :</span><br><span class="line">            left = left - <span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> left == <span class="number">-1</span> :</span><br><span class="line">            left = <span class="number">0</span></span><br><span class="line">        <span class="keyword">else</span> : </span><br><span class="line">            <span class="keyword">while</span> nums[right] &lt;= nums[left] :</span><br><span class="line">                right = right - <span class="number">1</span></span><br><span class="line">            nums[right], nums[left] = nums[left], nums[right]</span><br><span class="line">            left, right = left + <span class="number">1</span>, len(nums) - <span class="number">1</span> </span><br><span class="line">        </span><br><span class="line">        <span class="keyword">while</span> left &lt; right :</span><br><span class="line">            nums[right], nums[left] = nums[left], nums[right]</span><br><span class="line">            right = right - <span class="number">1</span></span><br><span class="line">            left = left + <span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span></span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2020/11/10/FYd2x6bVXiTLBMp.png" alt="" /></p>]]></content>
    
    
    <summary type="html">&lt;h3 id=&quot;é¢˜æ„&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#é¢˜æ„&quot;&gt;&lt;/a&gt; é¢˜æ„&lt;/h3&gt;
&lt;h4 id=&quot;è‹±æ–‡é¢˜æ„&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#è‹±æ–‡é¢˜æ„&quot;&gt;&lt;/a&gt; è‹±æ–‡é¢˜æ„&lt;/h4&gt;
&lt;p&gt;&lt;img src=&quot;https://i.loli.net/2020/11/10/oUFGaXhAHPjR1O8.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="leetcode" scheme="https://christopherrliu.github.io/categories/leetcode/"/>
    
    
    <category term="ç®—æ³•" scheme="https://christopherrliu.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
    <category term="é¢è¯•" scheme="https://christopherrliu.github.io/tags/%E9%9D%A2%E8%AF%95/"/>
    
    <category term="python" scheme="https://christopherrliu.github.io/tags/python/"/>
    
    <category term="åŒæŒ‡é’ˆ" scheme="https://christopherrliu.github.io/tags/%E5%8F%8C%E6%8C%87%E9%92%88/"/>
    
  </entry>
  
  <entry>
    <title>æ¯å¤©ä¸€é“leetcode-ipo</title>
    <link href="https://christopherrliu.github.io/2020/11/10/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode-ipo/"/>
    <id>https://christopherrliu.github.io/2020/11/10/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode-ipo/</id>
    <published>2020-11-10T03:02:47.000Z</published>
    <updated>2020-11-10T03:08:24.785Z</updated>
    
    <content type="html"><![CDATA[<h3 id="é¢˜æ„"><a class="markdownIt-Anchor" href="#é¢˜æ„"></a> é¢˜æ„</h3><h4 id="è‹±æ–‡é¢˜æ„"><a class="markdownIt-Anchor" href="#è‹±æ–‡é¢˜æ„"></a> è‹±æ–‡é¢˜æ„</h4><p><img src="https://i.loli.net/2020/11/10/Wd1aZOiS8J4Rprm.png" alt="" /></p><a id="more"></a><h4 id="ä¸­æ–‡é¢˜æ„"><a class="markdownIt-Anchor" href="#ä¸­æ–‡é¢˜æ„"></a> ä¸­æ–‡é¢˜æ„</h4><p><img src="https://i.loli.net/2020/11/10/5v1GPfpd9qNVFmR.png" alt="" /></p><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>è´ªå¿ƒçš„æ€è·¯ï¼Œå¯¹äºæ‰€æœ‰çš„<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>C</mi><mi>i</mi></msub><mo>&gt;</mo><mi>W</mi></mrow><annotation encoding="application/x-tex">C_i \gt W</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.07153em;">C</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.07153em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">&gt;</span><span class="mord mathit" style="margin-right:0.13889em;">W</span></span></span></span>çš„é¡¹ç›®ï¼Œæˆ‘ä»¬é€‰æ‹©<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>P</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">P_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.13889em;">P</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.13889em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span>æœ€å¤§çš„å¿…å®šä¼šæ˜¯æœ€ä¼˜çš„ï¼Œå› æ­¤æˆ‘ä»¬ç»´æŠ¤ä¸€ä¸ªä¼˜å…ˆé˜Ÿåˆ—ï¼Œå…¶ä¸­å­˜æ”¾çš„æ˜¯æ‰€æœ‰<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>C</mi><mi>i</mi></msub><mo>&gt;</mo><mi>W</mi></mrow><annotation encoding="application/x-tex">C_i \gt W</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.07153em;">C</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.07153em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">&gt;</span><span class="mord mathit" style="margin-right:0.13889em;">W</span></span></span></span>çš„é¡¹ç›®ï¼Œç„¶åé˜Ÿå¤´æ˜¯<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>P</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">P_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.13889em;">P</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.13889em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span>æœ€å¤§çš„ï¼Œæ¯æ¬¡å–å‡º<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>P</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">P_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.13889em;">P</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.13889em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span>æœ€å¤§çš„é¡¹ç›®ï¼Œå†æ›´æ–°é˜Ÿåˆ—ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MaxHeap</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123;</span><br><span class="line">        <span class="built_in">this</span>.size = <span class="number">0</span>;</span><br><span class="line">        <span class="built_in">this</span>.data = <span class="keyword">new</span> <span class="built_in">Array</span>();</span><br><span class="line">        <span class="built_in">this</span>.data.push(<span class="number">-1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    insert(item) &#123;</span><br><span class="line">        <span class="built_in">this</span>.data.push(item);</span><br><span class="line">        <span class="built_in">this</span>.size++;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">this</span>.bubble();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    pop() &#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">this</span>.size == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="built_in">ReferenceError</span>(<span class="string">&quot;The heap is empty&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> top = <span class="built_in">this</span>.data[<span class="number">1</span>];</span><br><span class="line">        <span class="built_in">this</span>.data[<span class="number">1</span>] = <span class="built_in">this</span>.data[<span class="built_in">this</span>.size];</span><br><span class="line">        <span class="built_in">this</span>.data.pop();</span><br><span class="line">        <span class="built_in">this</span>.size--;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">this</span>.down();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> top;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    bubble() &#123;</span><br><span class="line">        <span class="keyword">let</span> idx = <span class="built_in">this</span>.size;</span><br><span class="line">        <span class="keyword">while</span>(idx &gt; <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">let</span> fa = ~~(idx / <span class="number">2</span>);</span><br><span class="line">            <span class="keyword">if</span>(<span class="built_in">this</span>.data[idx].profit &gt; <span class="built_in">this</span>.data[fa].profit) &#123;</span><br><span class="line">                [<span class="built_in">this</span>.data[idx], <span class="built_in">this</span>.data[fa]] = [<span class="built_in">this</span>.data[fa], <span class="built_in">this</span>.data[idx]];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            idx = fa;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    down() &#123;</span><br><span class="line">        <span class="keyword">let</span> idx = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span>(idx * <span class="number">2</span> &lt;= <span class="built_in">this</span>.size) &#123;</span><br><span class="line">            <span class="keyword">let</span> son = idx * <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">if</span>(son + <span class="number">1</span> &lt;= <span class="built_in">this</span>.size &amp;&amp; <span class="built_in">this</span>.data[son].profit  &lt; <span class="built_in">this</span>.data[son + <span class="number">1</span>].profit) &#123;</span><br><span class="line">                son += <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(<span class="built_in">this</span>.data[idx].profit  &lt; <span class="built_in">this</span>.data[son].profit) &#123;</span><br><span class="line">                [<span class="built_in">this</span>.data[idx], <span class="built_in">this</span>.data[son]] = [<span class="built_in">this</span>.data[son], <span class="built_in">this</span>.data[idx]];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            idx = son;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;number&#125;</span> <span class="variable">k</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;number&#125;</span> <span class="variable">W</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;number[]&#125;</span> <span class="variable">Profits</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;number[]&#125;</span> <span class="variable">Capital</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;number&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> findMaximizedCapital = <span class="function"><span class="keyword">function</span>(<span class="params">k, W, Profits, Capital</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> projects = Profits.reduce(<span class="function">(<span class="params">p, v, i</span>) =&gt;</span> &#123;</span><br><span class="line">        p.push(&#123;</span><br><span class="line">            profit: Profits[i],</span><br><span class="line">            capital: Capital[i]</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">return</span> p;</span><br><span class="line">    &#125;, <span class="keyword">new</span> <span class="built_in">Array</span>()).sort(<span class="function">(<span class="params">a, b</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(a.capital == b.capital) &#123;</span><br><span class="line">            <span class="keyword">return</span> b.profit - a.profit;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> a.capital - b.capital;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">let</span> priority_queue = <span class="keyword">new</span> MaxHeap();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; projects.length; ) &#123;</span><br><span class="line">        <span class="keyword">if</span>(projects[i].capital &gt; W) &#123;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span>(i &lt; projects.length &amp;&amp; projects[i].capital &lt;= W) &#123;</span><br><span class="line">            priority_queue.insert(projects[i]);</span><br><span class="line">            i++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(k &amp;&amp; priority_queue.size) &#123;</span><br><span class="line">            W += priority_queue.pop().profit;</span><br><span class="line">            --k;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span>(k &amp;&amp; priority_queue.size) &#123;</span><br><span class="line">        W += priority_queue.pop().profit;</span><br><span class="line">        --k;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> W;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2020/11/10/htDbCrUXdwWu2lM.png" alt="" /></p><p>æ—¶é—´å¤æ‚åº¦<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi><mi>l</mi><mi>o</mi><mi>g</mi><mi>n</mi><mo>+</mo><mi>n</mi><mi>l</mi><mi>o</mi><mi>g</mi><mi>k</mi></mrow><annotation encoding="application/x-tex">nlogn + nlogk</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord mathit">n</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord mathit">n</span><span class="mbin">+</span><span class="mord mathit">n</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord mathit" style="margin-right:0.03148em;">k</span></span></span></span>ï¼Œç©ºé—´å¤æ‚åº¦<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi><mo>+</mo><mi>l</mi><mi>o</mi><mi>g</mi><mi>k</mi></mrow><annotation encoding="application/x-tex">n + logk</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord mathit">n</span><span class="mbin">+</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord mathit" style="margin-right:0.03148em;">k</span></span></span></span></p>]]></content>
    
    
    <summary type="html">&lt;h3 id=&quot;é¢˜æ„&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#é¢˜æ„&quot;&gt;&lt;/a&gt; é¢˜æ„&lt;/h3&gt;
&lt;h4 id=&quot;è‹±æ–‡é¢˜æ„&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#è‹±æ–‡é¢˜æ„&quot;&gt;&lt;/a&gt; è‹±æ–‡é¢˜æ„&lt;/h4&gt;
&lt;p&gt;&lt;img src=&quot;https://i.loli.net/2020/11/10/Wd1aZOiS8J4Rprm.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="leetcode" scheme="https://christopherrliu.github.io/categories/leetcode/"/>
    
    
    <category term="ç®—æ³•" scheme="https://christopherrliu.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
    <category term="é¢è¯•" scheme="https://christopherrliu.github.io/tags/%E9%9D%A2%E8%AF%95/"/>
    
    <category term="javascript" scheme="https://christopherrliu.github.io/tags/javascript/"/>
    
    <category term="ä¼˜å…ˆé˜Ÿåˆ—" scheme="https://christopherrliu.github.io/tags/%E4%BC%98%E5%85%88%E9%98%9F%E5%88%97/"/>
    
  </entry>
  
  <entry>
    <title>è®ºæ–‡é˜…è¯»-text summarization with pretrained encoders Encoders</title>
    <link href="https://christopherrliu.github.io/2020/11/09/%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB/%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB-Text-Summarization-with-Pretrained-Encoders-Encoders/"/>
    <id>https://christopherrliu.github.io/2020/11/09/%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB/%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB-Text-Summarization-with-Pretrained-Encoders-Encoders/</id>
    <published>2020-11-09T09:29:35.000Z</published>
    <updated>2020-11-13T09:43:34.051Z</updated>
    
    <content type="html"><![CDATA[<h2 id="text-summarization-with-pretrained-encoders"><a class="markdownIt-Anchor" href="#text-summarization-with-pretrained-encoders"></a> <strong>Text Summarization with Pretrained Encoders</strong></h2><h3 id="abstract"><a class="markdownIt-Anchor" href="#abstract"></a> Abstract</h3><ul><li>å°†BERTåº”ç”¨äºæ–‡æœ¬æ‘˜è¦ç”Ÿæˆï¼Œæå‡ºäº†ä¸€ç§å¯ä»¥ç”¨äºæå–å¼å’Œç”Ÿæˆå¼æ‘˜è¦ç”Ÿæˆçš„é€šç”¨æ¡†æ¶</li><li>åŸºäºBERTçš„encoderèƒ½å¤Ÿè¡¨ç¤ºæ–‡æ¡£çš„è¯­ä¹‰ï¼Œå¹¶è·å¾—å¥å­çš„è¡¨å¾</li><li>ä¸€ç§æ–°çš„å¾®è°ƒæ–¹æ³•å¼¥è¡¥encoderå’Œdecoderçš„mismatch</li><li>ä¸¤é˜¶æ®µçš„å¾®è°ƒæ–¹æ³•æå‡æ‘˜è¦è´¨é‡</li></ul><a id="more"></a><p><img src="https://i.loli.net/2020/11/13/HJAMFhUIiVS8ux2.png" alt="" /></p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;text-summarization-with-pretrained-encoders&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#text-summarization-with-pretrained-encoders&quot;&gt;&lt;/a&gt; &lt;strong&gt;Text Summarization with Pretrained Encoders&lt;/strong&gt;&lt;/h2&gt;
&lt;h3 id=&quot;abstract&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#abstract&quot;&gt;&lt;/a&gt; Abstract&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;å°†BERTåº”ç”¨äºæ–‡æœ¬æ‘˜è¦ç”Ÿæˆï¼Œæå‡ºäº†ä¸€ç§å¯ä»¥ç”¨äºæå–å¼å’Œç”Ÿæˆå¼æ‘˜è¦ç”Ÿæˆçš„é€šç”¨æ¡†æ¶&lt;/li&gt;
&lt;li&gt;åŸºäºBERTçš„encoderèƒ½å¤Ÿè¡¨ç¤ºæ–‡æ¡£çš„è¯­ä¹‰ï¼Œå¹¶è·å¾—å¥å­çš„è¡¨å¾&lt;/li&gt;
&lt;li&gt;ä¸€ç§æ–°çš„å¾®è°ƒæ–¹æ³•å¼¥è¡¥encoderå’Œdecoderçš„mismatch&lt;/li&gt;
&lt;li&gt;ä¸¤é˜¶æ®µçš„å¾®è°ƒæ–¹æ³•æå‡æ‘˜è¦è´¨é‡&lt;/li&gt;
&lt;/ul&gt;</summary>
    
    
    
    <category term="è®ºæ–‡é˜…è¯»" scheme="https://christopherrliu.github.io/categories/%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB/"/>
    
    
    <category term="nlp" scheme="https://christopherrliu.github.io/tags/nlp/"/>
    
    <category term="bert" scheme="https://christopherrliu.github.io/tags/bert/"/>
    
    <category term="summarization" scheme="https://christopherrliu.github.io/tags/summarization/"/>
    
    <category term="pretrained model" scheme="https://christopherrliu.github.io/tags/pretrained-model/"/>
    
    <category term="transformer" scheme="https://christopherrliu.github.io/tags/transformer/"/>
    
  </entry>
  
  <entry>
    <title>æ¯å¤©ä¸€é“leetcode-k-closest-points-to-origin</title>
    <link href="https://christopherrliu.github.io/2020/11/09/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode-k-closest-points-to-origin/"/>
    <id>https://christopherrliu.github.io/2020/11/09/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode-k-closest-points-to-origin/</id>
    <published>2020-11-09T08:37:21.000Z</published>
    <updated>2020-11-09T12:50:06.627Z</updated>
    
    <content type="html"><![CDATA[<h3 id="é¢˜æ„"><a class="markdownIt-Anchor" href="#é¢˜æ„"></a> é¢˜æ„</h3><h4 id="è‹±æ–‡é¢˜æ„"><a class="markdownIt-Anchor" href="#è‹±æ–‡é¢˜æ„"></a> è‹±æ–‡é¢˜æ„</h4><p><img src="https://i.loli.net/2020/11/09/DVAdUWZ5pScMRr8.png" alt="" /></p><a id="more"></a><h4 id="ä¸­æ–‡é¢˜æ„"><a class="markdownIt-Anchor" href="#ä¸­æ–‡é¢˜æ„"></a> ä¸­æ–‡é¢˜æ„</h4><p><img src="https://i.loli.net/2020/11/09/YCzJsrMp6XqcFHE.png" alt="" /></p><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>ä¼˜å…ˆé˜Ÿåˆ—è£¸é¢˜ï¼Œéå†ç‚¹æ•°ç»„ï¼Œå°†è·ç¦»æ’å…¥ä¼˜å…ˆé˜Ÿåˆ—ï¼Œè‹¥é˜Ÿåˆ—å¤§å°è¶…å‡ºé™åˆ¶å°±å‡ºé˜Ÿ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MaxHeap</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123;</span><br><span class="line">        <span class="built_in">this</span>.size = <span class="number">0</span>;</span><br><span class="line">        <span class="built_in">this</span>.data = <span class="keyword">new</span> <span class="built_in">Array</span>();</span><br><span class="line">        <span class="built_in">this</span>.data.push(<span class="number">-1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    insert(item) &#123;</span><br><span class="line">        <span class="built_in">this</span>.data.push(item);</span><br><span class="line">        <span class="built_in">this</span>.size++;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">this</span>.bubble();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    pop() &#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">this</span>.size == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="built_in">ReferenceError</span>(<span class="string">&quot;The heap is empty&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> top = <span class="built_in">this</span>.data[<span class="number">1</span>];</span><br><span class="line">        <span class="built_in">this</span>.data[<span class="number">1</span>] = <span class="built_in">this</span>.data[<span class="built_in">this</span>.size];</span><br><span class="line">        <span class="built_in">this</span>.data.pop();</span><br><span class="line">        <span class="built_in">this</span>.size--;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">this</span>.down();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> top;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    bubble() &#123;</span><br><span class="line">        <span class="keyword">let</span> idx = <span class="built_in">this</span>.size;</span><br><span class="line">        <span class="keyword">while</span>(idx &gt; <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">let</span> fa = ~~(idx / <span class="number">2</span>);</span><br><span class="line">            <span class="keyword">if</span>(<span class="built_in">this</span>.data[idx].value &gt; <span class="built_in">this</span>.data[fa].value ) &#123;</span><br><span class="line">                [<span class="built_in">this</span>.data[idx], <span class="built_in">this</span>.data[fa]] = [<span class="built_in">this</span>.data[fa], <span class="built_in">this</span>.data[idx]];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            idx = fa;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    down() &#123;</span><br><span class="line">        <span class="keyword">let</span> idx = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span>(idx * <span class="number">2</span> &lt;= <span class="built_in">this</span>.size) &#123;</span><br><span class="line">            <span class="keyword">let</span> son = idx * <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">if</span>(son + <span class="number">1</span> &lt;= <span class="built_in">this</span>.size &amp;&amp; <span class="built_in">this</span>.data[son].value  &lt; <span class="built_in">this</span>.data[son + <span class="number">1</span>].value ) &#123;</span><br><span class="line">                son += <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(<span class="built_in">this</span>.data[idx].value  &lt; <span class="built_in">this</span>.data[son].value ) &#123;</span><br><span class="line">                [<span class="built_in">this</span>.data[idx], <span class="built_in">this</span>.data[son]] = [<span class="built_in">this</span>.data[son], <span class="built_in">this</span>.data[idx]];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            idx = son;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;number[][]&#125;</span> <span class="variable">points</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;number&#125;</span> <span class="variable">K</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;number[][]&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> kClosest = <span class="function"><span class="keyword">function</span>(<span class="params">points, K</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> ans = <span class="keyword">new</span> <span class="built_in">Array</span>();</span><br><span class="line">    <span class="keyword">let</span> idx = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">let</span> priority_queue = <span class="keyword">new</span> MaxHeap();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> point <span class="keyword">of</span> points) &#123;</span><br><span class="line">        <span class="keyword">let</span> dist = point[<span class="number">0</span>] ** <span class="number">2</span> + point[<span class="number">1</span>] ** <span class="number">2</span>;</span><br><span class="line">        priority_queue.insert(&#123;</span><br><span class="line">            value : dist,</span><br><span class="line">            idx : idx</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">while</span>(priority_queue.size &gt; K) &#123;</span><br><span class="line">            priority_queue.pop();</span><br><span class="line">        &#125;</span><br><span class="line">        idx++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span>(priority_queue.size) &#123;</span><br><span class="line">        <span class="keyword">let</span> top = priority_queue.pop();</span><br><span class="line">        ans.push(points[top.idx]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2020/11/09/zV7lFypEPQwbCZG.png" alt="" /></p><p>æ—¶é—´å¤æ‚åº¦<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><mi>n</mi><mi>l</mi><mi>o</mi><mi>g</mi><mi>k</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">O(nlogk)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathit">n</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mclose">)</span></span></span></span>ï¼Œç©ºé—´å¤æ‚åº¦<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><mi>k</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">O(k)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mclose">)</span></span></span></span></p><h4 id="åˆ†æ²»"><a class="markdownIt-Anchor" href="#åˆ†æ²»"></a> åˆ†æ²»</h4><p>åŸºäºå¿«é€Ÿæ’åºçš„top-kç®—æ³•ï¼Œæ¯æ¬¡æ‰¾åˆ°åŸºå‡†å…ƒç´ åï¼Œæ¯”è¾ƒå·¦è¾¹å…ƒç´ ä¸<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>K</mi></mrow><annotation encoding="application/x-tex">K</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.07153em;">K</span></span></span></span>çš„å¤§å°ï¼Œå°äº<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>K</mi></mrow><annotation encoding="application/x-tex">K</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.07153em;">K</span></span></span></span>ï¼Œè¯´æ˜ç­”æ¡ˆåœ¨å·¦åŠé¢ï¼Œå¤§äº<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>K</mi></mrow><annotation encoding="application/x-tex">K</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.07153em;">K</span></span></span></span>ï¼Œç­”æ¡ˆåœ¨å³åŠé¢</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">partition</span>(<span class="params">self, subLists</span>) :</span></span><br><span class="line">        <span class="keyword">if</span> len(subLists) == <span class="number">1</span> :</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">        base = subLists[<span class="number">0</span>][<span class="number">0</span>]</span><br><span class="line">        left, right = <span class="number">1</span>, len(subLists) - <span class="number">1</span></span><br><span class="line">        <span class="keyword">while</span> left &lt; right :</span><br><span class="line">            <span class="keyword">while</span> left &lt; right <span class="keyword">and</span> subLists[right][<span class="number">0</span>] &gt; base :</span><br><span class="line">                right = right - <span class="number">1</span></span><br><span class="line">            <span class="keyword">while</span> left &lt; right <span class="keyword">and</span> subLists[left][<span class="number">0</span>] &lt;= base :</span><br><span class="line">                left = left + <span class="number">1</span></span><br><span class="line">            <span class="keyword">if</span> left &lt; right :</span><br><span class="line">                subLists[left], subLists[right] = subLists[right], subLists[left]</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> base &gt; subLists[left][<span class="number">0</span>] :</span><br><span class="line">            subLists[<span class="number">0</span>], subLists[left] = subLists[left], subLists[<span class="number">0</span>]</span><br><span class="line">            <span class="keyword">return</span> left</span><br><span class="line">            </span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">findKItems</span>(<span class="params">self, lists, K</span>) :</span></span><br><span class="line">        <span class="keyword">if</span> len(lists) == <span class="number">0</span> :</span><br><span class="line">            <span class="keyword">return</span> []</span><br><span class="line"></span><br><span class="line">        mid = self.partition(lists) + <span class="number">1</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> mid == K :</span><br><span class="line">            <span class="keyword">return</span> lists[:mid]</span><br><span class="line">        <span class="keyword">elif</span> mid &gt; K :</span><br><span class="line">            <span class="keyword">return</span> self.findKItems(lists[:mid - <span class="number">1</span>], K)</span><br><span class="line">        <span class="keyword">else</span> :</span><br><span class="line">            <span class="keyword">return</span> lists[ :mid] + self.findKItems(lists[mid: ], K - mid)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">kClosest</span>(<span class="params">self, points: List[List[int]], K: int</span>) -&gt; List[List[int]]:</span></span><br><span class="line">        res = self.findKItems(reduce(<span class="keyword">lambda</span> p, v: p + [(v[<span class="number">0</span>] ** <span class="number">2</span> + v[<span class="number">1</span>] ** <span class="number">2</span>, v)], points, []), K)</span><br><span class="line">        <span class="keyword">return</span> [item[<span class="number">1</span>] <span class="keyword">for</span> item <span class="keyword">in</span> res]</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2020/11/09/zuWeg7FRabfOrE3.png" alt="" /></p><p>æ­£å¸¸æ¥è®²å¹³å‡çš„æ—¶é—´å¤æ‚åº¦ä¸º<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><mi>n</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathit">n</span><span class="mclose">)</span></span></span></span>ï¼Œå¯èƒ½æˆ‘ä»£ç å†™å¾—æœ‰ç‚¹æŒ«</p>]]></content>
    
    
    <summary type="html">&lt;h3 id=&quot;é¢˜æ„&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#é¢˜æ„&quot;&gt;&lt;/a&gt; é¢˜æ„&lt;/h3&gt;
&lt;h4 id=&quot;è‹±æ–‡é¢˜æ„&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#è‹±æ–‡é¢˜æ„&quot;&gt;&lt;/a&gt; è‹±æ–‡é¢˜æ„&lt;/h4&gt;
&lt;p&gt;&lt;img src=&quot;https://i.loli.net/2020/11/09/DVAdUWZ5pScMRr8.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="leetcode" scheme="https://christopherrliu.github.io/categories/leetcode/"/>
    
    
    <category term="ç®—æ³•" scheme="https://christopherrliu.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
    <category term="é¢è¯•" scheme="https://christopherrliu.github.io/tags/%E9%9D%A2%E8%AF%95/"/>
    
    <category term="python" scheme="https://christopherrliu.github.io/tags/python/"/>
    
    <category term="javascript" scheme="https://christopherrliu.github.io/tags/javascript/"/>
    
    <category term="ä¼˜å…ˆé˜Ÿåˆ—" scheme="https://christopherrliu.github.io/tags/%E4%BC%98%E5%85%88%E9%98%9F%E5%88%97/"/>
    
    <category term="åˆ†æ²»" scheme="https://christopherrliu.github.io/tags/%E5%88%86%E6%B2%BB/"/>
    
  </entry>
  
  <entry>
    <title>æ¯å¤©ä¸€é“leetcode-best-time-to-buy-and-sell-stock-iv</title>
    <link href="https://christopherrliu.github.io/2020/11/09/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode-best-time-to-buy-and-sell-stock-iv/"/>
    <id>https://christopherrliu.github.io/2020/11/09/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode-best-time-to-buy-and-sell-stock-iv/</id>
    <published>2020-11-09T02:35:35.000Z</published>
    <updated>2020-11-09T02:45:00.316Z</updated>
    
    <content type="html"><![CDATA[<h3 id="é¢˜æ„"><a class="markdownIt-Anchor" href="#é¢˜æ„"></a> é¢˜æ„</h3><h4 id="è‹±æ–‡é¢˜æ„"><a class="markdownIt-Anchor" href="#è‹±æ–‡é¢˜æ„"></a> è‹±æ–‡é¢˜æ„</h4><p><img src="https://i.loli.net/2020/11/09/CkhD5NLjK9ITpQX.png" alt="" /></p><a id="more"></a><h4 id="ä¸­æ–‡é¢˜æ„"><a class="markdownIt-Anchor" href="#ä¸­æ–‡é¢˜æ„"></a> ä¸­æ–‡é¢˜æ„</h4><p><img src="https://i.loli.net/2020/11/09/9sYQX2NUSCVgxPa.png" alt="" /></p><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>åŒæ ·çš„æ€è·¯ï¼Œä¼˜åŒ–ç©ºé—´è‡³<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>d</mi><mi>p</mi><mo>[</mo><mi>k</mi><mo>]</mo><mo>[</mo><mn>2</mn><mo>]</mo></mrow><annotation encoding="application/x-tex">dp[k][2]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">d</span><span class="mord mathit">p</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathrm">2</span><span class="mclose">]</span></span></span></span></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">maxProfit</span>(<span class="params">self, k: int, prices: List[int]</span>) -&gt; int:</span></span><br><span class="line">        <span class="keyword">if</span> len(prices) == <span class="number">0</span> :</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">            </span><br><span class="line">        dp = [[int(<span class="number">-1e9</span>), int(<span class="number">-1e9</span>)] <span class="keyword">for</span> i <span class="keyword">in</span> range(k + <span class="number">1</span>)]</span><br><span class="line"></span><br><span class="line">        dp[<span class="number">0</span>][<span class="number">0</span>] ,dp[<span class="number">0</span>][<span class="number">1</span>] = <span class="number">0</span>, -prices[<span class="number">0</span>]</span><br><span class="line">        <span class="keyword">for</span> price <span class="keyword">in</span> prices[<span class="number">1</span>: ] :</span><br><span class="line">            <span class="keyword">for</span> pk <span class="keyword">in</span> range(k, <span class="number">-1</span>, <span class="number">-1</span>) :</span><br><span class="line">                <span class="keyword">if</span> pk :</span><br><span class="line">                    dp[pk][<span class="number">0</span>] = max(dp[pk][<span class="number">0</span>], dp[pk - <span class="number">1</span>][<span class="number">1</span>] + price)</span><br><span class="line">                dp[pk][<span class="number">1</span>] = max(dp[pk][<span class="number">1</span>], dp[pk][<span class="number">0</span>] - price)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> max([dp[i][<span class="number">0</span>] <span class="keyword">for</span> i <span class="keyword">in</span> range(k + <span class="number">1</span>)])</span><br></pre></td></tr></table></figure><p><a href="https://imgchr.com/i/B7Eop6"><img src="https://s1.ax1x.com/2020/11/09/B7Eop6.png" alt="B7Eop6.png" /></a></p><p>æ—¶é—´å¤æ‚åº¦<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><mi>n</mi><mi>k</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">O(nk)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathit">n</span><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mclose">)</span></span></span></span>ï¼Œç©ºé—´å¤æ‚åº¦<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><mi>k</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">O(k)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mclose">)</span></span></span></span></p>]]></content>
    
    
    <summary type="html">&lt;h3 id=&quot;é¢˜æ„&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#é¢˜æ„&quot;&gt;&lt;/a&gt; é¢˜æ„&lt;/h3&gt;
&lt;h4 id=&quot;è‹±æ–‡é¢˜æ„&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#è‹±æ–‡é¢˜æ„&quot;&gt;&lt;/a&gt; è‹±æ–‡é¢˜æ„&lt;/h4&gt;
&lt;p&gt;&lt;img src=&quot;https://i.loli.net/2020/11/09/CkhD5NLjK9ITpQX.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="leetcode" scheme="https://christopherrliu.github.io/categories/leetcode/"/>
    
    
    <category term="åŠ¨æ€è§„åˆ’" scheme="https://christopherrliu.github.io/tags/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/"/>
    
    <category term="ç®—æ³•" scheme="https://christopherrliu.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
    <category term="é¢è¯•" scheme="https://christopherrliu.github.io/tags/%E9%9D%A2%E8%AF%95/"/>
    
    <category term="python" scheme="https://christopherrliu.github.io/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>æ¯å¤©ä¸€é“leetcode-best-time-to-buy-and-sell-stock-iii</title>
    <link href="https://christopherrliu.github.io/2020/11/09/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode-best-time-to-buy-and-sell-stock-iii/"/>
    <id>https://christopherrliu.github.io/2020/11/09/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode-best-time-to-buy-and-sell-stock-iii/</id>
    <published>2020-11-09T02:09:56.000Z</published>
    <updated>2020-11-09T02:35:57.538Z</updated>
    
    <content type="html"><![CDATA[<h3 id="é¢˜æ„"><a class="markdownIt-Anchor" href="#é¢˜æ„"></a> é¢˜æ„</h3><h4 id="è‹±æ–‡é¢˜æ„"><a class="markdownIt-Anchor" href="#è‹±æ–‡é¢˜æ„"></a> è‹±æ–‡é¢˜æ„</h4><p><img src="https://i.loli.net/2020/11/09/5TNxz2op6nw9uA1.png" alt="" /></p><a id="more"></a><h4 id="ä¸­æ–‡é¢˜æ„"><a class="markdownIt-Anchor" href="#ä¸­æ–‡é¢˜æ„"></a> ä¸­æ–‡é¢˜æ„</h4><p><img src="https://i.loli.net/2020/11/09/tz2kvcnNfFdRHUV.png" alt="" /></p><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>ä¸\mbox{II}çš„æ€è·¯ç›¸ä¼¼ï¼Œç”¨<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>d</mi><mi>p</mi><mo>[</mo><mi>i</mi><mo>]</mo><mo>[</mo><mi>j</mi><mo>]</mo><mo>[</mo><mi>k</mi><mo>]</mo></mrow><annotation encoding="application/x-tex">dp[i][j][k]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">d</span><span class="mord mathit">p</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mclose">]</span></span></span></span>è¡¨ç¤ºç¬¬<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.65952em;"></span><span class="strut bottom" style="height:0.65952em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">i</span></span></span></span>å¤©å·²ç»å®Œæˆäº†<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>j</mi></mrow><annotation encoding="application/x-tex">j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.65952em;"></span><span class="strut bottom" style="height:0.85396em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.05724em;">j</span></span></span></span>ç¬”äº¤æ˜“ï¼Œæ‰‹ä¸­æ˜¯å¦è¿˜æœ‰è‚¡ç¥¨çš„æœ€å¤§åˆ©æ¶¦ï¼Œè½¬ç§»å…¬å¼ä¸ºï¼š</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mtable><mtr><mtd><mrow><mi>d</mi><mi>p</mi><mo>[</mo><mi>i</mi><mo>]</mo><mo>[</mo><mi>j</mi><mo>]</mo><mo>[</mo><mn>0</mn><mo>]</mo></mrow></mtd><mtd><mrow><mrow></mrow><mo>=</mo><mi>m</mi><mi>a</mi><mi>x</mi><mo>(</mo><mi>d</mi><mi>p</mi><mo>[</mo><mi>i</mi><mo>âˆ’</mo><mn>1</mn><mo>]</mo><mo>[</mo><mi>j</mi><mo>]</mo><mo>[</mo><mn>0</mn><mo>]</mo><mo separator="true">,</mo><mi>d</mi><mi>p</mi><mo>[</mo><mi>i</mi><mo>âˆ’</mo><mn>1</mn><mo>]</mo><mo>[</mo><mi>j</mi><mo>âˆ’</mo><mn>1</mn><mo>]</mo><mo>[</mo><mn>1</mn><mo>]</mo><mo>+</mo><mi>p</mi><mi>r</mi><mi>i</mi><mi>c</mi><mi>e</mi><mi>s</mi><mo>[</mo><mi>i</mi><mo>]</mo><mo>)</mo></mrow></mtd></mtr><mtr><mtd><mrow><mi>d</mi><mi>p</mi><mo>[</mo><mi>i</mi><mo>]</mo><mo>[</mo><mi>j</mi><mo>]</mo><mo>[</mo><mn>1</mn><mo>]</mo></mrow></mtd><mtd><mrow><mrow></mrow><mo>=</mo><mi>m</mi><mi>a</mi><mi>x</mi><mo>(</mo><mi>d</mi><mi>p</mi><mo>[</mo><mi>i</mi><mo>âˆ’</mo><mn>1</mn><mo>]</mo><mo>[</mo><mi>j</mi><mo>]</mo><mo>[</mo><mn>1</mn><mo>]</mo><mo separator="true">,</mo><mi>d</mi><mi>p</mi><mo>[</mo><mi>i</mi><mo>âˆ’</mo><mn>1</mn><mo>]</mo><mo>[</mo><mi>j</mi><mo>]</mo><mo>[</mo><mn>0</mn><mo>]</mo><mo>âˆ’</mo><mi>p</mi><mi>r</mi><mi>i</mi><mi>c</mi><mi>e</mi><mi>s</mi><mo>[</mo><mi>i</mi><mo>]</mo><mo>)</mo></mrow></mtd></mtr></mtable></mrow><annotation encoding="application/x-tex">\begin{aligned}dp[i][j][0] &amp;= max(dp[i - 1][j][0], dp[i - 1][j - 1][1] + prices[i])\\dp[i][j][1] &amp;= max(dp[i - 1][j][1], dp[i - 1][j][0] - prices[i])\end{aligned}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.45em;"></span><span class="strut bottom" style="height:2.4000000000000004em;vertical-align:-0.9500000000000004em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist"><span style="top:-0.6099999999999999em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord mathit">d</span><span class="mord mathit">p</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathrm">0</span><span class="mclose">]</span></span></span><span style="top:0.5900000000000003em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord mathit">d</span><span class="mord mathit">p</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathrm">1</span><span class="mclose">]</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="col-align-l"><span class="vlist"><span style="top:-0.6099999999999999em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord displaystyle textstyle uncramped"></span><span class="mrel">=</span><span class="mord mathit">m</span><span class="mord mathit">a</span><span class="mord mathit">x</span><span class="mopen">(</span><span class="mord mathit">d</span><span class="mord mathit">p</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mbin">âˆ’</span><span class="mord mathrm">1</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathrm">0</span><span class="mclose">]</span><span class="mpunct">,</span><span class="mord mathit">d</span><span class="mord mathit">p</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mbin">âˆ’</span><span class="mord mathrm">1</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mbin">âˆ’</span><span class="mord mathrm">1</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathrm">1</span><span class="mclose">]</span><span class="mbin">+</span><span class="mord mathit">p</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">i</span><span class="mord mathit">c</span><span class="mord mathit">e</span><span class="mord mathit">s</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mclose">]</span><span class="mclose">)</span></span></span><span style="top:0.5900000000000003em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord displaystyle textstyle uncramped"></span><span class="mrel">=</span><span class="mord mathit">m</span><span class="mord mathit">a</span><span class="mord mathit">x</span><span class="mopen">(</span><span class="mord mathit">d</span><span class="mord mathit">p</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mbin">âˆ’</span><span class="mord mathrm">1</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathrm">1</span><span class="mclose">]</span><span class="mpunct">,</span><span class="mord mathit">d</span><span class="mord mathit">p</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mbin">âˆ’</span><span class="mord mathrm">1</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathrm">0</span><span class="mclose">]</span><span class="mbin">âˆ’</span><span class="mord mathit">p</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">i</span><span class="mord mathit">c</span><span class="mord mathit">e</span><span class="mord mathit">s</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mclose">]</span><span class="mclose">)</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span></span></span></span></p><p>å› ä¸º<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>d</mi><mi>p</mi><mo>[</mo><mi>i</mi><mo>]</mo></mrow><annotation encoding="application/x-tex">dp[i]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">d</span><span class="mord mathit">p</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mclose">]</span></span></span></span>åªä¸<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>d</mi><mi>p</mi><mo>[</mo><mi>i</mi><mo>âˆ’</mo><mn>1</mn><mo>]</mo></mrow><annotation encoding="application/x-tex">dp[i - 1]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">d</span><span class="mord mathit">p</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mbin">âˆ’</span><span class="mord mathrm">1</span><span class="mclose">]</span></span></span></span>æœ‰å…³ï¼Œå¹¶ä¸”<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>j</mi></mrow><annotation encoding="application/x-tex">j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.65952em;"></span><span class="strut bottom" style="height:0.85396em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.05724em;">j</span></span></span></span>çš„å–å€¼èŒƒå›´æœ‰é™ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å‡ ä¸ªå˜é‡ä¼˜åŒ–ç©ºé—´å¤æ‚åº¦è‡³<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><mn>1</mn><mo>)</mo></mrow><annotation encoding="application/x-tex">O(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathrm">1</span><span class="mclose">)</span></span></span></span></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">maxProfit</span>(<span class="params">self, prices: List[int]</span>) -&gt; int:</span></span><br><span class="line">        dp1, dp2, dp3, dp4 = <span class="number">-1e9</span>, <span class="number">-1e9</span>, -prices[<span class="number">0</span>], <span class="number">-1e9</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> idx, price <span class="keyword">in</span> enumerate(prices[<span class="number">1</span>:]) :</span><br><span class="line">            ndp1 = max(dp1, dp3 + price)</span><br><span class="line">            ndp2 = max(dp2, dp4 + price)</span><br><span class="line">            ndp3 = max(dp3, <span class="number">0</span> - price)</span><br><span class="line">            ndp4 = max(dp4, dp1 - price)</span><br><span class="line"></span><br><span class="line">            dp1, dp2, dp3, dp4 = ndp1, ndp2, ndp3, ndp4</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> max(dp1, dp2, <span class="number">0</span>)</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2020/11/09/Hnqzg4mwRGAaoY1.png" alt="" /></p><p>æ—¶é—´å¤æ‚åº¦<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><mi>n</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathit">n</span><span class="mclose">)</span></span></span></span>ï¼Œç©ºé—´å¤æ‚åº¦<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><mn>1</mn><mo>)</mo></mrow><annotation encoding="application/x-tex">O(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathrm">1</span><span class="mclose">)</span></span></span></span></p>]]></content>
    
    
    <summary type="html">&lt;h3 id=&quot;é¢˜æ„&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#é¢˜æ„&quot;&gt;&lt;/a&gt; é¢˜æ„&lt;/h3&gt;
&lt;h4 id=&quot;è‹±æ–‡é¢˜æ„&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#è‹±æ–‡é¢˜æ„&quot;&gt;&lt;/a&gt; è‹±æ–‡é¢˜æ„&lt;/h4&gt;
&lt;p&gt;&lt;img src=&quot;https://i.loli.net/2020/11/09/5TNxz2op6nw9uA1.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="leetcode" scheme="https://christopherrliu.github.io/categories/leetcode/"/>
    
    
    <category term="åŠ¨æ€è§„åˆ’" scheme="https://christopherrliu.github.io/tags/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/"/>
    
    <category term="ç®—æ³•" scheme="https://christopherrliu.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
    <category term="é¢è¯•" scheme="https://christopherrliu.github.io/tags/%E9%9D%A2%E8%AF%95/"/>
    
    <category term="python" scheme="https://christopherrliu.github.io/tags/python/"/>
    
  </entry>
  
</feed>

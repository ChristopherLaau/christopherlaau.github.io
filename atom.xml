<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Christopherã®åšå®¢</title>
  
  <subtitle>çº¸ä¸Šå¾—æ¥ç»ˆè§‰æµ…</subtitle>
  <link href="https://christopherrliu.github.io/atom.xml" rel="self"/>
  
  <link href="https://christopherrliu.github.io/"/>
  <updated>2020-11-12T02:55:50.337Z</updated>
  <id>https://christopherrliu.github.io/</id>
  
  <author>
    <name>Christopher Liu</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>æ¯å¤©ä¸€é“leetcode-sort-array-by-parity-ii</title>
    <link href="https://christopherrliu.github.io/2020/11/12/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode-sort-array-by-parity-ii/"/>
    <id>https://christopherrliu.github.io/2020/11/12/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode-sort-array-by-parity-ii/</id>
    <published>2020-11-12T02:51:30.000Z</published>
    <updated>2020-11-12T02:55:50.337Z</updated>
    
    <content type="html"><![CDATA[<h3 id="é¢˜æ„"><a class="markdownIt-Anchor" href="#é¢˜æ„"></a> é¢˜æ„</h3><h4 id="è‹±æ–‡é¢˜æ„"><a class="markdownIt-Anchor" href="#è‹±æ–‡é¢˜æ„"></a> è‹±æ–‡é¢˜æ„</h4><p><img src="https://i.loli.net/2020/11/12/ZsJQEdWYMA5OVpr.png" alt="" /></p><a id="more"></a><h4 id="ä¸­æ–‡é¢˜æ„"><a class="markdownIt-Anchor" href="#ä¸­æ–‡é¢˜æ„"></a> ä¸­æ–‡é¢˜æ„</h4><p><img src="https://i.loli.net/2020/11/12/QWbKsT4mCLxBD3k.png" alt="" /></p><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>ç”¨ä¸¤ä¸ªæŒ‡é’ˆåˆ†åˆ«æŒ‡å‘å¥‡æ•°ä½ç½®å’Œå¶æ•°ä½ç½®ï¼Œåˆ†åˆ«æ‰¾åˆ°å¥‡æ•°ä½ç½®ä¸ä¸ºå¥‡æ•°å’Œå¶æ•°ä½ç½®ä¸ä¸ºå¶æ•°çš„ä½ç½®ï¼Œç„¶åäº¤æ¢ï¼Œå¦‚æœæ‰¾ä¸åˆ°è¿™æ ·çš„ä½ç½®å°±é€€å‡º</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; <span class="title">sortArrayByParityII</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; A)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(A.size() == <span class="number">0</span>) <span class="keyword">return</span> A;</span><br><span class="line">        <span class="keyword">int</span> left = <span class="number">0</span>, right = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span>(left &lt; A.size() &amp;&amp; right &lt; A.size()) &#123;</span><br><span class="line">            <span class="keyword">while</span>(left &lt; A.size() &amp;&amp; A[left] % <span class="number">2</span> == <span class="number">0</span>) left += <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">while</span>(right &lt; A.size() &amp;&amp; A[right] % <span class="number">2</span> == <span class="number">1</span>) right += <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">if</span>(left &lt; A.size() &amp;&amp; right &lt; A.size()) &#123;</span><br><span class="line">                swap(A[left], A[right]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> A;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2020/11/12/hoyvseTkWinrjMO.png" alt="" /></p><p>æ—¶é—´å¤æ‚åº¦<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><mi>n</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathit">n</span><span class="mclose">)</span></span></span></span>ï¼Œç©ºé—´å¤æ‚åº¦<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><mn>1</mn><mo>)</mo></mrow><annotation encoding="application/x-tex">O(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathrm">1</span><span class="mclose">)</span></span></span></span></p>]]></content>
    
    
    <summary type="html">&lt;h3 id=&quot;é¢˜æ„&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#é¢˜æ„&quot;&gt;&lt;/a&gt; é¢˜æ„&lt;/h3&gt;
&lt;h4 id=&quot;è‹±æ–‡é¢˜æ„&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#è‹±æ–‡é¢˜æ„&quot;&gt;&lt;/a&gt; è‹±æ–‡é¢˜æ„&lt;/h4&gt;
&lt;p&gt;&lt;img src=&quot;https://i.loli.net/2020/11/12/ZsJQEdWYMA5OVpr.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="leetcode" scheme="https://christopherrliu.github.io/categories/leetcode/"/>
    
    
    <category term="C++" scheme="https://christopherrliu.github.io/tags/C/"/>
    
    <category term="ç®—æ³•" scheme="https://christopherrliu.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
    <category term="é¢è¯•" scheme="https://christopherrliu.github.io/tags/%E9%9D%A2%E8%AF%95/"/>
    
    <category term="åŒæŒ‡é’ˆ" scheme="https://christopherrliu.github.io/tags/%E5%8F%8C%E6%8C%87%E9%92%88/"/>
    
  </entry>
  
  <entry>
    <title>æ¯å¤©ä¸€é“leetcode-find-the-winner-of-an-array-game</title>
    <link href="https://christopherrliu.github.io/2020/11/11/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode-find-the-winner-of-an-array-game/"/>
    <id>https://christopherrliu.github.io/2020/11/11/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode-find-the-winner-of-an-array-game/</id>
    <published>2020-11-11T12:44:45.000Z</published>
    <updated>2020-11-12T02:52:25.097Z</updated>
    
    <content type="html"><![CDATA[<h3 id="é¢˜æ„"><a class="markdownIt-Anchor" href="#é¢˜æ„"></a> é¢˜æ„</h3><h4 id="è‹±æ–‡é¢˜æ„"><a class="markdownIt-Anchor" href="#è‹±æ–‡é¢˜æ„"></a> è‹±æ–‡é¢˜æ„</h4><p><img src="https://i.loli.net/2020/11/11/IyMU6FAKYrCmNZD.png" alt="" /></p><a id="more"></a><h4 id="ä¸­æ–‡é¢˜æ„"><a class="markdownIt-Anchor" href="#ä¸­æ–‡é¢˜æ„"></a> ä¸­æ–‡é¢˜æ„</h4><p><img src="https://i.loli.net/2020/11/11/3OmYJ81cRk6FPzq.png" alt="" /></p><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><h4 id="æš´åŠ›"><a class="markdownIt-Anchor" href="#æš´åŠ›"></a> æš´åŠ›âŒ</h4><p>çœ‹åˆ°é¢˜ç›®ï¼Œ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>k</mi><mo>â‰¥</mo><mi>n</mi><mo>âˆ’</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">k \ge n - 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.83041em;vertical-align:-0.13597em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mrel">â‰¥</span><span class="mord mathit">n</span><span class="mbin">âˆ’</span><span class="mord mathrm">1</span></span></span></span>çš„æ—¶å€™å–æœ€å¤§å€¼ï¼Œé‚£ä¹ˆ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.69444em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.03148em;">k</span></span></span></span>çš„èŒƒå›´ä¸æ•°ç»„é•¿åº¦ä¸€è‡´ï¼Œç›´æ¥æš´åŠ›ï¼</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">getWinner</span>(<span class="params">self, arr: List[int], k: int</span>) -&gt; int:</span></span><br><span class="line">        n = len(arr)</span><br><span class="line">        first, win_number = arr[<span class="number">0</span>], <span class="number">0</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> k &gt;= n :</span><br><span class="line">            <span class="keyword">return</span> max(arr)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> <span class="literal">True</span> :</span><br><span class="line">            first, second, *rest = arr</span><br><span class="line">            <span class="keyword">if</span> first &lt; second :</span><br><span class="line">                <span class="keyword">if</span> win_number == k :</span><br><span class="line">                    <span class="keyword">break</span></span><br><span class="line">                win_number = <span class="number">1</span></span><br><span class="line">                arr = [second] + rest + [first]</span><br><span class="line"></span><br><span class="line">            <span class="keyword">else</span> :</span><br><span class="line">                win_number += <span class="number">1</span></span><br><span class="line">                <span class="keyword">if</span> win_number == k :</span><br><span class="line">                    <span class="keyword">break</span></span><br><span class="line">                arr[<span class="number">1</span>: ] = rest + [second]</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> first</span><br></pre></td></tr></table></figure><p>æœæ–­è¶…æ—¶</p><p><img src="https://i.loli.net/2020/11/11/5aisAVuEZLWSwX4.png" alt="" /></p><p><s>æœç„¶ä¸­ç­‰é¢˜ç›®ä¸ä¼šè¿™ä¹ˆç®€å•</s></p><h4 id="ä¼˜åŒ–"><a class="markdownIt-Anchor" href="#ä¼˜åŒ–"></a> ä¼˜åŒ–ğŸ”‘</h4><p>è€ƒè™‘å¦‚ä½•ä¼˜åŒ–ï¼Œè§‚å¯Ÿåˆ°è¿™ä¸ªè¿‡ç¨‹ç±»ä¼¼äºä¸€ä¸ªå†’æ³¡çš„è¿‡ç¨‹ï¼Œæ‰€ä»¥æˆ‘ä»¬ä»å¤´éå†ï¼Œè®°å½•æ¯ä¸ªå…ƒç´ è·èƒœçš„æ¬¡æ•°ï¼Œé‡åˆ°æœ€å¤§å…ƒç´ å°±ç›´æ¥é€€å‡ºï¼›å¦å¤–å»é™¤ç§»åŠ¨æ•°ç»„çš„è¿‡ç¨‹ï¼Œå‡å°‘æ—¶é—´æ¶ˆè€—</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">getWinner</span>(<span class="params">self, arr: List[int], k: int</span>) -&gt; int:</span></span><br><span class="line">        n = len(arr)</span><br><span class="line">        win_number = <span class="number">0</span></span><br><span class="line">        max_element = max(arr)</span><br><span class="line">        first, win_number = arr[<span class="number">0</span>], <span class="number">0</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> k &gt;= n :</span><br><span class="line">            <span class="keyword">return</span> max_element</span><br><span class="line"></span><br><span class="line">        base = arr[<span class="number">0</span>]</span><br><span class="line">        <span class="keyword">for</span> element <span class="keyword">in</span> arr[<span class="number">1</span>:] :</span><br><span class="line">            <span class="keyword">if</span> element == max_element :</span><br><span class="line">                <span class="keyword">return</span> max_element</span><br><span class="line">            <span class="keyword">if</span> element &lt; base :</span><br><span class="line">                win_number += <span class="number">1</span></span><br><span class="line">                <span class="keyword">if</span> win_number == k :</span><br><span class="line">                    <span class="keyword">return</span> base</span><br><span class="line">                </span><br><span class="line">            <span class="keyword">else</span> :</span><br><span class="line">                win_number = <span class="number">1</span></span><br><span class="line">                base = element</span><br><span class="line">                <span class="keyword">if</span> win_number == k :</span><br><span class="line">                    <span class="keyword">return</span> base</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> base</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2020/11/11/qD1x2pjvZToMAYJ.png" alt="" /></p><p>æ—¶é—´å¤æ‚åº¦<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><mi>n</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathit">n</span><span class="mclose">)</span></span></span></span>ï¼Œç©ºé—´å¤æ‚åº¦<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><mn>1</mn><mo>)</mo></mrow><annotation encoding="application/x-tex">O(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathrm">1</span><span class="mclose">)</span></span></span></span></p>]]></content>
    
    
    <summary type="html">&lt;h3 id=&quot;é¢˜æ„&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#é¢˜æ„&quot;&gt;&lt;/a&gt; é¢˜æ„&lt;/h3&gt;
&lt;h4 id=&quot;è‹±æ–‡é¢˜æ„&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#è‹±æ–‡é¢˜æ„&quot;&gt;&lt;/a&gt; è‹±æ–‡é¢˜æ„&lt;/h4&gt;
&lt;p&gt;&lt;img src=&quot;https://i.loli.net/2020/11/11/IyMU6FAKYrCmNZD.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="leetcode" scheme="https://christopherrliu.github.io/categories/leetcode/"/>
    
    
    <category term="ç®—æ³•" scheme="https://christopherrliu.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
    <category term="é¢è¯•" scheme="https://christopherrliu.github.io/tags/%E9%9D%A2%E8%AF%95/"/>
    
    <category term="python" scheme="https://christopherrliu.github.io/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>è®ºæ–‡é˜…è¯»-Leveraging Pre-trained Checkpoints for Sequence Generation Tasks</title>
    <link href="https://christopherrliu.github.io/2020/11/11/%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB/%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB-Leveraging-Pre-trained-Checkpoints-for-Sequence-Generation-Tasks/"/>
    <id>https://christopherrliu.github.io/2020/11/11/%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB/%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB-Leveraging-Pre-trained-Checkpoints-for-Sequence-Generation-Tasks/</id>
    <published>2020-11-11T07:39:41.000Z</published>
    <updated>2020-11-11T07:42:35.613Z</updated>
    
    <content type="html"><![CDATA[<h2 id="leveraging-pre-trained-checkpoints-for-sequence-generation-tasks"><a class="markdownIt-Anchor" href="#leveraging-pre-trained-checkpoints-for-sequence-generation-tasks"></a> Leveraging Pre-trained Checkpoints for Sequence Generation Tasks</h2>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;leveraging-pre-trained-checkpoints-for-sequence-generation-tasks&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#leveraging-pre-trained-checkpo</summary>
      
    
    
    
    <category term="è®ºæ–‡é˜…è¯»" scheme="https://christopherrliu.github.io/categories/%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB/"/>
    
    
    <category term="nlp" scheme="https://christopherrliu.github.io/tags/nlp/"/>
    
    <category term="sequence generation" scheme="https://christopherrliu.github.io/tags/sequence-generation/"/>
    
    <category term="è¯­è¨€æ¨¡å‹" scheme="https://christopherrliu.github.io/tags/%E8%AF%AD%E8%A8%80%E6%A8%A1%E5%9E%8B/"/>
    
    <category term="BERT" scheme="https://christopherrliu.github.io/tags/BERT/"/>
    
    <category term="GPT-2" scheme="https://christopherrliu.github.io/tags/GPT-2/"/>
    
  </entry>
  
  <entry>
    <title>æ¯å¤©ä¸€é“leetcode-longest-valid-parentheses</title>
    <link href="https://christopherrliu.github.io/2020/11/11/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode-longest-valid-parentheses/"/>
    <id>https://christopherrliu.github.io/2020/11/11/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode-longest-valid-parentheses/</id>
    <published>2020-11-11T06:35:54.000Z</published>
    <updated>2020-11-11T07:32:39.983Z</updated>
    
    <content type="html"><![CDATA[<h3 id="é¢˜æ„"><a class="markdownIt-Anchor" href="#é¢˜æ„"></a> é¢˜æ„</h3><h4 id="è‹±æ–‡é¢˜æ„"><a class="markdownIt-Anchor" href="#è‹±æ–‡é¢˜æ„"></a> è‹±æ–‡é¢˜æ„</h4><p><img src="https://i.loli.net/2020/11/11/nUAZxGVpbtCPT4q.png" alt="" /></p><a id="more"></a><h4 id="ä¸­æ–‡é¢˜æ„"><a class="markdownIt-Anchor" href="#ä¸­æ–‡é¢˜æ„"></a> ä¸­æ–‡é¢˜æ„</h4><p><img src="https://i.loli.net/2020/11/11/l8brteR6kxDfUTv.png" alt="" /></p><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><h4 id="æ ˆ"><a class="markdownIt-Anchor" href="#æ ˆ"></a> æ ˆ</h4><p>é¦–å…ˆç”¨ä¸€ä¸ªæ ˆæ‰¾å‡ºæ‰€æœ‰åˆæ³•çš„æ‹¬å·åºåˆ—ï¼Œ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>b</mi><mi>r</mi><mi>a</mi><mi>c</mi><mi>k</mi><mi>e</mi><mi>t</mi><mi>S</mi><mi>e</mi><mi>q</mi><mi>u</mi><mi>e</mi><mi>n</mi><mi>c</mi><mi>e</mi><mi>L</mi><mi>e</mi><mi>n</mi><mi>g</mi><mi>t</mi><mi>h</mi><mo>[</mo><mi>i</mi><mo>]</mo></mrow><annotation encoding="application/x-tex">bracketSequenceLength[i]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">b</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">a</span><span class="mord mathit">c</span><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mord mathit">e</span><span class="mord mathit">t</span><span class="mord mathit" style="margin-right:0.05764em;">S</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.03588em;">q</span><span class="mord mathit">u</span><span class="mord mathit">e</span><span class="mord mathit">n</span><span class="mord mathit">c</span><span class="mord mathit">e</span><span class="mord mathit">L</span><span class="mord mathit">e</span><span class="mord mathit">n</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord mathit">t</span><span class="mord mathit">h</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mclose">]</span></span></span></span>è¡¨ç¤ºä»¥<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.65952em;"></span><span class="strut bottom" style="height:0.65952em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">i</span></span></span></span>ç»“å°¾çš„åˆæ³•åºåˆ—é•¿åº¦ï¼Œç„¶åéå†è¿™ä¸ªæ•°ç»„ï¼Œè‹¥<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>b</mi><mi>r</mi><mi>a</mi><mi>c</mi><mi>k</mi><mi>e</mi><mi>t</mi><mi>S</mi><mi>e</mi><mi>q</mi><mi>u</mi><mi>e</mi><mi>n</mi><mi>c</mi><mi>e</mi><mi>L</mi><mi>e</mi><mi>n</mi><mi>g</mi><mi>t</mi><mi>h</mi><mo>[</mo><mi>i</mi><mo>âˆ’</mo><mi>b</mi><mi>r</mi><mi>a</mi><mi>c</mi><mi>k</mi><mi>e</mi><mi>t</mi><mi>S</mi><mi>e</mi><mi>q</mi><mi>u</mi><mi>e</mi><mi>n</mi><mi>c</mi><mi>e</mi><mi>L</mi><mi>e</mi><mi>n</mi><mi>g</mi><mi>t</mi><mi>h</mi><mo>]</mo><mo>â‰ </mo><mn>0</mn></mrow><annotation encoding="application/x-tex">bracketSequenceLength[i - bracketSequenceLength] \ne 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">b</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">a</span><span class="mord mathit">c</span><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mord mathit">e</span><span class="mord mathit">t</span><span class="mord mathit" style="margin-right:0.05764em;">S</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.03588em;">q</span><span class="mord mathit">u</span><span class="mord mathit">e</span><span class="mord mathit">n</span><span class="mord mathit">c</span><span class="mord mathit">e</span><span class="mord mathit">L</span><span class="mord mathit">e</span><span class="mord mathit">n</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord mathit">t</span><span class="mord mathit">h</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mbin">âˆ’</span><span class="mord mathit">b</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">a</span><span class="mord mathit">c</span><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mord mathit">e</span><span class="mord mathit">t</span><span class="mord mathit" style="margin-right:0.05764em;">S</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.03588em;">q</span><span class="mord mathit">u</span><span class="mord mathit">e</span><span class="mord mathit">n</span><span class="mord mathit">c</span><span class="mord mathit">e</span><span class="mord mathit">L</span><span class="mord mathit">e</span><span class="mord mathit">n</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord mathit">t</span><span class="mord mathit">h</span><span class="mclose">]</span><span class="mrel">â‰ </span><span class="mord mathrm">0</span></span></span></span>ï¼Œè¯´æ˜æ‹¬å·åºåˆ—å¯ä»¥åˆå¹¶å°±æ›´æ–°<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>b</mi><mi>r</mi><mi>a</mi><mi>c</mi><mi>k</mi><mi>e</mi><mi>t</mi><mi>S</mi><mi>e</mi><mi>q</mi><mi>u</mi><mi>e</mi><mi>n</mi><mi>c</mi><mi>e</mi><mi>L</mi><mi>e</mi><mi>n</mi><mi>g</mi><mi>t</mi><mi>h</mi><mo>[</mo><mi>i</mi><mo>]</mo><mo>+</mo><mo>=</mo><mi>b</mi><mi>r</mi><mi>a</mi><mi>c</mi><mi>k</mi><mi>e</mi><mi>t</mi><mi>S</mi><mi>e</mi><mi>q</mi><mi>u</mi><mi>e</mi><mi>n</mi><mi>c</mi><mi>e</mi><mi>L</mi><mi>e</mi><mi>n</mi><mi>g</mi><mi>t</mi><mi>h</mi><mo>[</mo><mi>i</mi><mo>âˆ’</mo><mi>b</mi><mi>r</mi><mi>a</mi><mi>c</mi><mi>k</mi><mi>e</mi><mi>t</mi><mi>S</mi><mi>e</mi><mi>q</mi><mi>u</mi><mi>e</mi><mi>n</mi><mi>c</mi><mi>e</mi><mi>L</mi><mi>e</mi><mi>n</mi><mi>g</mi><mi>t</mi><mi>h</mi><mo>]</mo><mo>â‰ </mo><mn>0</mn></mrow><annotation encoding="application/x-tex">bracketSequenceLength[i] += bracketSequenceLength[i - bracketSequenceLength] \ne 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">b</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">a</span><span class="mord mathit">c</span><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mord mathit">e</span><span class="mord mathit">t</span><span class="mord mathit" style="margin-right:0.05764em;">S</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.03588em;">q</span><span class="mord mathit">u</span><span class="mord mathit">e</span><span class="mord mathit">n</span><span class="mord mathit">c</span><span class="mord mathit">e</span><span class="mord mathit">L</span><span class="mord mathit">e</span><span class="mord mathit">n</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord mathit">t</span><span class="mord mathit">h</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mclose">]</span><span class="mbin">+</span><span class="mrel">=</span><span class="mord mathit">b</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">a</span><span class="mord mathit">c</span><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mord mathit">e</span><span class="mord mathit">t</span><span class="mord mathit" style="margin-right:0.05764em;">S</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.03588em;">q</span><span class="mord mathit">u</span><span class="mord mathit">e</span><span class="mord mathit">n</span><span class="mord mathit">c</span><span class="mord mathit">e</span><span class="mord mathit">L</span><span class="mord mathit">e</span><span class="mord mathit">n</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord mathit">t</span><span class="mord mathit">h</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mbin">âˆ’</span><span class="mord mathit">b</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">a</span><span class="mord mathit">c</span><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mord mathit">e</span><span class="mord mathit">t</span><span class="mord mathit" style="margin-right:0.05764em;">S</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.03588em;">q</span><span class="mord mathit">u</span><span class="mord mathit">e</span><span class="mord mathit">n</span><span class="mord mathit">c</span><span class="mord mathit">e</span><span class="mord mathit">L</span><span class="mord mathit">e</span><span class="mord mathit">n</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord mathit">t</span><span class="mord mathit">h</span><span class="mclose">]</span><span class="mrel">â‰ </span><span class="mord mathrm">0</span></span></span></span>ï¼Œæœ€å¤§çš„<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>b</mi><mi>r</mi><mi>a</mi><mi>c</mi><mi>k</mi><mi>e</mi><mi>t</mi><mi>S</mi><mi>e</mi><mi>q</mi><mi>u</mi><mi>e</mi><mi>n</mi><mi>c</mi><mi>e</mi><mi>L</mi><mi>e</mi><mi>n</mi><mi>g</mi><mi>t</mi><mi>h</mi><mo>[</mo><mi>i</mi><mo>]</mo></mrow><annotation encoding="application/x-tex">bracketSequenceLength[i]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">b</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">a</span><span class="mord mathit">c</span><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mord mathit">e</span><span class="mord mathit">t</span><span class="mord mathit" style="margin-right:0.05764em;">S</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.03588em;">q</span><span class="mord mathit">u</span><span class="mord mathit">e</span><span class="mord mathit">n</span><span class="mord mathit">c</span><span class="mord mathit">e</span><span class="mord mathit">L</span><span class="mord mathit">e</span><span class="mord mathit">n</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord mathit">t</span><span class="mord mathit">h</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mclose">]</span></span></span></span>å°±æ˜¯ç­”æ¡ˆ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;string&#125;</span> <span class="variable">s</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;number&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> longestValidParentheses = <span class="function"><span class="keyword">function</span>(<span class="params">s</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> n = s.length;</span><br><span class="line">    <span class="keyword">let</span> ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">let</span> bracketSequenceLength = <span class="keyword">new</span> <span class="built_in">Array</span>(n + <span class="number">5</span>).fill(<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">let</span> stack = <span class="keyword">new</span> <span class="built_in">Array</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; s.length; ++i) &#123;</span><br><span class="line">        <span class="keyword">let</span> bracket = s.charAt(i);</span><br><span class="line">        <span class="keyword">if</span>(bracket === <span class="string">&#x27;(&#x27;</span>) &#123;</span><br><span class="line">            stack.push(i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">if</span>(stack.length) &#123;</span><br><span class="line">                <span class="keyword">let</span> top = stack.pop();</span><br><span class="line">                bracketSequenceLength[i + <span class="number">1</span>] = i - top + <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">2</span>; i &lt;= s.length; ++i) &#123;</span><br><span class="line">        bracketSequenceLength[i] += bracketSequenceLength[i - bracketSequenceLength[i]];</span><br><span class="line">        ans = <span class="built_in">Math</span>.max(ans, bracketSequenceLength[i]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2020/11/11/kQlOqCtgocdyN7L.png" alt="" /></p><p>æ—¶é—´å¤æ‚åº¦<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><mi>n</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathit">n</span><span class="mclose">)</span></span></span></span>ï¼Œç©ºé—´å¤æ‚åº¦<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><mi>n</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathit">n</span><span class="mclose">)</span></span></span></span></p><h4 id="åŠ¨æ€è§„åˆ’"><a class="markdownIt-Anchor" href="#åŠ¨æ€è§„åˆ’"></a> åŠ¨æ€è§„åˆ’</h4><p>ä»¥<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>d</mi><mi>p</mi><mo>[</mo><mi>i</mi><mo>]</mo></mrow><annotation encoding="application/x-tex">dp[i]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">d</span><span class="mord mathit">p</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mclose">]</span></span></span></span>è¡¨ç¤ºä»¥<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.65952em;"></span><span class="strut bottom" style="height:0.65952em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">i</span></span></span></span>ä¸ºç»“å°¾çš„æœ€é•¿æ‹¬å·åºåˆ—ï¼Œé‚£ä¹ˆæ˜¾ç„¶<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>d</mi><mi>p</mi><mo>[</mo><mi>i</mi><mo>]</mo><mo>=</mo><mn>0</mn><mo separator="true">,</mo><mi>s</mi><mo>[</mo><mi>i</mi><mo>]</mo><mo>=</mo><msup><mo>=</mo><mrow><mi mathvariant="normal">â€²</mi></mrow></msup><msup><mo>(</mo><mrow><mi mathvariant="normal">â€²</mi></mrow></msup></mrow><annotation encoding="application/x-tex">dp[i] = 0, s[i]==&#x27;(&#x27;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.751892em;"></span><span class="strut bottom" style="height:1.001892em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">d</span><span class="mord mathit">p</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mclose">]</span><span class="mrel">=</span><span class="mord mathrm">0</span><span class="mpunct">,</span><span class="mord mathit">s</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mclose">]</span><span class="mrel">=</span><span class="mrel"><span class="mrel">=</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen"><span class="mopen">(</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span>ï¼Œå†æ¥æ€è€ƒ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>d</mi><mi>p</mi><mo>[</mo><mi>i</mi><mo>âˆ’</mo><mn>1</mn><mo>]</mo></mrow><annotation encoding="application/x-tex">dp[i - 1]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">d</span><span class="mord mathit">p</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mbin">âˆ’</span><span class="mord mathrm">1</span><span class="mclose">]</span></span></span></span>åˆ°<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>d</mi><mi>p</mi><mo>[</mo><mi>i</mi><mo>]</mo></mrow><annotation encoding="application/x-tex">dp[i]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">d</span><span class="mord mathit">p</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mclose">]</span></span></span></span>çš„é€’æ¨å…³ç³»ï¼Œå› ä¸ºæ‹¬å·åºåˆ—æ€»æ˜¯æˆå¯¹å‡ºç°çš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦æŸ¥çœ‹<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mo>[</mo><mi>i</mi><mo>âˆ’</mo><mn>1</mn><mo>]</mo></mrow><annotation encoding="application/x-tex">s[i-1]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">s</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mbin">âˆ’</span><span class="mord mathrm">1</span><span class="mclose">]</span></span></span></span>çš„æƒ…å†µï¼Œå¦‚ä¸‹ï¼š</p><ul><li><p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mo>[</mo><mi>i</mi><mo>âˆ’</mo><mn>1</mn><mo>]</mo><mo>=</mo><msup><mo>=</mo><mrow><mi mathvariant="normal">â€²</mi></mrow></msup><msup><mo>)</mo><mrow><mi mathvariant="normal">â€²</mi></mrow></msup></mrow><annotation encoding="application/x-tex">s[i - 1] == &#x27;)&#x27;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.751892em;"></span><span class="strut bottom" style="height:1.001892em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">s</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mbin">âˆ’</span><span class="mord mathrm">1</span><span class="mclose">]</span><span class="mrel">=</span><span class="mrel"><span class="mrel">=</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose"><span class="mclose">)</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span>ï¼Œé‚£ä¹ˆ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mo>[</mo><mi>i</mi><mo>âˆ’</mo><mn>1</mn><mo>]</mo></mrow><annotation encoding="application/x-tex">s[i - 1]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">s</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mbin">âˆ’</span><span class="mord mathrm">1</span><span class="mclose">]</span></span></span></span>å’Œ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mo>[</mo><mi>i</mi><mo>]</mo></mrow><annotation encoding="application/x-tex">s[i]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">s</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mclose">]</span></span></span></span>ä¸èƒ½é…å¯¹ï¼Œæˆ‘ä»¬éœ€è¦æŸ¥çœ‹å‰é¢çš„åºåˆ—</p><p><img src="https://i.loli.net/2020/11/11/JfwWAuQHZyRvVq3.png" alt="" /></p><p>å¦‚å›¾æ‰€ç¤ºï¼Œè½¬ç§»å…¬å¼ä¸º<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>d</mi><mi>p</mi><mo>[</mo><mi>i</mi><mo>]</mo><mo>=</mo><mi>d</mi><mi>p</mi><mo>[</mo><mi>i</mi><mo>âˆ’</mo><mn>1</mn><mo>]</mo><mo>+</mo><mn>2</mn><mo>+</mo><mi>d</mi><mi>p</mi><mo>[</mo><mi>i</mi><mo>âˆ’</mo><mi>d</mi><mi>p</mi><mo>[</mo><mi>i</mi><mo>âˆ’</mo><mn>1</mn><mo>]</mo><mo>âˆ’</mo><mn>2</mn><mo>]</mo><mo>(</mo><mi>s</mi><mo>[</mo><mi>i</mi><mo>âˆ’</mo><mi>d</mi><mi>p</mi><mo>[</mo><mi>i</mi><mo>âˆ’</mo><mn>1</mn><mo>]</mo><mo>âˆ’</mo><mn>1</mn><mo>]</mo><mo>=</mo><msup><mo>=</mo><mrow><mi mathvariant="normal">â€²</mi></mrow></msup><msup><mo>(</mo><mrow><mi mathvariant="normal">â€²</mi></mrow></msup><mo>)</mo></mrow><annotation encoding="application/x-tex">dp[i] = dp[i - 1] + 2 + dp[i - dp[i - 1] - 2](s[i - dp[i - 1] - 1] == &#x27;(&#x27;)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.751892em;"></span><span class="strut bottom" style="height:1.001892em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">d</span><span class="mord mathit">p</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mclose">]</span><span class="mrel">=</span><span class="mord mathit">d</span><span class="mord mathit">p</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mbin">âˆ’</span><span class="mord mathrm">1</span><span class="mclose">]</span><span class="mbin">+</span><span class="mord mathrm">2</span><span class="mbin">+</span><span class="mord mathit">d</span><span class="mord mathit">p</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mbin">âˆ’</span><span class="mord mathit">d</span><span class="mord mathit">p</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mbin">âˆ’</span><span class="mord mathrm">1</span><span class="mclose">]</span><span class="mbin">âˆ’</span><span class="mord mathrm">2</span><span class="mclose">]</span><span class="mopen">(</span><span class="mord mathit">s</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mbin">âˆ’</span><span class="mord mathit">d</span><span class="mord mathit">p</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mbin">âˆ’</span><span class="mord mathrm">1</span><span class="mclose">]</span><span class="mbin">âˆ’</span><span class="mord mathrm">1</span><span class="mclose">]</span><span class="mrel">=</span><span class="mrel"><span class="mrel">=</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen"><span class="mopen">(</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span></p></li><li><p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mo>[</mo><mi>i</mi><mo>âˆ’</mo><mn>1</mn><mo>]</mo><mo>=</mo><msup><mo>=</mo><mrow><mi mathvariant="normal">â€²</mi></mrow></msup><msup><mo>(</mo><mrow><mi mathvariant="normal">â€²</mi></mrow></msup></mrow><annotation encoding="application/x-tex">s[i - 1] == &#x27;(&#x27;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.751892em;"></span><span class="strut bottom" style="height:1.001892em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">s</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mbin">âˆ’</span><span class="mord mathrm">1</span><span class="mclose">]</span><span class="mrel">=</span><span class="mrel"><span class="mrel">=</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen"><span class="mopen">(</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span>ï¼Œé‚£ä¹ˆ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mo>[</mo><mi>i</mi><mo>âˆ’</mo><mn>1</mn><mo>]</mo></mrow><annotation encoding="application/x-tex">s[i - 1]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">s</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mbin">âˆ’</span><span class="mord mathrm">1</span><span class="mclose">]</span></span></span></span>å’Œ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mo>[</mo><mi>i</mi><mo>]</mo></mrow><annotation encoding="application/x-tex">s[i]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">s</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mclose">]</span></span></span></span>å¯ä»¥é…å¯¹</p><p><img src="https://i.loli.net/2020/11/11/arnQIuyHp7WgVXh.png" alt="" /></p><p>å¦‚å›¾æ‰€ç¤ºï¼Œè½¬ç§»å…¬å¼ä¸º<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>d</mi><mi>p</mi><mo>[</mo><mi>i</mi><mo>]</mo><mo>=</mo><mi>d</mi><mi>p</mi><mo>[</mo><mi>i</mi><mo>âˆ’</mo><mn>2</mn><mo>]</mo><mo>+</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">dp[i] = dp[i - 2] + 2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">d</span><span class="mord mathit">p</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mclose">]</span><span class="mrel">=</span><span class="mord mathit">d</span><span class="mord mathit">p</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mbin">âˆ’</span><span class="mord mathrm">2</span><span class="mclose">]</span><span class="mbin">+</span><span class="mord mathrm">2</span></span></span></span></p></li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">longestValidParentheses</span><span class="params">(<span class="built_in">string</span> s)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = s.length();</span><br><span class="line">        <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">        <span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; <span class="title">dp</span><span class="params">(n + <span class="number">5</span>, <span class="number">0</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">2</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">            <span class="keyword">if</span>(s.at(i - <span class="number">1</span>) == <span class="string">&#x27;(&#x27;</span>) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="keyword">if</span>(s.at(i - <span class="number">2</span>) == <span class="string">&#x27;(&#x27;</span>) &#123;</span><br><span class="line">                dp[i] = dp[i - <span class="number">2</span>] + <span class="number">2</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(i - dp[i - <span class="number">1</span>] - <span class="number">2</span> &gt;= <span class="number">0</span> &amp;&amp; s.at(i - dp[i - <span class="number">1</span>] - <span class="number">2</span>) == <span class="string">&#x27;(&#x27;</span>)&#123;</span><br><span class="line">                dp[i] = dp[i - <span class="number">1</span>] + <span class="number">2</span> + dp[i - dp[i - <span class="number">1</span>] - <span class="number">2</span>];</span><br><span class="line">            &#125;</span><br><span class="line">            ans = max(ans, dp[i]);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2020/11/11/jmYaHM1Dc6XRAnW.png" alt="" /></p><p>æ—¶é—´å¤æ‚åº¦<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><mi>n</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathit">n</span><span class="mclose">)</span></span></span></span>ï¼Œç©ºé—´å¤æ‚åº¦<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><mi>n</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathit">n</span><span class="mclose">)</span></span></span></span></p><h4 id="éå†æ³•"><a class="markdownIt-Anchor" href="#éå†æ³•"></a> éå†æ³•</h4><p>è¿˜å¯ä»¥åˆ©ç”¨æ‹¬å·åºåˆ—çš„æ€§è´¨ï¼Œç”¨ä¸¤ä¸ªå˜é‡è®°å½•<code>(</code>å’Œ<code>)</code>çš„æ•°é‡ï¼Œä»å·¦å‘å³éå†æ—¶ä¸€æ—¦<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi><mi>u</mi><mi>m</mi><msup><mo>(</mo><mrow><mi mathvariant="normal">â€²</mi></mrow></msup><msup><mo>(</mo><mrow><mi mathvariant="normal">â€²</mi></mrow></msup><mo>)</mo><mo>=</mo><mo>=</mo><mi>n</mi><mi>u</mi><mi>m</mi><msup><mo>(</mo><mrow><mi mathvariant="normal">â€²</mi></mrow></msup><msup><mo>)</mo><mrow><mi mathvariant="normal">â€²</mi></mrow></msup><mo>)</mo></mrow><annotation encoding="application/x-tex">num(&#x27;(&#x27;) == num(&#x27;)&#x27;)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.751892em;"></span><span class="strut bottom" style="height:1.001892em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">n</span><span class="mord mathit">u</span><span class="mord mathit">m</span><span class="mopen"><span class="mopen">(</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen"><span class="mopen">(</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mrel">=</span><span class="mrel">=</span><span class="mord mathit">n</span><span class="mord mathit">u</span><span class="mord mathit">m</span><span class="mopen"><span class="mopen">(</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose"><span class="mclose">)</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span>æ—¶ï¼Œå°±æ›´æ–°ç­”æ¡ˆï¼Œä¸€æ—¦<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi><mi>u</mi><mi>m</mi><msup><mo>(</mo><mrow><mi mathvariant="normal">â€²</mi></mrow></msup><msup><mo>)</mo><mrow><mi mathvariant="normal">â€²</mi></mrow></msup><mo>)</mo><mo>&gt;</mo><mi>n</mi><mi>u</mi><mi>m</mi><msup><mo>(</mo><mrow><mi mathvariant="normal">â€²</mi></mrow></msup><msup><mo>(</mo><mrow><mi mathvariant="normal">â€²</mi></mrow></msup><mo>)</mo></mrow><annotation encoding="application/x-tex">num(&#x27;)&#x27;) &gt; num(&#x27;(&#x27;)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.751892em;"></span><span class="strut bottom" style="height:1.001892em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">n</span><span class="mord mathit">u</span><span class="mord mathit">m</span><span class="mopen"><span class="mopen">(</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose"><span class="mclose">)</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mrel">&gt;</span><span class="mord mathit">n</span><span class="mord mathit">u</span><span class="mord mathit">m</span><span class="mopen"><span class="mopen">(</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen"><span class="mopen">(</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span>ï¼Œå°±è¯´æ˜å‡ºç°äº†ä¸åˆæ³•çš„æ‹¬å·ï¼Œå°†ä¸¤ä¸ªå˜é‡æ¸…é›¶ï¼Œä»å³å‘å·¦éå†æ—¶å°±è¦åè¿‡æ¥</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">longestValidParentheses</span>(<span class="params">self, s: str</span>) -&gt; int:</span></span><br><span class="line">        n = len(s)</span><br><span class="line">        left, right, ans = <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(n) :</span><br><span class="line">            <span class="keyword">if</span> s[i] == <span class="string">&#x27;(&#x27;</span> :</span><br><span class="line">                left += <span class="number">1</span></span><br><span class="line">            <span class="keyword">else</span> :</span><br><span class="line">                right += <span class="number">1</span></span><br><span class="line">            <span class="keyword">if</span> left == right :</span><br><span class="line">                ans = max(ans, <span class="number">2</span> * right)</span><br><span class="line">            <span class="keyword">if</span> right &gt; left :</span><br><span class="line">                left, right = <span class="number">0</span>, <span class="number">0</span></span><br><span class="line"></span><br><span class="line">        left, right = <span class="number">0</span>, <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(n - <span class="number">1</span>, <span class="number">-1</span>, <span class="number">-1</span>) :</span><br><span class="line">            <span class="keyword">if</span> s[i] == <span class="string">&#x27;(&#x27;</span> :</span><br><span class="line">                left += <span class="number">1</span></span><br><span class="line">            <span class="keyword">else</span> :</span><br><span class="line">                right += <span class="number">1</span></span><br><span class="line">            <span class="keyword">if</span> left == right :</span><br><span class="line">                ans = max(ans, <span class="number">2</span> * right)</span><br><span class="line">            <span class="keyword">if</span> right &lt; left :</span><br><span class="line">                left, right = <span class="number">0</span>, <span class="number">0</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> ans</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2020/11/11/J3uAweEb5PFsxYG.png" alt="" /></p><p>æ—¶é—´å¤æ‚åº¦<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><mi>n</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathit">n</span><span class="mclose">)</span></span></span></span>ï¼Œç©ºé—´å¤æ‚åº¦<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><mn>1</mn><mo>)</mo></mrow><annotation encoding="application/x-tex">O(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathrm">1</span><span class="mclose">)</span></span></span></span></p>]]></content>
    
    
    <summary type="html">&lt;h3 id=&quot;é¢˜æ„&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#é¢˜æ„&quot;&gt;&lt;/a&gt; é¢˜æ„&lt;/h3&gt;
&lt;h4 id=&quot;è‹±æ–‡é¢˜æ„&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#è‹±æ–‡é¢˜æ„&quot;&gt;&lt;/a&gt; è‹±æ–‡é¢˜æ„&lt;/h4&gt;
&lt;p&gt;&lt;img src=&quot;https://i.loli.net/2020/11/11/nUAZxGVpbtCPT4q.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="leetcode" scheme="https://christopherrliu.github.io/categories/leetcode/"/>
    
    
    <category term="C++" scheme="https://christopherrliu.github.io/tags/C/"/>
    
    <category term="åŠ¨æ€è§„åˆ’" scheme="https://christopherrliu.github.io/tags/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/"/>
    
    <category term="ç®—æ³•" scheme="https://christopherrliu.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
    <category term="é¢è¯•" scheme="https://christopherrliu.github.io/tags/%E9%9D%A2%E8%AF%95/"/>
    
    <category term="javascript" scheme="https://christopherrliu.github.io/tags/javascript/"/>
    
    <category term="æ ˆ" scheme="https://christopherrliu.github.io/tags/%E6%A0%88/"/>
    
  </entry>
  
  <entry>
    <title>æ¯å¤©ä¸€é“leetcode-swap-adjacent-in-lr-string</title>
    <link href="https://christopherrliu.github.io/2020/11/11/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode-swap-adjacent-in-lr-string/"/>
    <id>https://christopherrliu.github.io/2020/11/11/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode-swap-adjacent-in-lr-string/</id>
    <published>2020-11-11T05:31:38.000Z</published>
    <updated>2020-11-11T05:43:05.370Z</updated>
    
    <content type="html"><![CDATA[<h3 id="é¢˜æ„"><a class="markdownIt-Anchor" href="#é¢˜æ„"></a> é¢˜æ„</h3><h4 id="è‹±æ–‡é¢˜æ„"><a class="markdownIt-Anchor" href="#è‹±æ–‡é¢˜æ„"></a> è‹±æ–‡é¢˜æ„</h4><p><img src="https://i.loli.net/2020/11/11/ApnceNIPKuaRo2t.png" alt="" /></p><a id="more"></a><h4 id="ä¸­æ–‡é¢˜æ„"><a class="markdownIt-Anchor" href="#ä¸­æ–‡é¢˜æ„"></a> ä¸­æ–‡é¢˜æ„</h4><p><img src="https://i.loli.net/2020/11/11/keRC5XQ9vWDqiVS.png" alt="" /></p><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>æ ¹æ®é¢˜æ„ä¸éš¾å¾—å‡ºä»¥ä¸‹çš„æ€§è´¨ï¼š</p><ul><li>Rå’ŒLçš„ç›¸å¯¹ä½ç½®ä¸ä¼šæ”¹å˜</li><li>åœ¨æ»¡è¶³å‰ä¸€æ¡çš„æƒ…å†µä¸‹ï¼ŒRåªèƒ½å‘å‘å³ç§»åŠ¨ï¼ŒLåªèƒ½å‘å·¦ç§»åŠ¨</li></ul><p>é‚£ä¹ˆæˆ‘ä»¬å°†startå’Œendçš„Rã€Læ‰¾å‡ºæ¥ï¼Œä¾æ¬¡åˆ¤æ–­æ˜¯å¦æ»¡è¶³ä¸Šè¿°æ¡ä»¶å³å¯</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;string&#125;</span> <span class="variable">start</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;string&#125;</span> <span class="variable">end</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;boolean&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> canTransform = <span class="function"><span class="keyword">function</span>(<span class="params">start, end</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> rex = <span class="regexp">/[RL]/g</span>;</span><br><span class="line">    <span class="keyword">let</span> startMatches = [...start.matchAll(rex)];</span><br><span class="line">    <span class="keyword">let</span> endMatched = [...end.matchAll(rex)];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(startMatches.length != endMatched.length) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; startMatches.length; ++i) &#123;</span><br><span class="line">        <span class="keyword">if</span>(startMatches[i][<span class="number">0</span>] != endMatched[i][<span class="number">0</span>]) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(startMatches[i][<span class="number">0</span>] == <span class="string">&#x27;R&#x27;</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span>(endMatched[i].index &lt; startMatches[i].index) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">if</span>(endMatched[i].index &gt; startMatches[i].index) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2020/11/11/lqv2CehPkofdBb7.png" alt="" /></p><p>æ—¶é—´å¤æ‚åº¦<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><mi>n</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathit">n</span><span class="mclose">)</span></span></span></span></p>]]></content>
    
    
    <summary type="html">&lt;h3 id=&quot;é¢˜æ„&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#é¢˜æ„&quot;&gt;&lt;/a&gt; é¢˜æ„&lt;/h3&gt;
&lt;h4 id=&quot;è‹±æ–‡é¢˜æ„&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#è‹±æ–‡é¢˜æ„&quot;&gt;&lt;/a&gt; è‹±æ–‡é¢˜æ„&lt;/h4&gt;
&lt;p&gt;&lt;img src=&quot;https://i.loli.net/2020/11/11/ApnceNIPKuaRo2t.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="leetcode" scheme="https://christopherrliu.github.io/categories/leetcode/"/>
    
    
    <category term="ç®—æ³•" scheme="https://christopherrliu.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
    <category term="é¢è¯•" scheme="https://christopherrliu.github.io/tags/%E9%9D%A2%E8%AF%95/"/>
    
    <category term="javascript" scheme="https://christopherrliu.github.io/tags/javascript/"/>
    
  </entry>
  
  <entry>
    <title>æ¯å¤©ä¸€é“leetcode-cat-and-mouse</title>
    <link href="https://christopherrliu.github.io/2020/11/11/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode-cat-and-mouse/"/>
    <id>https://christopherrliu.github.io/2020/11/11/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode-cat-and-mouse/</id>
    <published>2020-11-11T02:42:38.000Z</published>
    <updated>2020-11-11T12:10:39.999Z</updated>
    
    <content type="html"><![CDATA[<h3 id="é¢˜æ„"><a class="markdownIt-Anchor" href="#é¢˜æ„"></a> é¢˜æ„</h3><h4 id="è‹±æ–‡é¢˜æ„"><a class="markdownIt-Anchor" href="#è‹±æ–‡é¢˜æ„"></a> è‹±æ–‡é¢˜æ„</h4><p><img src="https://i.loli.net/2020/11/11/LRoIV8e1DGlzZ7r.png" alt="" /></p><a id="more"></a><h4 id="ä¸­æ–‡é¢˜æ„"><a class="markdownIt-Anchor" href="#ä¸­æ–‡é¢˜æ„"></a> ä¸­æ–‡é¢˜æ„</h4><p><img src="https://i.loli.net/2020/11/11/TzGV45AFRYwBj7I.png" alt="" /></p><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>è¿™æ˜¯ä¸€ä¸ªéå¸¸ç»å…¸çš„åšå¼ˆé—®é¢˜ï¼Œé¦–å…ˆç”¨<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mi>t</mi><mi>a</mi><mi>t</mi><mi>e</mi><mo>[</mo><mi>i</mi><mo>]</mo><mo>[</mo><mi>j</mi><mo>]</mo><mo>[</mo><mi>k</mi><mo>]</mo></mrow><annotation encoding="application/x-tex">state[i][j][k]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">s</span><span class="mord mathit">t</span><span class="mord mathit">a</span><span class="mord mathit">t</span><span class="mord mathit">e</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mclose">]</span></span></span></span>è¡¨ç¤ºè€é¼ åœ¨<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.65952em;"></span><span class="strut bottom" style="height:0.65952em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">i</span></span></span></span>ç‚¹ï¼ŒçŒ«åœ¨<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>j</mi></mrow><annotation encoding="application/x-tex">j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.65952em;"></span><span class="strut bottom" style="height:0.85396em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.05724em;">j</span></span></span></span>ç‚¹ï¼Œç°åœ¨èµ°äº†<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.69444em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.03148em;">k</span></span></span></span>æ­¥çš„çŠ¶æ€ï¼Œæ ¹æ®é¢˜æ„ä¸éš¾å¾—å‡ºï¼š</p><ul><li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mi>t</mi><mi>a</mi><mi>t</mi><mi>e</mi><mo>[</mo><mi>i</mi><mo>]</mo><mo>[</mo><mi>i</mi><mo>]</mo><mo>[</mo><mi>k</mi><mo>]</mo><mo>=</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">state[i][i][k] = 2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">s</span><span class="mord mathit">t</span><span class="mord mathit">a</span><span class="mord mathit">t</span><span class="mord mathit">e</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mclose">]</span><span class="mrel">=</span><span class="mord mathrm">2</span></span></span></span></li><li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mi>t</mi><mi>a</mi><mi>t</mi><mi>e</mi><mo>[</mo><mn>0</mn><mo>]</mo><mo>[</mo><mi>j</mi><mo>]</mo><mo>[</mo><mi>k</mi><mo>]</mo><mo>=</mo><mn>1</mn><mo>(</mo><mi>j</mi><mo>â‰ </mo><mn>0</mn><mo>)</mo></mrow><annotation encoding="application/x-tex">state[0][j][k] = 1(j \ne 0)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">s</span><span class="mord mathit">t</span><span class="mord mathit">a</span><span class="mord mathit">t</span><span class="mord mathit">e</span><span class="mopen">[</span><span class="mord mathrm">0</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mclose">]</span><span class="mrel">=</span><span class="mord mathrm">1</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mrel">â‰ </span><span class="mord mathrm">0</span><span class="mclose">)</span></span></span></span></li></ul><p>ç„¶åå°±kè¯¥è€ƒè™‘å¦‚ä½•è½¬ç§»çŠ¶æ€ï¼Œè¿™é‡Œåˆ†ä¸ºä¸¤ç§æ€è€ƒæ–¹å¼ï¼š</p><h5 id="top-down"><a class="markdownIt-Anchor" href="#top-down"></a> top down</h5><p>å³è‡ªé¡¶å‘ä¸‹çš„æ–¹å¼ï¼Œé‚£ä¹ˆåˆå§‹çŠ¶æ€æ˜¾ç„¶ä¸º<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mi>t</mi><mi>a</mi><mi>t</mi><mi>e</mi><mo>[</mo><mn>1</mn><mo>]</mo><mo>[</mo><mn>2</mn><mo>]</mo><mo>[</mo><mn>1</mn><mo>]</mo></mrow><annotation encoding="application/x-tex">state[1][2][1]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">s</span><span class="mord mathit">t</span><span class="mord mathit">a</span><span class="mord mathit">t</span><span class="mord mathit">e</span><span class="mopen">[</span><span class="mord mathrm">1</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathrm">2</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathrm">1</span><span class="mclose">]</span></span></span></span>ï¼Œå¯¹äºæŸä¸ªçŠ¶æ€<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mi>t</mi><mi>a</mi><mi>t</mi><mi>e</mi><mo>[</mo><mi>i</mi><mo>]</mo><mo>[</mo><mi>j</mi><mo>]</mo><mo>[</mo><mi>k</mi><mo>]</mo></mrow><annotation encoding="application/x-tex">state[i][j][k]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">s</span><span class="mord mathit">t</span><span class="mord mathit">a</span><span class="mord mathit">t</span><span class="mord mathit">e</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mclose">]</span></span></span></span>ï¼Œåˆ†ä¸ºå‡ ç§æƒ…å†µï¼š</p><ul><li><p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>k</mi><mo>&gt;</mo><mn>2</mn><mi>n</mi></mrow><annotation encoding="application/x-tex">k &gt; 2n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.73354em;vertical-align:-0.0391em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mrel">&gt;</span><span class="mord mathrm">2</span><span class="mord mathit">n</span></span></span></span>ï¼Œå› ä¸ºçŠ¶æ€çŒ«å’Œè€é¼ èµ°çš„æ­¥æ•°æœ€å¤šåªæœ‰<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>2</mn><mi>n</mi></mrow><annotation encoding="application/x-tex">2n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.64444em;"></span><span class="strut bottom" style="height:0.64444em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathrm">2</span><span class="mord mathit">n</span></span></span></span>æ­¥ï¼Œä¸€æ—¦è¶…å‡ºå°±æ˜¯å¹³å±€äº†</p></li><li><p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>i</mi><mo>=</mo><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">i == 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.65952em;"></span><span class="strut bottom" style="height:0.65952em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">i</span><span class="mrel">=</span><span class="mrel">=</span><span class="mord mathrm">0</span></span></span></span>ï¼Œè€é¼ è·èƒœï¼Œè¿”å›1</p></li><li><p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>i</mi><mo>=</mo><mo>=</mo><mi>j</mi></mrow><annotation encoding="application/x-tex">i == j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.65952em;"></span><span class="strut bottom" style="height:0.85396em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord mathit">i</span><span class="mrel">=</span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.05724em;">j</span></span></span></span>ï¼ŒçŒ«è·èƒœï¼Œè¿”å›2</p></li><li><p>è½®åˆ°è€é¼ èµ°ï¼Œéå†æ‰€æœ‰å­çŠ¶æ€ï¼š</p><ul><li>æœ‰å­çŠ¶æ€è¿”å›1ï¼Œå› ä¸ºæ˜¯ä»¥æœ€ä½³çŠ¶æ€å‚ä¸æ¸¸æˆï¼Œæ‰€ä»¥å½“å‰çŠ¶æ€ä¹Ÿæ˜¯å¿…èƒœæ€ï¼Œè¿”å›1</li><li>æ²¡æœ‰è¿”å›1çš„å­çŠ¶æ€ï¼Œä½†æ˜¯æœ‰è¿”å›0çš„å­çŠ¶æ€ï¼Œæ—¢ç„¶èµ¢ä¸äº†äº†ï¼Œåªèƒ½ä¿å¹³å±€ï¼Œè¿”å›0</li><li>æ‰€æœ‰çŠ¶æ€å…¨è¿”å›2ï¼Œå¿…è¾“ï¼Œè¿”å›2</li></ul></li><li><p>è½®åˆ°çŒ«èµ°ï¼Œæƒ…å†µä¸è€é¼ ç›¸ä¼¼</p></li></ul><p>åˆ†ææ¸…æ¥šä¹‹åï¼Œä¸éš¾å†™å‡ºè®°å¿†åŒ–æœç´¢çš„ä»£ç ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;number[][]&#125;</span> <span class="variable">graph</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;number&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> catMouseGame = <span class="function"><span class="keyword">function</span>(<span class="params">graph</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> n = graph.length;</span><br><span class="line">    <span class="keyword">let</span> state = <span class="keyword">new</span> <span class="built_in">Array</span>(n + <span class="number">1</span>)</span><br><span class="line">        .fill(<span class="number">0</span>)</span><br><span class="line">        .map(<span class="function"><span class="params">_</span> =&gt;</span> </span><br><span class="line">            <span class="keyword">new</span> <span class="built_in">Array</span>(n + <span class="number">1</span>)</span><br><span class="line">            .fill(<span class="number">0</span>)</span><br><span class="line">            .map(<span class="function"><span class="params">_</span> =&gt;</span> </span><br><span class="line">                <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">2</span> * n + <span class="number">1</span>)</span><br><span class="line">                .fill(<span class="number">-1</span>)));</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">const</span> stimulate = <span class="function">(<span class="params">mouseLocation, catLocation, steps</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(steps &gt; <span class="number">2</span> * n) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(state[mouseLocation][catLocation][steps] != <span class="number">-1</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> state[mouseLocation][catLocation][steps];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(mouseLocation === <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> state[mouseLocation][catLocation][steps] = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(mouseLocation === catLocation) &#123;</span><br><span class="line">            <span class="keyword">return</span> state[mouseLocation][catLocation][steps] = <span class="number">2</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(steps % <span class="number">2</span> === <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">let</span> res = <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">let</span> nextMouseLocation <span class="keyword">of</span> graph[mouseLocation]) &#123;</span><br><span class="line">                <span class="keyword">let</span> curRes = stimulate(nextMouseLocation, catLocation, steps + <span class="number">1</span>);</span><br><span class="line">                <span class="keyword">if</span>(curRes === <span class="number">1</span>) &#123;</span><br><span class="line">                    <span class="keyword">return</span> state[mouseLocation][catLocation][steps] = <span class="number">1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                res = <span class="built_in">Math</span>.min(res, curRes);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> state[mouseLocation][catLocation][steps] = res;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">let</span> res = <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">let</span> nextCatLocation <span class="keyword">of</span> graph[catLocation]) &#123;</span><br><span class="line">                <span class="keyword">if</span>(nextCatLocation === <span class="number">0</span>) &#123;</span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">let</span> curRes = stimulate(mouseLocation, nextCatLocation, steps + <span class="number">1</span>);</span><br><span class="line">                <span class="keyword">if</span>(curRes === <span class="number">2</span>) &#123;</span><br><span class="line">                    <span class="keyword">return</span> state[mouseLocation][catLocation][steps] = <span class="number">2</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                res = <span class="built_in">Math</span>.min(res, curRes);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> state[mouseLocation][catLocation][steps] = res;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> stimulate(<span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2020/11/11/Otr3uYQ8o7TJ5f4.png" alt="" /></p><p>æ—¶é—´å¤æ‚åº¦<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><msup><mi>n</mi><mn>3</mn></msup><mo>)</mo></mrow><annotation encoding="application/x-tex">O(n^3)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8141079999999999em;"></span><span class="strut bottom" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">n</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathrm">3</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span>ï¼Œç©ºé—´å¤æ‚åº¦<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><msup><mi>n</mi><mn>3</mn></msup><mo>)</mo></mrow><annotation encoding="application/x-tex">O(n^3)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8141079999999999em;"></span><span class="strut bottom" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">n</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathrm">3</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span></p><h4 id="bottom-up"><a class="markdownIt-Anchor" href="#bottom-up"></a> bottom up</h4><p>å³è‡ªåº•å‘ä¸Šçš„æ–¹æ³•ï¼Œå¯¹äºæŸä¸ªçŠ¶æ€<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mi>t</mi><mi>a</mi><mi>t</mi><mi>e</mi><mo>[</mo><mi>i</mi><mo>]</mo><mo>[</mo><mi>j</mi><mo>]</mo><mo>[</mo><mi>k</mi><mo>]</mo></mrow><annotation encoding="application/x-tex">state[i][j][k]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">s</span><span class="mord mathit">t</span><span class="mord mathit">a</span><span class="mord mathit">t</span><span class="mord mathit">e</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mclose">]</span></span></span></span>ï¼Œå®ƒçš„å‰ä¸€ä¸ªçŠ¶æ€<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mi>t</mi><mi>a</mi><mi>t</mi><mi>e</mi><mo>[</mo><mi>p</mi><mi>i</mi><mo>]</mo><mo>[</mo><mi>p</mi><mi>j</mi><mo>]</mo><mo>[</mo><mi>p</mi><mi>k</mi><mo>]</mo></mrow><annotation encoding="application/x-tex">state[pi][pj][pk]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">s</span><span class="mord mathit">t</span><span class="mord mathit">a</span><span class="mord mathit">t</span><span class="mord mathit">e</span><span class="mopen">[</span><span class="mord mathit">p</span><span class="mord mathit">i</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathit">p</span><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathit">p</span><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mclose">]</span></span></span></span>å¯ç”±å½“å‰çŠ¶æ€æ¨åˆ°å¾—æ¥ï¼š</p><ul><li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mi>t</mi><mi>a</mi><mi>t</mi><mi>e</mi><mo>[</mo><mi>i</mi><mo>]</mo><mo>[</mo><mi>j</mi><mo>]</mo><mo>[</mo><mi>k</mi><mo>]</mo></mrow><annotation encoding="application/x-tex">state[i][j][k]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">s</span><span class="mord mathit">t</span><span class="mord mathit">a</span><span class="mord mathit">t</span><span class="mord mathit">e</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mclose">]</span></span></span></span>å¯¹<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mi>t</mi><mi>a</mi><mi>t</mi><mi>e</mi><mo>[</mo><mi>p</mi><mi>i</mi><mo>]</mo><mo>[</mo><mi>p</mi><mi>j</mi><mo>]</mo><mo>[</mo><mi>p</mi><mi>k</mi><mo>]</mo></mrow><annotation encoding="application/x-tex">state[pi][pj][pk]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">s</span><span class="mord mathit">t</span><span class="mord mathit">a</span><span class="mord mathit">t</span><span class="mord mathit">e</span><span class="mopen">[</span><span class="mord mathit">p</span><span class="mord mathit">i</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathit">p</span><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathit">p</span><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mclose">]</span></span></span></span>æ¥è¯´æ˜¯èƒœæ€ï¼Œé‚£ä¹ˆ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mi>t</mi><mi>a</mi><mi>t</mi><mi>e</mi><mo>[</mo><mi>p</mi><mi>i</mi><mo>]</mo><mo>[</mo><mi>p</mi><mi>j</mi><mo>]</mo><mo>[</mo><mi>p</mi><mi>k</mi><mo>]</mo></mrow><annotation encoding="application/x-tex">state[pi][pj][pk]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">s</span><span class="mord mathit">t</span><span class="mord mathit">a</span><span class="mord mathit">t</span><span class="mord mathit">e</span><span class="mopen">[</span><span class="mord mathit">p</span><span class="mord mathit">i</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathit">p</span><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathit">p</span><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mclose">]</span></span></span></span>ä¹Ÿæ˜¯èƒœæ€</li><li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mi>t</mi><mi>a</mi><mi>t</mi><mi>e</mi><mo>[</mo><mi>i</mi><mo>]</mo><mo>[</mo><mi>j</mi><mo>]</mo><mo>[</mo><mi>k</mi><mo>]</mo></mrow><annotation encoding="application/x-tex">state[i][j][k]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">s</span><span class="mord mathit">t</span><span class="mord mathit">a</span><span class="mord mathit">t</span><span class="mord mathit">e</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mclose">]</span></span></span></span>å¯¹<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mi>t</mi><mi>a</mi><mi>t</mi><mi>e</mi><mo>[</mo><mi>p</mi><mi>i</mi><mo>]</mo><mo>[</mo><mi>p</mi><mi>j</mi><mo>]</mo><mo>[</mo><mi>p</mi><mi>k</mi><mo>]</mo></mrow><annotation encoding="application/x-tex">state[pi][pj][pk]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">s</span><span class="mord mathit">t</span><span class="mord mathit">a</span><span class="mord mathit">t</span><span class="mord mathit">e</span><span class="mopen">[</span><span class="mord mathit">p</span><span class="mord mathit">i</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathit">p</span><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathit">p</span><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mclose">]</span></span></span></span>æ¥è¯´æ˜¯è´Ÿæ€ï¼Œé‚£ä¹ˆåªæœ‰å½“<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mi>t</mi><mi>a</mi><mi>t</mi><mi>e</mi><mo>[</mo><mi>p</mi><mi>i</mi><mo>]</mo><mo>[</mo><mi>p</mi><mi>j</mi><mo>]</mo><mo>[</mo><mi>p</mi><mi>k</mi><mo>]</mo></mrow><annotation encoding="application/x-tex">state[pi][pj][pk]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">s</span><span class="mord mathit">t</span><span class="mord mathit">a</span><span class="mord mathit">t</span><span class="mord mathit">e</span><span class="mopen">[</span><span class="mord mathit">p</span><span class="mord mathit">i</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathit">p</span><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathit">p</span><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mclose">]</span></span></span></span>çš„æ‰€æœ‰åç»§çŠ¶æ€éƒ½ä¸ºè´Ÿæ€ï¼Œ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mi>t</mi><mi>a</mi><mi>t</mi><mi>e</mi><mo>[</mo><mi>p</mi><mi>i</mi><mo>]</mo><mo>[</mo><mi>p</mi><mi>j</mi><mo>]</mo><mo>[</mo><mi>p</mi><mi>k</mi><mo>]</mo></mrow><annotation encoding="application/x-tex">state[pi][pj][pk]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">s</span><span class="mord mathit">t</span><span class="mord mathit">a</span><span class="mord mathit">t</span><span class="mord mathit">e</span><span class="mopen">[</span><span class="mord mathit">p</span><span class="mord mathit">i</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathit">p</span><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathit">p</span><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mclose">]</span></span></span></span>æ‰ä¼šæ˜¯è´Ÿæ€ï¼Œå¦åˆ™å°±æ˜¯å¹³å±€ï¼Œæˆ‘ä»¬ç”¨ä¸€ä¸ªæ•°ç»„<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>d</mi><mi>e</mi><mi>g</mi><mi>r</mi><mi>e</mi><mi>e</mi></mrow><annotation encoding="application/x-tex">degree</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord mathit">d</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">e</span><span class="mord mathit">e</span></span></span></span>è®°å½•æŸä¸ªçŠ¶æ€çš„åç»§çŠ¶æ€æ•°ç›®ï¼Œæ¯æ¬¡é‡åˆ°è¿™ç§æƒ…å†µå°±é€’å‡ï¼Œ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>d</mi><mi>e</mi><mi>g</mi><mi>r</mi><mi>e</mi><mi>e</mi></mrow><annotation encoding="application/x-tex">degree</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord mathit">d</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">e</span><span class="mord mathit">e</span></span></span></span>ä¸º0ï¼Œå½“å‰çŠ¶æ€å°±æ˜¯è´Ÿæ€ã€‚</li></ul><p>æˆ‘ä»¬ç”¨ä¸€ä¸ªé˜Ÿåˆ—å­˜å‚¨æ‰€æœ‰çš„èƒœæ€å’Œè´Ÿæ€ï¼Œå–å‡ºé˜Ÿé¦–å…ƒç´ æ›´æ–°çˆ¶è¾ˆçŠ¶æ€ï¼Œè‹¥å¾—åˆ°æ–°çš„èƒœæ€å’Œè´Ÿæ€å°±å…¥é˜Ÿï¼Œè¿­ä»£å¤„ç†ç›´è‡³é˜Ÿåˆ—ä¸ºç©ºï¼›æ²¡æœ‰æ›´æ–°åˆ°çš„å°±æ˜¯å¹³å±€</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;string&#125;</span> <span class="variable">s</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;number&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> catMouseGame = <span class="function"><span class="keyword">function</span>(<span class="params">graph</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> n = graph.length;</span><br><span class="line">    <span class="keyword">let</span> ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">let</span> degree = <span class="keyword">new</span> <span class="built_in">Array</span>(n)</span><br><span class="line">        .fill(<span class="number">0</span>)</span><br><span class="line">        .map(<span class="function"><span class="params">_</span> =&gt;</span> <span class="keyword">new</span> <span class="built_in">Array</span>(n)</span><br><span class="line">            .fill(<span class="number">0</span>)</span><br><span class="line">            .map(<span class="function"><span class="params">_</span> =&gt;</span> </span><br><span class="line">                <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">2</span>)</span><br><span class="line">                .fill(<span class="number">0</span>)));</span><br><span class="line">    <span class="keyword">let</span> state = <span class="keyword">new</span> <span class="built_in">Array</span>(n)</span><br><span class="line">        .fill(<span class="number">0</span>)</span><br><span class="line">        .map(<span class="function"><span class="params">_</span> =&gt;</span> </span><br><span class="line">            <span class="keyword">new</span> <span class="built_in">Array</span>(n)</span><br><span class="line">            .fill(<span class="number">0</span>)</span><br><span class="line">            .map(<span class="function"><span class="params">_</span> =&gt;</span> </span><br><span class="line">                <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">2</span>)</span><br><span class="line">                .fill(<span class="number">0</span>)));</span><br><span class="line">    <span class="keyword">let</span> queue = <span class="keyword">new</span> <span class="built_in">Array</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; n; ++j) &#123;</span><br><span class="line">            degree[i][j][<span class="number">0</span>] = graph[i].length;</span><br><span class="line">            degree[i][j][<span class="number">1</span>] = graph[j].length;</span><br><span class="line">            <span class="keyword">if</span>(graph[j].indexOf(<span class="number">0</span>) != <span class="number">-1</span>) &#123;</span><br><span class="line">                degree[i][j][<span class="number">1</span>]--;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">let</span> step = <span class="number">0</span>; step &lt; <span class="number">2</span>; ++step) &#123;</span><br><span class="line">            state[<span class="number">0</span>][i][step] = <span class="number">1</span>;</span><br><span class="line">            queue.push([<span class="number">0</span>, i, step]);</span><br><span class="line">            <span class="keyword">if</span>(i &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                state[i][i][step] = <span class="number">2</span>;</span><br><span class="line">                queue.push([i, i, step]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(queue.length) &#123;</span><br><span class="line">        <span class="keyword">let</span> [mouse, cat, step] = queue.shift();</span><br><span class="line">        <span class="keyword">let</span> [preMouse, preCat, preStep] = [mouse, cat, (step - <span class="number">1</span> + <span class="number">2</span>) % <span class="number">2</span>];</span><br><span class="line">        <span class="keyword">let</span> [winState, loseState] = step === <span class="number">0</span> ? [<span class="number">2</span>, <span class="number">1</span>] : [<span class="number">1</span>, <span class="number">2</span>];</span><br><span class="line">        <span class="keyword">let</span> startPoint = step === <span class="number">0</span> ? cat : mouse;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">let</span> next <span class="keyword">of</span> graph[startPoint]) &#123;</span><br><span class="line">            step === <span class="number">0</span> ? preCat = next : preMouse = next; </span><br><span class="line">            <span class="keyword">if</span>(preCat == <span class="number">0</span> || state[preMouse][preCat][preStep] != <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(state[mouse][cat][step] === loseState) &#123;</span><br><span class="line">                degree[preMouse][preCat][preStep]--;</span><br><span class="line">                <span class="keyword">if</span>(degree[preMouse][preCat][preStep] === <span class="number">0</span>) &#123;</span><br><span class="line">                    state[preMouse][preCat][preStep] = loseState;</span><br><span class="line">                    queue.push([preMouse, preCat, preStep]);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="keyword">if</span>(preMouse == <span class="number">3</span> &amp;&amp; preCat == <span class="number">2</span>) <span class="built_in">console</span>.log(mouse, cat, step);</span><br><span class="line">                state[preMouse][preCat][preStep] = winState;</span><br><span class="line">                queue.push([preMouse, preCat, preStep]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> state[<span class="number">1</span>][<span class="number">2</span>][<span class="number">0</span>];</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2020/11/11/rdI2tojui36xNm9.png" alt="" /></p>]]></content>
    
    
    <summary type="html">&lt;h3 id=&quot;é¢˜æ„&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#é¢˜æ„&quot;&gt;&lt;/a&gt; é¢˜æ„&lt;/h3&gt;
&lt;h4 id=&quot;è‹±æ–‡é¢˜æ„&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#è‹±æ–‡é¢˜æ„&quot;&gt;&lt;/a&gt; è‹±æ–‡é¢˜æ„&lt;/h4&gt;
&lt;p&gt;&lt;img src=&quot;https://i.loli.net/2020/11/11/LRoIV8e1DGlzZ7r.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="leetcode" scheme="https://christopherrliu.github.io/categories/leetcode/"/>
    
    
    <category term="ç®—æ³•" scheme="https://christopherrliu.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
    <category term="é¢è¯•" scheme="https://christopherrliu.github.io/tags/%E9%9D%A2%E8%AF%95/"/>
    
    <category term="javascript" scheme="https://christopherrliu.github.io/tags/javascript/"/>
    
    <category term="è®°å¿†åŒ–æœç´¢" scheme="https://christopherrliu.github.io/tags/%E8%AE%B0%E5%BF%86%E5%8C%96%E6%90%9C%E7%B4%A2/"/>
    
    <category term="minmax" scheme="https://christopherrliu.github.io/tags/minmax/"/>
    
  </entry>
  
  <entry>
    <title>æ¯å¤©ä¸€é“leetcode-super-washing-machines</title>
    <link href="https://christopherrliu.github.io/2020/11/10/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode-super-washing-machines/"/>
    <id>https://christopherrliu.github.io/2020/11/10/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode-super-washing-machines/</id>
    <published>2020-11-10T12:45:59.000Z</published>
    <updated>2020-11-10T13:08:57.583Z</updated>
    
    <content type="html"><![CDATA[<h3 id="é¢˜æ„"><a class="markdownIt-Anchor" href="#é¢˜æ„"></a> é¢˜æ„</h3><h4 id="è‹±æ–‡é¢˜æ„"><a class="markdownIt-Anchor" href="#è‹±æ–‡é¢˜æ„"></a> è‹±æ–‡é¢˜æ„</h4><p><img src="https://i.loli.net/2020/11/10/wMGZsABjD7vEopx.png" alt="" /></p><a id="more"></a><h4 id="ä¸­æ–‡é¢˜æ„"><a class="markdownIt-Anchor" href="#ä¸­æ–‡é¢˜æ„"></a> ä¸­æ–‡é¢˜æ„</h4><p><img src="https://i.loli.net/2020/11/10/DFIc9eBMKZStxzo.png" alt="" /></p><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>æ˜ç¡®é—®é¢˜çš„æœ¬è´¨ï¼Œé¦–å…ˆè¡£æœçš„æ•°é‡å¿…é¡»ä¸º<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.43056em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">n</span></span></span></span>çš„æ•´æ•°å€ï¼Œå¦åˆ™æ— æ³•ç§»åŠ¨ä½¿æ•°é‡ç›¸ç­‰ï¼Œç„¶åæˆ‘ä»¬æŠŠæ‰€æœ‰å…ƒç´ ä¸å‡å€¼åšå·®å¾—åˆ°éœ€è¦ç§»åŠ¨çš„æ•°ç›®ï¼Œè®°ä¸ºæ•°ç»„<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi><mi>e</mi><mi>e</mi><mi>d</mi><mi>M</mi><mi>o</mi><mi>v</mi><mi>e</mi></mrow><annotation encoding="application/x-tex">needMove</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.69444em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">n</span><span class="mord mathit">e</span><span class="mord mathit">e</span><span class="mord mathit">d</span><span class="mord mathit" style="margin-right:0.10903em;">M</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right:0.03588em;">v</span><span class="mord mathit">e</span></span></span></span>ã€‚ç°åœ¨è€ƒè™‘ä»å·¦åˆ°å³ç¬¬ä¸€ä¸ª<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi><mi>e</mi><mi>e</mi><mi>d</mi><mi>M</mi><mi>o</mi><mi>v</mi><mi>e</mi></mrow><annotation encoding="application/x-tex">needMove</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.69444em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">n</span><span class="mord mathit">e</span><span class="mord mathit">e</span><span class="mord mathit">d</span><span class="mord mathit" style="margin-right:0.10903em;">M</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right:0.03588em;">v</span><span class="mord mathit">e</span></span></span></span>ä¸ä¸º<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>0</mn></mrow><annotation encoding="application/x-tex">0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.64444em;"></span><span class="strut bottom" style="height:0.64444em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathrm">0</span></span></span></span>çš„æ´—è¡£æœºï¼Œè‹¥<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi><mi>e</mi><mi>e</mi><mi>d</mi><mi>M</mi><mi>o</mi><mi>v</mi><mi>e</mi></mrow><annotation encoding="application/x-tex">needMove</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.69444em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">n</span><span class="mord mathit">e</span><span class="mord mathit">e</span><span class="mord mathit">d</span><span class="mord mathit" style="margin-right:0.10903em;">M</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right:0.03588em;">v</span><span class="mord mathit">e</span></span></span></span>ä¸ºæ­£ï¼Œæ ¹æ®è´ªå¿ƒçš„æƒ³æ³•ï¼Œå®ƒè‚¯å®šè¦å¾€å³æ–¹ç§»åŠ¨è¡£æœï¼Œä¸”éœ€è¦<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi><mi>e</mi><mi>e</mi><mi>d</mi><mi>M</mi><mi>o</mi><mi>v</mi><mi>e</mi></mrow><annotation encoding="application/x-tex">needMove</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.69444em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">n</span><span class="mord mathit">e</span><span class="mord mathit">e</span><span class="mord mathit">d</span><span class="mord mathit" style="margin-right:0.10903em;">M</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right:0.03588em;">v</span><span class="mord mathit">e</span></span></span></span>æ­¥ï¼›è‹¥ä¸ºè´Ÿï¼Œåˆ™éœ€è¦å³æ–¹ç§»å…¥ï¼Œä¹Ÿéœ€è¦<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi><mi>e</mi><mi>e</mi><mi>d</mi><mi>M</mi><mi>o</mi><mi>v</mi><mi>e</mi></mrow><annotation encoding="application/x-tex">needMove</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.69444em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">n</span><span class="mord mathit">e</span><span class="mord mathit">e</span><span class="mord mathit">d</span><span class="mord mathit" style="margin-right:0.10903em;">M</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right:0.03588em;">v</span><span class="mord mathit">e</span></span></span></span>æ­¥ï¼›ç§»åŠ¨å®Œåæ›´æ–°ä¸€ä¸‹åŸæ•°ç»„å’Œ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi><mi>e</mi><mi>e</mi><mi>d</mi><mi>M</mi><mi>o</mi><mi>v</mi><mi>e</mi></mrow><annotation encoding="application/x-tex">needMove</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.69444em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">n</span><span class="mord mathit">e</span><span class="mord mathit">e</span><span class="mord mathit">d</span><span class="mord mathit" style="margin-right:0.10903em;">M</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right:0.03588em;">v</span><span class="mord mathit">e</span></span></span></span>ï¼Œå†ç»§ç»­éå†ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°ä¸€ä¸ªæ­¥æ•°çš„æ•°ç»„<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mi>t</mi><mi>e</mi><mi>p</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">steps</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.61508em;"></span><span class="strut bottom" style="height:0.80952em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord mathit">s</span><span class="mord mathit">t</span><span class="mord mathit">e</span><span class="mord mathit">p</span><span class="mord mathit">s</span></span></span></span>ï¼Œå¦‚æœä¸€æ¬¡åªèƒ½ç§»åŠ¨ä¸€ä¸ªæ´—è¡£æœºçš„è¡£æœçš„è¯ï¼Œéœ€è¦çš„æ­¥æ•°å°±æ˜¯<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mi>t</mi><mi>e</mi><mi>p</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">steps</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.61508em;"></span><span class="strut bottom" style="height:0.80952em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord mathit">s</span><span class="mord mathit">t</span><span class="mord mathit">e</span><span class="mord mathit">p</span><span class="mord mathit">s</span></span></span></span>çš„å’Œï¼Œä½†æ˜¯è¿™ä¸ªé¢˜æ˜¯å¯ä»¥å¹¶è¡Œçš„ï¼Œå› æ­¤ç­”æ¡ˆå°±æ˜¯<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mi>t</mi><mi>e</mi><mi>p</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">steps</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.61508em;"></span><span class="strut bottom" style="height:0.80952em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord mathit">s</span><span class="mord mathit">t</span><span class="mord mathit">e</span><span class="mord mathit">p</span><span class="mord mathit">s</span></span></span></span>çš„æœ€å¤§å€¼</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">findMinMoves</span>(<span class="params">self, machines: List[int]</span>) -&gt; int:</span></span><br><span class="line">        n = len(machines)</span><br><span class="line">        target, b = divmod(sum(machines), n)</span><br><span class="line">        <span class="keyword">if</span> b != <span class="number">0</span>: </span><br><span class="line">            <span class="keyword">return</span> <span class="number">-1</span></span><br><span class="line">        steps = [<span class="number">0</span> <span class="keyword">for</span> i <span class="keyword">in</span> range(n)]</span><br><span class="line">        ans = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(n - <span class="number">1</span>):</span><br><span class="line">            <span class="keyword">if</span> machines[i] &gt; target:</span><br><span class="line">                steps[i] += machines[i] - target</span><br><span class="line">                machines[i + <span class="number">1</span>] += machines[i] - target</span><br><span class="line">                machines[i] = target</span><br><span class="line">                ans = max(ans, steps[i])</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                steps[i + <span class="number">1</span>] = target - machines[i]</span><br><span class="line">                machines[i + <span class="number">1</span>] -= target - machines[i]</span><br><span class="line">                machines[i] = target</span><br><span class="line">                ans = max(ans, steps[i + <span class="number">1</span>])</span><br><span class="line">        <span class="keyword">return</span> ans</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2020/11/10/5zUiunCqdcZXKrV.png" alt="" /></p><p>æ—¶é—´å¤æ‚åº¦<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><mi>n</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathit">n</span><span class="mclose">)</span></span></span></span></p>]]></content>
    
    
    <summary type="html">&lt;h3 id=&quot;é¢˜æ„&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#é¢˜æ„&quot;&gt;&lt;/a&gt; é¢˜æ„&lt;/h3&gt;
&lt;h4 id=&quot;è‹±æ–‡é¢˜æ„&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#è‹±æ–‡é¢˜æ„&quot;&gt;&lt;/a&gt; è‹±æ–‡é¢˜æ„&lt;/h4&gt;
&lt;p&gt;&lt;img src=&quot;https://i.loli.net/2020/11/10/wMGZsABjD7vEopx.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="leetcode" scheme="https://christopherrliu.github.io/categories/leetcode/"/>
    
    
    <category term="ç®—æ³•" scheme="https://christopherrliu.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
    <category term="é¢è¯•" scheme="https://christopherrliu.github.io/tags/%E9%9D%A2%E8%AF%95/"/>
    
    <category term="python" scheme="https://christopherrliu.github.io/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>æ¯å¤©ä¸€é“leetcode-next-permutation</title>
    <link href="https://christopherrliu.github.io/2020/11/10/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode-next-permutation/"/>
    <id>https://christopherrliu.github.io/2020/11/10/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode-next-permutation/</id>
    <published>2020-11-10T05:03:41.000Z</published>
    <updated>2020-11-10T05:32:33.709Z</updated>
    
    <content type="html"><![CDATA[<h3 id="é¢˜æ„"><a class="markdownIt-Anchor" href="#é¢˜æ„"></a> é¢˜æ„</h3><h4 id="è‹±æ–‡é¢˜æ„"><a class="markdownIt-Anchor" href="#è‹±æ–‡é¢˜æ„"></a> è‹±æ–‡é¢˜æ„</h4><p><img src="https://i.loli.net/2020/11/10/oUFGaXhAHPjR1O8.png" alt="" /></p><a id="more"></a><h4 id="ä¸­æ–‡é¢˜æ„"><a class="markdownIt-Anchor" href="#ä¸­æ–‡é¢˜æ„"></a> ä¸­æ–‡é¢˜æ„</h4><p><img src="https://i.loli.net/2020/11/10/C3wfaD4chm1lZP5.png" alt="" /></p><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>æ¯ä¸€ä¸ªåˆæ³•çš„æ’åˆ—éƒ½æ»¡è¶³ä»¥ä¸‹çš„æ€§è´¨ï¼š</p><p><img src="https://i.loli.net/2020/11/10/aBGHCuMfyjqPib8.png" alt="" /></p><p>å­˜åœ¨ä¸€ä¸ªbaseå…ƒç´ ï¼Œbaseä»¥å³çš„å…ƒç´ ï¼ˆç»¿è‰²ï¼‰ä¸ºé™åºï¼Œä»¥å³ï¼ˆåŒ…æ‹¬baseæœ¬èº«ï¼Œçº¢è‰²ï¼‰å¯ä»»æ„æ’åˆ—ã€‚çŸ¥é“äº†è¿™ä¸ªæ€§è´¨ï¼Œæœ¬é¢˜çš„è§£æ³•å°±å¾ˆæ˜¾ç„¶äº†ï¼Œæˆ‘ä»¬åªéœ€è¦æ‰¾åˆ°è¿™ä¸ªbaseå…ƒç´ ï¼Œç„¶ååœ¨å®ƒçš„å³é¢æ‰¾åˆ°æœ€å°çš„å¤§äºbaseçš„å…ƒç´ bigerï¼Œä¸¤è€…äº¤æ¢ï¼Œè¿™æ—¶biggerä¹‹åçš„å…ƒç´ ä¹Ÿæ˜¯é™åºçš„ï¼Œå¯ä»¥ç”¨åŒæŒ‡é’ˆå»è®©å®ƒä»¬å‡åºï¼Œè¿™æ ·å¾—åˆ°çš„åºåˆ—å°±æ˜¯è¦æ‰¾çš„åºåˆ—</p><p><img src="https://i.loli.net/2020/11/10/9bIhg2eiR5NDWGx.png" alt="" /></p><h4 id="ä½¿ç”¨æ’åºåº“å‡½æ•°"><a class="markdownIt-Anchor" href="#ä½¿ç”¨æ’åºåº“å‡½æ•°"></a> ä½¿ç”¨æ’åºåº“å‡½æ•°</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">nextPermutation</span>(<span class="params">self, nums: List[int]</span>) -&gt; <span class="keyword">None</span>:</span></span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        Do not return anything, modify nums in-place instead.</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        right = len(nums) - <span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> right == <span class="number">0</span> :</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        min_index = right</span><br><span class="line">        right -= <span class="number">1</span></span><br><span class="line">        <span class="keyword">while</span> right &gt;= <span class="number">0</span> <span class="keyword">and</span> nums[right] &gt;= nums[right + <span class="number">1</span>] :</span><br><span class="line">            right = right - <span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> right == <span class="number">-1</span> :</span><br><span class="line">            nums.sort()</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        <span class="keyword">while</span> min_index <span class="keyword">and</span> nums[min_index] &lt;= nums[right] :</span><br><span class="line">            min_index = min_index - <span class="number">1</span></span><br><span class="line">        nums[right], nums[min_index] = nums[min_index], nums[right]</span><br><span class="line">        nums[right + <span class="number">1</span>:] = sorted(nums[right + <span class="number">1</span>:])</span><br><span class="line">        <span class="keyword">return</span></span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2020/11/10/NgV8kUZTjJ2w6dP.png" alt="" /></p><h4 id="åŒæŒ‡é’ˆ"><a class="markdownIt-Anchor" href="#åŒæŒ‡é’ˆ"></a> åŒæŒ‡é’ˆ</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">nextPermutation</span>(<span class="params">self, nums: List[int]</span>) -&gt; <span class="keyword">None</span>:</span></span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        Do not return anything, modify nums in-place instead.</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        left, right = len(nums) - <span class="number">2</span>, len(nums) - <span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> left == <span class="number">-1</span> :</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        <span class="keyword">while</span> left &gt;= <span class="number">0</span> <span class="keyword">and</span> nums[left] &gt;= nums[left + <span class="number">1</span>] :</span><br><span class="line">            left = left - <span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> left == <span class="number">-1</span> :</span><br><span class="line">            left = <span class="number">0</span></span><br><span class="line">        <span class="keyword">else</span> : </span><br><span class="line">            <span class="keyword">while</span> nums[right] &lt;= nums[left] :</span><br><span class="line">                right = right - <span class="number">1</span></span><br><span class="line">            nums[right], nums[left] = nums[left], nums[right]</span><br><span class="line">            left, right = left + <span class="number">1</span>, len(nums) - <span class="number">1</span> </span><br><span class="line">        </span><br><span class="line">        <span class="keyword">while</span> left &lt; right :</span><br><span class="line">            nums[right], nums[left] = nums[left], nums[right]</span><br><span class="line">            right = right - <span class="number">1</span></span><br><span class="line">            left = left + <span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span></span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2020/11/10/FYd2x6bVXiTLBMp.png" alt="" /></p>]]></content>
    
    
    <summary type="html">&lt;h3 id=&quot;é¢˜æ„&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#é¢˜æ„&quot;&gt;&lt;/a&gt; é¢˜æ„&lt;/h3&gt;
&lt;h4 id=&quot;è‹±æ–‡é¢˜æ„&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#è‹±æ–‡é¢˜æ„&quot;&gt;&lt;/a&gt; è‹±æ–‡é¢˜æ„&lt;/h4&gt;
&lt;p&gt;&lt;img src=&quot;https://i.loli.net/2020/11/10/oUFGaXhAHPjR1O8.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="leetcode" scheme="https://christopherrliu.github.io/categories/leetcode/"/>
    
    
    <category term="ç®—æ³•" scheme="https://christopherrliu.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
    <category term="é¢è¯•" scheme="https://christopherrliu.github.io/tags/%E9%9D%A2%E8%AF%95/"/>
    
    <category term="python" scheme="https://christopherrliu.github.io/tags/python/"/>
    
    <category term="åŒæŒ‡é’ˆ" scheme="https://christopherrliu.github.io/tags/%E5%8F%8C%E6%8C%87%E9%92%88/"/>
    
  </entry>
  
  <entry>
    <title>æ¯å¤©ä¸€é“leetcode-ipo</title>
    <link href="https://christopherrliu.github.io/2020/11/10/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode-ipo/"/>
    <id>https://christopherrliu.github.io/2020/11/10/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode-ipo/</id>
    <published>2020-11-10T03:02:47.000Z</published>
    <updated>2020-11-10T03:08:24.785Z</updated>
    
    <content type="html"><![CDATA[<h3 id="é¢˜æ„"><a class="markdownIt-Anchor" href="#é¢˜æ„"></a> é¢˜æ„</h3><h4 id="è‹±æ–‡é¢˜æ„"><a class="markdownIt-Anchor" href="#è‹±æ–‡é¢˜æ„"></a> è‹±æ–‡é¢˜æ„</h4><p><img src="https://i.loli.net/2020/11/10/Wd1aZOiS8J4Rprm.png" alt="" /></p><a id="more"></a><h4 id="ä¸­æ–‡é¢˜æ„"><a class="markdownIt-Anchor" href="#ä¸­æ–‡é¢˜æ„"></a> ä¸­æ–‡é¢˜æ„</h4><p><img src="https://i.loli.net/2020/11/10/5v1GPfpd9qNVFmR.png" alt="" /></p><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>è´ªå¿ƒçš„æ€è·¯ï¼Œå¯¹äºæ‰€æœ‰çš„<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>C</mi><mi>i</mi></msub><mo>&gt;</mo><mi>W</mi></mrow><annotation encoding="application/x-tex">C_i \gt W</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.07153em;">C</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.07153em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">&gt;</span><span class="mord mathit" style="margin-right:0.13889em;">W</span></span></span></span>çš„é¡¹ç›®ï¼Œæˆ‘ä»¬é€‰æ‹©<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>P</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">P_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.13889em;">P</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.13889em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span>æœ€å¤§çš„å¿…å®šä¼šæ˜¯æœ€ä¼˜çš„ï¼Œå› æ­¤æˆ‘ä»¬ç»´æŠ¤ä¸€ä¸ªä¼˜å…ˆé˜Ÿåˆ—ï¼Œå…¶ä¸­å­˜æ”¾çš„æ˜¯æ‰€æœ‰<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>C</mi><mi>i</mi></msub><mo>&gt;</mo><mi>W</mi></mrow><annotation encoding="application/x-tex">C_i \gt W</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.07153em;">C</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.07153em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">&gt;</span><span class="mord mathit" style="margin-right:0.13889em;">W</span></span></span></span>çš„é¡¹ç›®ï¼Œç„¶åé˜Ÿå¤´æ˜¯<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>P</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">P_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.13889em;">P</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.13889em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span>æœ€å¤§çš„ï¼Œæ¯æ¬¡å–å‡º<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>P</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">P_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.13889em;">P</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.13889em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span>æœ€å¤§çš„é¡¹ç›®ï¼Œå†æ›´æ–°é˜Ÿåˆ—ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MaxHeap</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123;</span><br><span class="line">        <span class="built_in">this</span>.size = <span class="number">0</span>;</span><br><span class="line">        <span class="built_in">this</span>.data = <span class="keyword">new</span> <span class="built_in">Array</span>();</span><br><span class="line">        <span class="built_in">this</span>.data.push(<span class="number">-1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    insert(item) &#123;</span><br><span class="line">        <span class="built_in">this</span>.data.push(item);</span><br><span class="line">        <span class="built_in">this</span>.size++;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">this</span>.bubble();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    pop() &#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">this</span>.size == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="built_in">ReferenceError</span>(<span class="string">&quot;The heap is empty&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> top = <span class="built_in">this</span>.data[<span class="number">1</span>];</span><br><span class="line">        <span class="built_in">this</span>.data[<span class="number">1</span>] = <span class="built_in">this</span>.data[<span class="built_in">this</span>.size];</span><br><span class="line">        <span class="built_in">this</span>.data.pop();</span><br><span class="line">        <span class="built_in">this</span>.size--;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">this</span>.down();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> top;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    bubble() &#123;</span><br><span class="line">        <span class="keyword">let</span> idx = <span class="built_in">this</span>.size;</span><br><span class="line">        <span class="keyword">while</span>(idx &gt; <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">let</span> fa = ~~(idx / <span class="number">2</span>);</span><br><span class="line">            <span class="keyword">if</span>(<span class="built_in">this</span>.data[idx].profit &gt; <span class="built_in">this</span>.data[fa].profit) &#123;</span><br><span class="line">                [<span class="built_in">this</span>.data[idx], <span class="built_in">this</span>.data[fa]] = [<span class="built_in">this</span>.data[fa], <span class="built_in">this</span>.data[idx]];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            idx = fa;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    down() &#123;</span><br><span class="line">        <span class="keyword">let</span> idx = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span>(idx * <span class="number">2</span> &lt;= <span class="built_in">this</span>.size) &#123;</span><br><span class="line">            <span class="keyword">let</span> son = idx * <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">if</span>(son + <span class="number">1</span> &lt;= <span class="built_in">this</span>.size &amp;&amp; <span class="built_in">this</span>.data[son].profit  &lt; <span class="built_in">this</span>.data[son + <span class="number">1</span>].profit) &#123;</span><br><span class="line">                son += <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(<span class="built_in">this</span>.data[idx].profit  &lt; <span class="built_in">this</span>.data[son].profit) &#123;</span><br><span class="line">                [<span class="built_in">this</span>.data[idx], <span class="built_in">this</span>.data[son]] = [<span class="built_in">this</span>.data[son], <span class="built_in">this</span>.data[idx]];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            idx = son;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;number&#125;</span> <span class="variable">k</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;number&#125;</span> <span class="variable">W</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;number[]&#125;</span> <span class="variable">Profits</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;number[]&#125;</span> <span class="variable">Capital</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;number&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> findMaximizedCapital = <span class="function"><span class="keyword">function</span>(<span class="params">k, W, Profits, Capital</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> projects = Profits.reduce(<span class="function">(<span class="params">p, v, i</span>) =&gt;</span> &#123;</span><br><span class="line">        p.push(&#123;</span><br><span class="line">            profit: Profits[i],</span><br><span class="line">            capital: Capital[i]</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">return</span> p;</span><br><span class="line">    &#125;, <span class="keyword">new</span> <span class="built_in">Array</span>()).sort(<span class="function">(<span class="params">a, b</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(a.capital == b.capital) &#123;</span><br><span class="line">            <span class="keyword">return</span> b.profit - a.profit;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> a.capital - b.capital;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">let</span> priority_queue = <span class="keyword">new</span> MaxHeap();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; projects.length; ) &#123;</span><br><span class="line">        <span class="keyword">if</span>(projects[i].capital &gt; W) &#123;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span>(i &lt; projects.length &amp;&amp; projects[i].capital &lt;= W) &#123;</span><br><span class="line">            priority_queue.insert(projects[i]);</span><br><span class="line">            i++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(k &amp;&amp; priority_queue.size) &#123;</span><br><span class="line">            W += priority_queue.pop().profit;</span><br><span class="line">            --k;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span>(k &amp;&amp; priority_queue.size) &#123;</span><br><span class="line">        W += priority_queue.pop().profit;</span><br><span class="line">        --k;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> W;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2020/11/10/htDbCrUXdwWu2lM.png" alt="" /></p><p>æ—¶é—´å¤æ‚åº¦<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi><mi>l</mi><mi>o</mi><mi>g</mi><mi>n</mi><mo>+</mo><mi>n</mi><mi>l</mi><mi>o</mi><mi>g</mi><mi>k</mi></mrow><annotation encoding="application/x-tex">nlogn + nlogk</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord mathit">n</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord mathit">n</span><span class="mbin">+</span><span class="mord mathit">n</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord mathit" style="margin-right:0.03148em;">k</span></span></span></span>ï¼Œç©ºé—´å¤æ‚åº¦<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi><mo>+</mo><mi>l</mi><mi>o</mi><mi>g</mi><mi>k</mi></mrow><annotation encoding="application/x-tex">n + logk</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord mathit">n</span><span class="mbin">+</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord mathit" style="margin-right:0.03148em;">k</span></span></span></span></p>]]></content>
    
    
    <summary type="html">&lt;h3 id=&quot;é¢˜æ„&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#é¢˜æ„&quot;&gt;&lt;/a&gt; é¢˜æ„&lt;/h3&gt;
&lt;h4 id=&quot;è‹±æ–‡é¢˜æ„&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#è‹±æ–‡é¢˜æ„&quot;&gt;&lt;/a&gt; è‹±æ–‡é¢˜æ„&lt;/h4&gt;
&lt;p&gt;&lt;img src=&quot;https://i.loli.net/2020/11/10/Wd1aZOiS8J4Rprm.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="leetcode" scheme="https://christopherrliu.github.io/categories/leetcode/"/>
    
    
    <category term="ç®—æ³•" scheme="https://christopherrliu.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
    <category term="é¢è¯•" scheme="https://christopherrliu.github.io/tags/%E9%9D%A2%E8%AF%95/"/>
    
    <category term="javascript" scheme="https://christopherrliu.github.io/tags/javascript/"/>
    
    <category term="ä¼˜å…ˆé˜Ÿåˆ—" scheme="https://christopherrliu.github.io/tags/%E4%BC%98%E5%85%88%E9%98%9F%E5%88%97/"/>
    
  </entry>
  
  <entry>
    <title>è®ºæ–‡é˜…è¯»-text summarization with pretrained encoders Encoders</title>
    <link href="https://christopherrliu.github.io/2020/11/09/%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB/%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB-Text-Summarization-with-Pretrained-Encoders-Encoders/"/>
    <id>https://christopherrliu.github.io/2020/11/09/%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB/%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB-Text-Summarization-with-Pretrained-Encoders-Encoders/</id>
    <published>2020-11-09T09:29:35.000Z</published>
    <updated>2020-11-10T11:48:48.137Z</updated>
    
    <content type="html"><![CDATA[<h2 id="text-summarization-with-pretrained-encoders"><a class="markdownIt-Anchor" href="#text-summarization-with-pretrained-encoders"></a> <strong>Text Summarization with Pretrained Encoders</strong></h2><h3 id="abstract"><a class="markdownIt-Anchor" href="#abstract"></a> Abstract</h3><ul><li>å°†BERTåº”ç”¨äºæ–‡æœ¬æ‘˜è¦ç”Ÿæˆï¼Œæå‡ºäº†ä¸€ç§å¯ä»¥ç”¨äºæå–å¼å’Œç”Ÿæˆå¼æ‘˜è¦ç”Ÿæˆçš„é€šç”¨æ¡†æ¶</li><li>åŸºäºBERTçš„encoderèƒ½å¤Ÿè¡¨ç¤ºæ–‡æ¡£çš„è¯­ä¹‰ï¼Œå¹¶è·å¾—å¥å­çš„è¡¨å¾</li><li>ä¸€ç§æ–°çš„å¾®è°ƒæ–¹æ³•å¼¥è¡¥encoderå’Œdecoderçš„mismatch</li><li>ä¸¤é˜¶æ®µçš„å¾®è°ƒæ–¹æ³•æå‡æ‘˜è¦è´¨é‡</li></ul><a id="more"></a><h3 id="introduction"><a class="markdownIt-Anchor" href="#introduction"></a> Introduction</h3><ul><li>é¢„è®­ç»ƒçš„è¯­è¨€æ¨¡å‹åœ¨NLPçš„è®¸å¤šé¢†åŸŸä¸­å–å¾—äº†SOTAçš„æ•ˆæœï¼›åŸºäºå¤§è§„æ¨¡è¯­æ–™åº“è®­ç»ƒçš„BERTæ¨¡å‹å¯æ ¹æ®å…·ä½“ä»»åŠ¡çš„éœ€æ±‚è¿›è¡Œå¾®è°ƒã€‚</li><li>å¤§éƒ¨åˆ†çš„ä»»åŠ¡åŸºäºå¥å­çº§æˆ–æ®µè½çº§çš„ç†è§£ï¼Œè€Œæ–‡æœ¬æ‘˜è¦çš„ç”Ÿæˆéœ€è¦èŒƒå›´æ›´å¹¿çš„è¯­ä¹‰ç†è§£ï¼Œå¹¶ä¸”ç”Ÿæˆå¼çš„æ–‡æœ¬æ‘˜è¦æå–è¿˜è¦æ±‚æ¨¡å‹ä¸”å…·æœ‰è¯­è¨€ç”Ÿæˆèƒ½åŠ›â€”â€”éœ€è¦äº§ç”ŸåŸæ–‡ä¸­æ²¡æœ‰å‡ºç°è¿‡çš„å•è¯æˆ–è¯ç»„ã€‚</li><li>åŸºäºBERTæå‡ºäº†ä¸€ç§æ–‡æ¡£çº§çš„encoderï¼Œå®ƒæ—¢å¯ä»¥å¯¹æ–‡æ¡£è¿›è¡Œç¼–ç ï¼Œä¹Ÿå¯ä»¥è·å¾—å¥å­çš„è¡¨å¾ï¼ŒæŠ½å–å¼çš„æ¨¡å‹åœ¨è¿™ç§encoderä¸Šå †å äº†å‡ å±‚Transformerå±‚ï¼Œä»¥ä¾¿è·å–æ–‡æ¡£çº§çš„ç‰¹å¾ç”¨æ¥æå–å¥å­ï¼›ç”Ÿæˆå¼çš„æ¨¡å‹æ˜¯encoder-decoderæ¶æ„ï¼Œencoderæ˜¯æ¥è‡ªäºBERTé¢„è®­ç»ƒæ¨¡å‹ï¼Œdecoderæ˜¯éšæœºåˆå§‹åŒ–çš„Transformerå±‚ã€‚å› ä¸ºencoderæ˜¯é¢„è®­ç»ƒå¥½çš„ï¼Œdecoderåˆ™æ˜¯ä»å¤´å¼€å§‹è®­ç»ƒï¼Œä¸ºäº†æ¶ˆé™¤è¿™ç§mismatchçš„å½±å“ï¼Œè®¾è®¡äº†ä¸€ç§æ–°çš„è®­ç»ƒä¼˜åŒ–æ–¹å¼â€”â€”å¯¹encoderå’Œdecoderè®¾ç½®ä¸åŒçš„ä¼˜åŒ–å™¨ã€‚å¦å¤–ï¼Œå—åˆ°ä¹‹å‰å·¥ä½œçš„å¯å‘ï¼Œå°†encoderå¾®è°ƒä¸¤æ¬¡ï¼Œé¦–å…ˆæ˜¯æŠ½å–å¼ä»»åŠ¡çš„å¾®è°ƒï¼Œç„¶åæ˜¯ç”Ÿæˆå¼ä»»åŠ¡çš„å¾®è°ƒã€‚</li><li>åœ¨ä¸‰ä¸ªä¸åŒå†™ä½œæ–¹å¼å’Œæ‘˜è¦é£æ ¼çš„æ•°æ®é›†ä¸Šè¯„ä»·æ¨¡å‹ï¼Œå–å¾—äº†SOTAçš„æ•ˆæœï¼Œä¸‰ä¸ªè´¡çŒ®ï¼š<ul><li>å¼ºè°ƒäº†æ‘˜è¦ç”Ÿæˆä¸­æ–‡æ¡£ç¼–ç çš„é‡è¦æ€§</li><li>å±•ç¤ºäº†åœ¨æŠ½å–å¼å’Œç”Ÿæˆå¼æ–‡æœ¬æ‘˜è¦ä¸­é¢„è®­ç»ƒæ¨¡å‹çš„ä½¿ç”¨æ–¹æ³•</li><li>å¯ä½œä¸ºä¹‹åå·¥ä½œçš„Baseline</li></ul></li></ul><h3 id="background"><a class="markdownIt-Anchor" href="#background"></a> Background</h3><p>ä»‹ç»äº†é¢„è®­ç»ƒæ¨¡å‹ã€æŠ½å–å¼æ–‡æœ¬æ‘˜è¦å’Œç”Ÿæˆå¼æ–‡æœ¬æ‘˜è¦çš„å‘å±•å†ç¨‹ã€‚</p><h3 id="fine-tuning-bert-for-summarization"><a class="markdownIt-Anchor" href="#fine-tuning-bert-for-summarization"></a> <strong>Fine-tuning BERT for Summarization</strong></h3><h4 id="summarization-encoder"><a class="markdownIt-Anchor" href="#summarization-encoder"></a> <strong>Summarization Encoder</strong></h4><p>ç›´æ¥å°†BERTåº”ç”¨åœ¨æ–‡æœ¬ç”Ÿæˆä»»åŠ¡ä¸­æ˜¯ä¸ç›´è§‚çš„ï¼Œå› ä¸ºBERTè¾“å‡ºçš„æ˜¯<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>t</mi><mi>o</mi><mi>k</mi><mi>e</mi><mi>n</mi></mrow><annotation encoding="application/x-tex">token</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.69444em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">t</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mord mathit">e</span><span class="mord mathit">n</span></span></span></span>çš„è¡¨å¾ï¼Œè€Œæ–‡æœ¬æ‘˜è¦éœ€è¦çš„åˆ™æ˜¯å¥å­çš„è¡¨å¾ï¼›å¦å¤–BERTçš„segementation embeddingsåªé’ˆå¯¹äºå¥å­å¯¹ï¼Œæ–‡æœ¬æ‘˜è¦ä»»åŠ¡éœ€è¦å¯¹æ–‡æ¡£ä¸­çš„æ‰€æœ‰å¥å­åŠ ä»¥åŒºåˆ†ã€‚é’ˆå¯¹BERTçš„ä¸è¶³ï¼Œæå‡ºBERTSUMæ¶æ„ï¼š</p><ul><li>åœ¨æ¯ä¸€ä¸ªå¥å­å¼€å¤´åŠ å…¥<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>c</mi><mi>l</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">cls</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.69444em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">c</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">s</span></span></span></span>ï¼Œç”¨äºè·å–è¯¥å¥å­çš„ç‰¹å¾</li><li>å¯¹äºå¶æ•°ä½ç½®å’Œå¥‡æ•°ä½ç½®çš„å¥å­ç”¨ä¸åŒçš„segment embeddingsåŠ ä»¥åŒºåˆ†ï¼Œè¿™æ ·ï¼Œä½å±‚çš„Transformerè¡¨å¾ç›¸é‚»å¥å­çš„ç‰¹å¾ï¼Œé…åˆself-attentionçš„é«˜å±‚Transformerè¡¨å¾å¤šä¸ªå¥å­çš„ä¿¡æ¯</li><li>ç ´é™¤BERT512ç»´çš„é™åˆ¶ï¼Œ==éšæœºåˆå§‹åŒ–æ›´å¤šçš„position embeddingsï¼Œå¹¶éšå…¶ä»–å‚æ•°ä¸€èµ·å¾®è°ƒ==ï¼Œä¸ºä»€ä¹ˆï¼Ÿ</li></ul><h4 id="extractive-summarization"><a class="markdownIt-Anchor" href="#extractive-summarization"></a> Extractive Summarization</h4><p>æŠ½å–å¼çš„æ–‡æœ¬æ‘˜è¦å¯ä»¥çœ‹ä½œæ˜¯å¯¹æ¯ä¸€ä¸ªå¥å­çš„äºŒåˆ†ç±»é—®é¢˜â€”â€”åˆ¤æ–­å®ƒæ˜¯å¦åº”è¯¥å‡ºç°åœ¨æ‘˜è¦ä¸­ã€‚</p><p>BERTSUMè¾“å‡ºçš„<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>c</mi><mi>l</mi><msub><mi>s</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">cls_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="base textstyle uncramped"><span class="mord mathit">c</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span>çš„embeddingå¯ä»¥ç”¨ä½œå¥å­<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mi>e</mi><mi>n</mi><msub><mi>t</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">sent_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.61508em;"></span><span class="strut bottom" style="height:0.76508em;vertical-align:-0.15em;"></span><span class="base textstyle uncramped"><span class="mord mathit">s</span><span class="mord mathit">e</span><span class="mord mathit">n</span><span class="mord"><span class="mord mathit">t</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span>çš„ç‰¹å¾è¡¨ç¤ºï¼Œç„¶ååœ¨BERTSUMä¹‹åæ¥å…¥å‡ å±‚Transformerï¼ˆç»è¿‡æµ‹è¯•ä¸¤å±‚Transformeræ•ˆæœæœ€å¥½ï¼‰ç”¨äºè¿›è¡Œå¥å­é—´çš„ç¼–ç ï¼Œè¿›è€Œè·å–æ–‡æ¡£çº§çš„ç‰¹å¾ï¼›æœ€åæ¥å…¥sigmoidæ¿€æ´»çš„å…¨è¿æ¥å±‚ç”¨äºåˆ†ç±»ã€‚</p><p>æŸå¤±å‡½æ•°ä½¿ç”¨äº¤å‰ç†µæŸå¤±å‡½æ•°ï¼Œä¼˜åŒ–å™¨æ˜¯Adamï¼Œè¿˜æ˜¯ç”¨äº†warmupç­–ç•¥</p><h4 id="abstractive-summarization"><a class="markdownIt-Anchor" href="#abstractive-summarization"></a> Abstractive Summarization</h4><p>ç”Ÿæˆå¼çš„æ¨¡å‹é‡‡ç”¨äº†æ ‡å‡†çš„encoder-decoderæ¶æ„ï¼Œencoderç”¨çš„æ˜¯é¢„è®­ç»ƒçš„BERTSUMï¼Œdecoderç”¨çš„æ˜¯6å±‚éšæœºåˆå§‹åŒ–çš„Transformeræ¶æ„ã€‚</p><p>å› ä¸ºencoderæ˜¯ç»è¿‡é¢„è®­ç»ƒçš„ï¼Œdecoderåˆ™æ˜¯train from scratchï¼Œè¿™å¾ˆå®¹æ˜“é€ æˆå¾®è°ƒçš„ä¸ç¨³å®šï¼Œæ‰€ä»¥å¯¹encoderå’Œdecoderé‡‡ç”¨ä¸åŒçš„è®­ç»ƒç­–ç•¥ï¼šencoderé‡‡ç”¨è¾ƒå°çš„å­¦ä¹ ç‡ å’Œæ›´å¹³æ»‘çš„è¡°å‡ï¼Œdecoderåˆ™é‡‡ç”¨æ›´å¤§çš„å­¦ä¹ ç‡å’Œæ›´å¤§çš„æ­¥é•¿</p><p>å‰äººçš„å·¥ä½œå‘ç°ç»“åˆäº†æŠ½å–å¼çš„ç”Ÿæˆå¼æ‘˜è¦ç”Ÿæˆè¡¨ç°æ›´å¥½ï¼Œå› æ­¤æå‡ºä¸€ä¸ªä¸¤é˜¶æ®µçš„å¾®è°ƒæ–¹æ³•ï¼šå…ˆç”¨extractive summarizationä»»åŠ¡å¾®è°ƒBERTSUMï¼Œå†ç”¨abstractive summarizationä»»åŠ¡å¾®è°ƒï¼Œè¿™æ ·çš„æ–¹æ³•æœ‰åˆ©äºæ¨¡å‹æ›´å¥½çš„åˆ©ç”¨ä¸¤ç§ä»»åŠ¡çš„ä¿¡æ¯</p><h3 id="experimental-setup"><a class="markdownIt-Anchor" href="#experimental-setup"></a> Experimental Setup</h3><h4 id="summarization-datasets"><a class="markdownIt-Anchor" href="#summarization-datasets"></a> Summarization Datasets</h4><p>ä½¿ç”¨äº†ä¸‰ä¸ªæ–‡æœ¬æ‘˜è¦é¢†åŸŸçš„åŸºå‡†æ•°æ®é›†ï¼Œæ‘˜è¦çš„é£æ ¼å’Œç”Ÿæˆæ–¹å¼å„ä¸ç›¸åŒ</p><h5 id="cnndailymail"><a class="markdownIt-Anchor" href="#cnndailymail"></a> CNN/DailyMail</h5><p>åŒ…å«æ–°é—»æ–‡ç« åŠå¯¹åº”çš„highlightsï¼Œåˆ©ç”¨Stanford CoreNLP toolkitæ¥è¿›è¡Œåˆ†è¯ï¼Œæ¯ç¯‡æ–‡æ¡£æˆªæ–­è‡³512tokens</p><h5 id="nyt"><a class="markdownIt-Anchor" href="#nyt"></a> NYT</h5><p>åŒ…å«110,540ç¯‡æ–‡ç« åŠå¯¹åº”çš„æŠ½å–å¼æ‘˜è¦ï¼Œå°†æ‘˜è¦å­—æ•°ä¸è¶³50è¯çš„æ–‡ç« å»æ‰ï¼ŒåŒæ ·åˆ©ç”¨Stanford CoreNLP toolkitæ¥è¿›è¡Œåˆ†è¯ï¼Œæ¯ç¯‡æ–‡æ¡£æˆªæ–­è‡³800tokens</p><h5 id="xsum"><a class="markdownIt-Anchor" href="#xsum"></a> XSum</h5><p>åŒ…å«226,711ç¯‡æ–°é—»æ–‡ç« åŠå¯¹åº”çš„â€œä¸€å¥è¯â€æ‘˜è¦ï¼Œæ¯ç¯‡æ–‡æ¡£æˆªæ–­è‡³512tokens</p><h4 id="implementation-details"><a class="markdownIt-Anchor" href="#implementation-details"></a> Implementation Details</h4><h5 id="extractive-summarization-2"><a class="markdownIt-Anchor" href="#extractive-summarization-2"></a> Extractive Summarization</h5><ul><li>åœ¨3ä¸ªGTX 1080Tiä¸Šè®­ç»ƒ5000ä¸ªstepï¼Œæ¯ä¸¤ä¸ªstepæ¸…ç©ºä¸€æ¬¡æ¢¯åº¦ï¼Œæ¯100ä¸ªstepä¿å­˜ä¸€æ¬¡å‚æ•°ï¼Œå¹¶è¯„ä»·ä¸€æ¬¡æ¨¡å‹ï¼Œæœ€åé€‰æ‹©ä¸‰ä¸ªvalidationå¾—åˆ†æœ€é«˜çš„å‚æ•°åœ¨æµ‹è¯•é›†ä¸Šæµ‹è¯•</li><li>åœ¨å¾—åˆ°æ‘˜è¦æ—¶é‡‡ç”¨äº†è´ªå¿ƒçš„æ–¹æ³•ï¼Œé€‰æ‹©æ‰€æœ‰å¥å­ä¸­å¾—åˆ†æœ€é«˜çš„ä¸‰å¥ä½œä¸ºæ‘˜è¦</li><li>è¿˜ä½¿ç”¨äº†Trigram Blockingæ¥å‡å°‘é‡å¤</li></ul><h5 id="abstractive-summarization-2"><a class="markdownIt-Anchor" href="#abstractive-summarization-2"></a> Abstractive Summarization</h5><ul><li>ä½¿ç”¨äº†dropoutå’Œlabel smoothing</li><li>Transformer decoderçš„éšè—å•å…ƒæ•°ä¸º768ï¼Œå‰å‘å±‚çš„éšè—å±‚å¤§å°ä¸º2048ç»´</li><li>åœ¨4ä¸ªGTX 1080Tiä¸Šè®­ç»ƒ200000ä¸ªstepï¼Œæ¯äº”ä¸ªstepæ¸…ç©ºä¸€æ¬¡æ¢¯åº¦ï¼Œæ¯2500ä¸ªstepä¿å­˜ä¸€æ¬¡å‚æ•°ï¼Œå¹¶è¯„ä»·ä¸€æ¬¡æ¨¡å‹ï¼Œæœ€åé€‰æ‹©ä¸‰ä¸ªvalidationå¾—åˆ†æœ€é«˜çš„å‚æ•°åœ¨æµ‹è¯•é›†ä¸Šæµ‹è¯•</li><li>decodingæ—¶ä½¿ç”¨äº†beam searchçš„æ–¹æ³•ï¼Œå³æ¯æ¬¡ç”Ÿæˆ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.10903em;">N</span></span></span></span>ä¸ªtokenæ¥è¿›è¡Œé‡‡æ ·ï¼Œè€Œä¸æ˜¯åªé¢„æµ‹ä¸€ä¸ªè¯</li><li>åŒæ ·ç”¨Trigram Blockingæ¥å‡å°‘é‡å¤</li><li>æ²¡æœ‰ä½¿ç”¨copyå’Œcoverageæœºåˆ¶</li><li>å¾—ç›ŠäºBERTçš„subsords tokenizerï¼Œåœ¨è¾“å‡ºä¸­æå°‘å‡ºç°å­—å…¸ä»¥å¤–çš„words</li></ul>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;text-summarization-with-pretrained-encoders&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#text-summarization-with-pretrained-encoders&quot;&gt;&lt;/a&gt; &lt;strong&gt;Text Summarization with Pretrained Encoders&lt;/strong&gt;&lt;/h2&gt;
&lt;h3 id=&quot;abstract&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#abstract&quot;&gt;&lt;/a&gt; Abstract&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;å°†BERTåº”ç”¨äºæ–‡æœ¬æ‘˜è¦ç”Ÿæˆï¼Œæå‡ºäº†ä¸€ç§å¯ä»¥ç”¨äºæå–å¼å’Œç”Ÿæˆå¼æ‘˜è¦ç”Ÿæˆçš„é€šç”¨æ¡†æ¶&lt;/li&gt;
&lt;li&gt;åŸºäºBERTçš„encoderèƒ½å¤Ÿè¡¨ç¤ºæ–‡æ¡£çš„è¯­ä¹‰ï¼Œå¹¶è·å¾—å¥å­çš„è¡¨å¾&lt;/li&gt;
&lt;li&gt;ä¸€ç§æ–°çš„å¾®è°ƒæ–¹æ³•å¼¥è¡¥encoderå’Œdecoderçš„mismatch&lt;/li&gt;
&lt;li&gt;ä¸¤é˜¶æ®µçš„å¾®è°ƒæ–¹æ³•æå‡æ‘˜è¦è´¨é‡&lt;/li&gt;
&lt;/ul&gt;</summary>
    
    
    
    <category term="è®ºæ–‡é˜…è¯»" scheme="https://christopherrliu.github.io/categories/%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB/"/>
    
    
    <category term="nlp" scheme="https://christopherrliu.github.io/tags/nlp/"/>
    
    <category term="bert" scheme="https://christopherrliu.github.io/tags/bert/"/>
    
    <category term="æ–‡æœ¬æ‘˜è¦" scheme="https://christopherrliu.github.io/tags/%E6%96%87%E6%9C%AC%E6%91%98%E8%A6%81/"/>
    
  </entry>
  
  <entry>
    <title>è®ºæ–‡é˜…è¯»-text summarization with pretrained encoders Encoders</title>
    <link href="https://christopherrliu.github.io/2020/11/09/%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB/%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB-Text/"/>
    <id>https://christopherrliu.github.io/2020/11/09/%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB/%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB-Text/</id>
    <published>2020-11-09T09:29:35.000Z</published>
    <updated>2020-11-11T07:40:56.800Z</updated>
    
    <content type="html"><![CDATA[<h2 id="text-summarization-with-pretrained-encoders"><a class="markdownIt-Anchor" href="#text-summarization-with-pretrained-encoders"></a> <strong>Text Summarization with Pretrained Encoders</strong></h2><h3 id="abstract"><a class="markdownIt-Anchor" href="#abstract"></a> Abstract</h3><ul><li>å°†BERTåº”ç”¨äºæ–‡æœ¬æ‘˜è¦ç”Ÿæˆï¼Œæå‡ºäº†ä¸€ç§å¯ä»¥ç”¨äºæå–å¼å’Œç”Ÿæˆå¼æ‘˜è¦ç”Ÿæˆçš„é€šç”¨æ¡†æ¶</li><li>åŸºäºBERTçš„encoderèƒ½å¤Ÿè¡¨ç¤ºæ–‡æ¡£çš„è¯­ä¹‰ï¼Œå¹¶è·å¾—å¥å­çš„è¡¨å¾</li><li>ä¸€ç§æ–°çš„å¾®è°ƒæ–¹æ³•å¼¥è¡¥encoderå’Œdecoderçš„mismatch</li><li>ä¸¤é˜¶æ®µçš„å¾®è°ƒæ–¹æ³•æå‡æ‘˜è¦è´¨é‡</li></ul><a id="more"></a><h3 id="introduction"><a class="markdownIt-Anchor" href="#introduction"></a> Introduction</h3><ul><li>é¢„è®­ç»ƒçš„è¯­è¨€æ¨¡å‹åœ¨NLPçš„è®¸å¤šé¢†åŸŸä¸­å–å¾—äº†SOTAçš„æ•ˆæœï¼›åŸºäºå¤§è§„æ¨¡è¯­æ–™åº“è®­ç»ƒçš„BERTæ¨¡å‹å¯æ ¹æ®å…·ä½“ä»»åŠ¡çš„éœ€æ±‚è¿›è¡Œå¾®è°ƒã€‚</li><li>å¤§éƒ¨åˆ†çš„ä»»åŠ¡åŸºäºå¥å­çº§æˆ–æ®µè½çº§çš„ç†è§£ï¼Œè€Œæ–‡æœ¬æ‘˜è¦çš„ç”Ÿæˆéœ€è¦èŒƒå›´æ›´å¹¿çš„è¯­ä¹‰ç†è§£ï¼Œå¹¶ä¸”ç”Ÿæˆå¼çš„æ–‡æœ¬æ‘˜è¦æå–è¿˜è¦æ±‚æ¨¡å‹ä¸”å…·æœ‰è¯­è¨€ç”Ÿæˆèƒ½åŠ›â€”â€”éœ€è¦äº§ç”ŸåŸæ–‡ä¸­æ²¡æœ‰å‡ºç°è¿‡çš„å•è¯æˆ–è¯ç»„ã€‚</li><li>åŸºäºBERTæå‡ºäº†ä¸€ç§æ–‡æ¡£çº§çš„encoderï¼Œå®ƒæ—¢å¯ä»¥å¯¹æ–‡æ¡£è¿›è¡Œç¼–ç ï¼Œä¹Ÿå¯ä»¥è·å¾—å¥å­çš„è¡¨å¾ï¼ŒæŠ½å–å¼çš„æ¨¡å‹åœ¨è¿™ç§encoderä¸Šå †å äº†å‡ å±‚Transformerå±‚ï¼Œä»¥ä¾¿è·å–æ–‡æ¡£çº§çš„ç‰¹å¾ç”¨æ¥æå–å¥å­ï¼›ç”Ÿæˆå¼çš„æ¨¡å‹æ˜¯encoder-decoderæ¶æ„ï¼Œencoderæ˜¯æ¥è‡ªäºBERTé¢„è®­ç»ƒæ¨¡å‹ï¼Œdecoderæ˜¯éšæœºåˆå§‹åŒ–çš„Transformerå±‚ã€‚å› ä¸ºencoderæ˜¯é¢„è®­ç»ƒå¥½çš„ï¼Œdecoderåˆ™æ˜¯ä»å¤´å¼€å§‹è®­ç»ƒï¼Œä¸ºäº†æ¶ˆé™¤è¿™ç§mismatchçš„å½±å“ï¼Œè®¾è®¡äº†ä¸€ç§æ–°çš„è®­ç»ƒä¼˜åŒ–æ–¹å¼â€”â€”å¯¹encoderå’Œdecoderè®¾ç½®ä¸åŒçš„ä¼˜åŒ–å™¨ã€‚å¦å¤–ï¼Œå—åˆ°ä¹‹å‰å·¥ä½œçš„å¯å‘ï¼Œå°†encoderå¾®è°ƒä¸¤æ¬¡ï¼Œé¦–å…ˆæ˜¯æŠ½å–å¼ä»»åŠ¡çš„å¾®è°ƒï¼Œç„¶åæ˜¯ç”Ÿæˆå¼ä»»åŠ¡çš„å¾®è°ƒã€‚</li><li>åœ¨ä¸‰ä¸ªä¸åŒå†™ä½œæ–¹å¼å’Œæ‘˜è¦é£æ ¼çš„æ•°æ®é›†ä¸Šè¯„ä»·æ¨¡å‹ï¼Œå–å¾—äº†SOTAçš„æ•ˆæœï¼Œä¸‰ä¸ªè´¡çŒ®ï¼š<ul><li>å¼ºè°ƒäº†æ‘˜è¦ç”Ÿæˆä¸­æ–‡æ¡£ç¼–ç çš„é‡è¦æ€§</li><li>å±•ç¤ºäº†åœ¨æŠ½å–å¼å’Œç”Ÿæˆå¼æ–‡æœ¬æ‘˜è¦ä¸­é¢„è®­ç»ƒæ¨¡å‹çš„ä½¿ç”¨æ–¹æ³•</li><li>å¯ä½œä¸ºä¹‹åå·¥ä½œçš„Baseline</li></ul></li></ul><h3 id="background"><a class="markdownIt-Anchor" href="#background"></a> Background</h3><p>ä»‹ç»äº†é¢„è®­ç»ƒæ¨¡å‹ã€æŠ½å–å¼æ–‡æœ¬æ‘˜è¦å’Œç”Ÿæˆå¼æ–‡æœ¬æ‘˜è¦çš„å‘å±•å†ç¨‹ã€‚</p><h3 id="fine-tuning-bert-for-summarization"><a class="markdownIt-Anchor" href="#fine-tuning-bert-for-summarization"></a> <strong>Fine-tuning BERT for Summarization</strong></h3><h4 id="summarization-encoder"><a class="markdownIt-Anchor" href="#summarization-encoder"></a> <strong>Summarization Encoder</strong></h4><p>ç›´æ¥å°†BERTåº”ç”¨åœ¨æ–‡æœ¬ç”Ÿæˆä»»åŠ¡ä¸­æ˜¯ä¸ç›´è§‚çš„ï¼Œå› ä¸ºBERTè¾“å‡ºçš„æ˜¯<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>t</mi><mi>o</mi><mi>k</mi><mi>e</mi><mi>n</mi></mrow><annotation encoding="application/x-tex">token</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.69444em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">t</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mord mathit">e</span><span class="mord mathit">n</span></span></span></span>çš„è¡¨å¾ï¼Œè€Œæ–‡æœ¬æ‘˜è¦éœ€è¦çš„åˆ™æ˜¯å¥å­çš„è¡¨å¾ï¼›å¦å¤–BERTçš„segementation embeddingsåªé’ˆå¯¹äºå¥å­å¯¹ï¼Œæ–‡æœ¬æ‘˜è¦ä»»åŠ¡éœ€è¦å¯¹æ–‡æ¡£ä¸­çš„æ‰€æœ‰å¥å­åŠ ä»¥åŒºåˆ†ã€‚é’ˆå¯¹BERTçš„ä¸è¶³ï¼Œæå‡ºBERTSUMæ¶æ„ï¼š</p><ul><li>åœ¨æ¯ä¸€ä¸ªå¥å­å¼€å¤´åŠ å…¥<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>c</mi><mi>l</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">cls</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.69444em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">c</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">s</span></span></span></span>ï¼Œç”¨äºè·å–è¯¥å¥å­çš„ç‰¹å¾</li><li>å¯¹äºå¶æ•°ä½ç½®å’Œå¥‡æ•°ä½ç½®çš„å¥å­ç”¨ä¸åŒçš„segment embeddingsåŠ ä»¥åŒºåˆ†ï¼Œè¿™æ ·ï¼Œä½å±‚çš„Transformerè¡¨å¾ç›¸é‚»å¥å­çš„ç‰¹å¾ï¼Œé…åˆself-attentionçš„é«˜å±‚Transformerè¡¨å¾å¤šä¸ªå¥å­çš„ä¿¡æ¯</li><li>ç ´é™¤BERT512ç»´çš„é™åˆ¶ï¼Œ==éšæœºåˆå§‹åŒ–æ›´å¤šçš„position embeddingsï¼Œå¹¶éšå…¶ä»–å‚æ•°ä¸€èµ·å¾®è°ƒ==ï¼Œä¸ºä»€ä¹ˆï¼Ÿ</li></ul><h4 id="extractive-summarization"><a class="markdownIt-Anchor" href="#extractive-summarization"></a> Extractive Summarization</h4><p>æŠ½å–å¼çš„æ–‡æœ¬æ‘˜è¦å¯ä»¥çœ‹ä½œæ˜¯å¯¹æ¯ä¸€ä¸ªå¥å­çš„äºŒåˆ†ç±»é—®é¢˜â€”â€”åˆ¤æ–­å®ƒæ˜¯å¦åº”è¯¥å‡ºç°åœ¨æ‘˜è¦ä¸­ã€‚</p><p>BERTSUMè¾“å‡ºçš„<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>c</mi><mi>l</mi><msub><mi>s</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">cls_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="base textstyle uncramped"><span class="mord mathit">c</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span>çš„embeddingå¯ä»¥ç”¨ä½œå¥å­<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mi>e</mi><mi>n</mi><msub><mi>t</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">sent_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.61508em;"></span><span class="strut bottom" style="height:0.76508em;vertical-align:-0.15em;"></span><span class="base textstyle uncramped"><span class="mord mathit">s</span><span class="mord mathit">e</span><span class="mord mathit">n</span><span class="mord"><span class="mord mathit">t</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span>çš„ç‰¹å¾è¡¨ç¤ºï¼Œç„¶ååœ¨BERTSUMä¹‹åæ¥å…¥å‡ å±‚Transformerï¼ˆç»è¿‡æµ‹è¯•ä¸¤å±‚Transformeræ•ˆæœæœ€å¥½ï¼‰ç”¨äºè¿›è¡Œå¥å­é—´çš„ç¼–ç ï¼Œè¿›è€Œè·å–æ–‡æ¡£çº§çš„ç‰¹å¾ï¼›æœ€åæ¥å…¥sigmoidæ¿€æ´»çš„å…¨è¿æ¥å±‚ç”¨äºåˆ†ç±»ã€‚</p><p>æŸå¤±å‡½æ•°ä½¿ç”¨äº¤å‰ç†µæŸå¤±å‡½æ•°ï¼Œä¼˜åŒ–å™¨æ˜¯Adamï¼Œè¿˜æ˜¯ç”¨äº†warmupç­–ç•¥</p><h4 id="abstractive-summarization"><a class="markdownIt-Anchor" href="#abstractive-summarization"></a> Abstractive Summarization</h4><p>ç”Ÿæˆå¼çš„æ¨¡å‹é‡‡ç”¨äº†æ ‡å‡†çš„encoder-decoderæ¶æ„ï¼Œencoderç”¨çš„æ˜¯é¢„è®­ç»ƒçš„BERTSUMï¼Œdecoderç”¨çš„æ˜¯6å±‚éšæœºåˆå§‹åŒ–çš„Transformeræ¶æ„ã€‚</p><p>å› ä¸ºencoderæ˜¯ç»è¿‡é¢„è®­ç»ƒçš„ï¼Œdecoderåˆ™æ˜¯train from scratchï¼Œè¿™å¾ˆå®¹æ˜“é€ æˆå¾®è°ƒçš„ä¸ç¨³å®šï¼Œæ‰€ä»¥å¯¹encoderå’Œdecoderé‡‡ç”¨ä¸åŒçš„è®­ç»ƒç­–ç•¥ï¼šencoderé‡‡ç”¨è¾ƒå°çš„å­¦ä¹ ç‡ å’Œæ›´å¹³æ»‘çš„è¡°å‡ï¼Œdecoderåˆ™é‡‡ç”¨æ›´å¤§çš„å­¦ä¹ ç‡å’Œæ›´å¤§çš„æ­¥é•¿</p><p>å‰äººçš„å·¥ä½œå‘ç°ç»“åˆäº†æŠ½å–å¼çš„ç”Ÿæˆå¼æ‘˜è¦ç”Ÿæˆè¡¨ç°æ›´å¥½ï¼Œå› æ­¤æå‡ºä¸€ä¸ªä¸¤é˜¶æ®µçš„å¾®è°ƒæ–¹æ³•ï¼šå…ˆç”¨extractive summarizationä»»åŠ¡å¾®è°ƒBERTSUMï¼Œå†ç”¨abstractive summarizationä»»åŠ¡å¾®è°ƒï¼Œè¿™æ ·çš„æ–¹æ³•æœ‰åˆ©äºæ¨¡å‹æ›´å¥½çš„åˆ©ç”¨ä¸¤ç§ä»»åŠ¡çš„ä¿¡æ¯</p><h3 id="experimental-setup"><a class="markdownIt-Anchor" href="#experimental-setup"></a> Experimental Setup</h3><h4 id="summarization-datasets"><a class="markdownIt-Anchor" href="#summarization-datasets"></a> Summarization Datasets</h4><p>ä½¿ç”¨äº†ä¸‰ä¸ªæ–‡æœ¬æ‘˜è¦é¢†åŸŸçš„åŸºå‡†æ•°æ®é›†ï¼Œæ‘˜è¦çš„é£æ ¼å’Œç”Ÿæˆæ–¹å¼å„ä¸ç›¸åŒ</p><h5 id="cnndailymail"><a class="markdownIt-Anchor" href="#cnndailymail"></a> CNN/DailyMail</h5><p>åŒ…å«æ–°é—»æ–‡ç« åŠå¯¹åº”çš„highlightsï¼Œåˆ©ç”¨Stanford CoreNLP toolkitæ¥è¿›è¡Œåˆ†è¯ï¼Œæ¯ç¯‡æ–‡æ¡£æˆªæ–­è‡³512tokens</p><h5 id="nyt"><a class="markdownIt-Anchor" href="#nyt"></a> NYT</h5><p>åŒ…å«110,540ç¯‡æ–‡ç« åŠå¯¹åº”çš„æŠ½å–å¼æ‘˜è¦ï¼Œå°†æ‘˜è¦å­—æ•°ä¸è¶³50è¯çš„æ–‡ç« å»æ‰ï¼ŒåŒæ ·åˆ©ç”¨Stanford CoreNLP toolkitæ¥è¿›è¡Œåˆ†è¯ï¼Œæ¯ç¯‡æ–‡æ¡£æˆªæ–­è‡³800tokens</p><h5 id="xsum"><a class="markdownIt-Anchor" href="#xsum"></a> XSum</h5><p>åŒ…å«226,711ç¯‡æ–°é—»æ–‡ç« åŠå¯¹åº”çš„â€œä¸€å¥è¯â€æ‘˜è¦ï¼Œæ¯ç¯‡æ–‡æ¡£æˆªæ–­è‡³512tokens</p><h4 id="implementation-details"><a class="markdownIt-Anchor" href="#implementation-details"></a> Implementation Details</h4><h5 id="extractive-summarization-2"><a class="markdownIt-Anchor" href="#extractive-summarization-2"></a> Extractive Summarization</h5><ul><li>åœ¨3ä¸ªGTX 1080Tiä¸Šè®­ç»ƒ5000ä¸ªstepï¼Œæ¯ä¸¤ä¸ªstepæ¸…ç©ºä¸€æ¬¡æ¢¯åº¦ï¼Œæ¯100ä¸ªstepä¿å­˜ä¸€æ¬¡å‚æ•°ï¼Œå¹¶è¯„ä»·ä¸€æ¬¡æ¨¡å‹ï¼Œæœ€åé€‰æ‹©ä¸‰ä¸ªvalidationå¾—åˆ†æœ€é«˜çš„å‚æ•°åœ¨æµ‹è¯•é›†ä¸Šæµ‹è¯•</li><li>åœ¨å¾—åˆ°æ‘˜è¦æ—¶é‡‡ç”¨äº†è´ªå¿ƒçš„æ–¹æ³•ï¼Œé€‰æ‹©æ‰€æœ‰å¥å­ä¸­å¾—åˆ†æœ€é«˜çš„ä¸‰å¥ä½œä¸ºæ‘˜è¦</li><li>è¿˜ä½¿ç”¨äº†Trigram Blockingæ¥å‡å°‘é‡å¤</li></ul><h5 id="abstractive-summarization-2"><a class="markdownIt-Anchor" href="#abstractive-summarization-2"></a> Abstractive Summarization</h5><ul><li>ä½¿ç”¨äº†dropoutå’Œlabel smoothing</li><li>Transformer decoderçš„éšè—å•å…ƒæ•°ä¸º768ï¼Œå‰å‘å±‚çš„éšè—å±‚å¤§å°ä¸º2048ç»´</li><li>åœ¨4ä¸ªGTX 1080Tiä¸Šè®­ç»ƒ200000ä¸ªstepï¼Œæ¯äº”ä¸ªstepæ¸…ç©ºä¸€æ¬¡æ¢¯åº¦ï¼Œæ¯2500ä¸ªstepä¿å­˜ä¸€æ¬¡å‚æ•°ï¼Œå¹¶è¯„ä»·ä¸€æ¬¡æ¨¡å‹ï¼Œæœ€åé€‰æ‹©ä¸‰ä¸ªvalidationå¾—åˆ†æœ€é«˜çš„å‚æ•°åœ¨æµ‹è¯•é›†ä¸Šæµ‹è¯•</li><li>decodingæ—¶ä½¿ç”¨äº†beam searchçš„æ–¹æ³•ï¼Œå³æ¯æ¬¡ç”Ÿæˆ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.10903em;">N</span></span></span></span>ä¸ªtokenæ¥è¿›è¡Œé‡‡æ ·ï¼Œè€Œä¸æ˜¯åªé¢„æµ‹ä¸€ä¸ªè¯</li><li>åŒæ ·ç”¨Trigram Blockingæ¥å‡å°‘é‡å¤</li><li>æ²¡æœ‰ä½¿ç”¨copyå’Œcoverageæœºåˆ¶</li><li>å¾—ç›ŠäºBERTçš„subsords tokenizerï¼Œåœ¨è¾“å‡ºä¸­æå°‘å‡ºç°å­—å…¸ä»¥å¤–çš„words</li></ul>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;text-summarization-with-pretrained-encoders&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#text-summarization-with-pretrained-encoders&quot;&gt;&lt;/a&gt; &lt;strong&gt;Text Summarization with Pretrained Encoders&lt;/strong&gt;&lt;/h2&gt;
&lt;h3 id=&quot;abstract&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#abstract&quot;&gt;&lt;/a&gt; Abstract&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;å°†BERTåº”ç”¨äºæ–‡æœ¬æ‘˜è¦ç”Ÿæˆï¼Œæå‡ºäº†ä¸€ç§å¯ä»¥ç”¨äºæå–å¼å’Œç”Ÿæˆå¼æ‘˜è¦ç”Ÿæˆçš„é€šç”¨æ¡†æ¶&lt;/li&gt;
&lt;li&gt;åŸºäºBERTçš„encoderèƒ½å¤Ÿè¡¨ç¤ºæ–‡æ¡£çš„è¯­ä¹‰ï¼Œå¹¶è·å¾—å¥å­çš„è¡¨å¾&lt;/li&gt;
&lt;li&gt;ä¸€ç§æ–°çš„å¾®è°ƒæ–¹æ³•å¼¥è¡¥encoderå’Œdecoderçš„mismatch&lt;/li&gt;
&lt;li&gt;ä¸¤é˜¶æ®µçš„å¾®è°ƒæ–¹æ³•æå‡æ‘˜è¦è´¨é‡&lt;/li&gt;
&lt;/ul&gt;</summary>
    
    
    
    <category term="è®ºæ–‡é˜…è¯»" scheme="https://christopherrliu.github.io/categories/%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB/"/>
    
    
    <category term="nlp" scheme="https://christopherrliu.github.io/tags/nlp/"/>
    
    <category term="bert" scheme="https://christopherrliu.github.io/tags/bert/"/>
    
    <category term="æ–‡æœ¬æ‘˜è¦" scheme="https://christopherrliu.github.io/tags/%E6%96%87%E6%9C%AC%E6%91%98%E8%A6%81/"/>
    
  </entry>
  
  <entry>
    <title>æ¯å¤©ä¸€é“leetcode-k-closest-points-to-origin</title>
    <link href="https://christopherrliu.github.io/2020/11/09/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode-k-closest-points-to-origin/"/>
    <id>https://christopherrliu.github.io/2020/11/09/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode-k-closest-points-to-origin/</id>
    <published>2020-11-09T08:37:21.000Z</published>
    <updated>2020-11-09T12:50:06.627Z</updated>
    
    <content type="html"><![CDATA[<h3 id="é¢˜æ„"><a class="markdownIt-Anchor" href="#é¢˜æ„"></a> é¢˜æ„</h3><h4 id="è‹±æ–‡é¢˜æ„"><a class="markdownIt-Anchor" href="#è‹±æ–‡é¢˜æ„"></a> è‹±æ–‡é¢˜æ„</h4><p><img src="https://i.loli.net/2020/11/09/DVAdUWZ5pScMRr8.png" alt="" /></p><a id="more"></a><h4 id="ä¸­æ–‡é¢˜æ„"><a class="markdownIt-Anchor" href="#ä¸­æ–‡é¢˜æ„"></a> ä¸­æ–‡é¢˜æ„</h4><p><img src="https://i.loli.net/2020/11/09/YCzJsrMp6XqcFHE.png" alt="" /></p><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>ä¼˜å…ˆé˜Ÿåˆ—è£¸é¢˜ï¼Œéå†ç‚¹æ•°ç»„ï¼Œå°†è·ç¦»æ’å…¥ä¼˜å…ˆé˜Ÿåˆ—ï¼Œè‹¥é˜Ÿåˆ—å¤§å°è¶…å‡ºé™åˆ¶å°±å‡ºé˜Ÿ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MaxHeap</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123;</span><br><span class="line">        <span class="built_in">this</span>.size = <span class="number">0</span>;</span><br><span class="line">        <span class="built_in">this</span>.data = <span class="keyword">new</span> <span class="built_in">Array</span>();</span><br><span class="line">        <span class="built_in">this</span>.data.push(<span class="number">-1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    insert(item) &#123;</span><br><span class="line">        <span class="built_in">this</span>.data.push(item);</span><br><span class="line">        <span class="built_in">this</span>.size++;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">this</span>.bubble();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    pop() &#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">this</span>.size == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="built_in">ReferenceError</span>(<span class="string">&quot;The heap is empty&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> top = <span class="built_in">this</span>.data[<span class="number">1</span>];</span><br><span class="line">        <span class="built_in">this</span>.data[<span class="number">1</span>] = <span class="built_in">this</span>.data[<span class="built_in">this</span>.size];</span><br><span class="line">        <span class="built_in">this</span>.data.pop();</span><br><span class="line">        <span class="built_in">this</span>.size--;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">this</span>.down();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> top;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    bubble() &#123;</span><br><span class="line">        <span class="keyword">let</span> idx = <span class="built_in">this</span>.size;</span><br><span class="line">        <span class="keyword">while</span>(idx &gt; <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">let</span> fa = ~~(idx / <span class="number">2</span>);</span><br><span class="line">            <span class="keyword">if</span>(<span class="built_in">this</span>.data[idx].value &gt; <span class="built_in">this</span>.data[fa].value ) &#123;</span><br><span class="line">                [<span class="built_in">this</span>.data[idx], <span class="built_in">this</span>.data[fa]] = [<span class="built_in">this</span>.data[fa], <span class="built_in">this</span>.data[idx]];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            idx = fa;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    down() &#123;</span><br><span class="line">        <span class="keyword">let</span> idx = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span>(idx * <span class="number">2</span> &lt;= <span class="built_in">this</span>.size) &#123;</span><br><span class="line">            <span class="keyword">let</span> son = idx * <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">if</span>(son + <span class="number">1</span> &lt;= <span class="built_in">this</span>.size &amp;&amp; <span class="built_in">this</span>.data[son].value  &lt; <span class="built_in">this</span>.data[son + <span class="number">1</span>].value ) &#123;</span><br><span class="line">                son += <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(<span class="built_in">this</span>.data[idx].value  &lt; <span class="built_in">this</span>.data[son].value ) &#123;</span><br><span class="line">                [<span class="built_in">this</span>.data[idx], <span class="built_in">this</span>.data[son]] = [<span class="built_in">this</span>.data[son], <span class="built_in">this</span>.data[idx]];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            idx = son;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;number[][]&#125;</span> <span class="variable">points</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;number&#125;</span> <span class="variable">K</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;number[][]&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> kClosest = <span class="function"><span class="keyword">function</span>(<span class="params">points, K</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> ans = <span class="keyword">new</span> <span class="built_in">Array</span>();</span><br><span class="line">    <span class="keyword">let</span> idx = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">let</span> priority_queue = <span class="keyword">new</span> MaxHeap();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> point <span class="keyword">of</span> points) &#123;</span><br><span class="line">        <span class="keyword">let</span> dist = point[<span class="number">0</span>] ** <span class="number">2</span> + point[<span class="number">1</span>] ** <span class="number">2</span>;</span><br><span class="line">        priority_queue.insert(&#123;</span><br><span class="line">            value : dist,</span><br><span class="line">            idx : idx</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">while</span>(priority_queue.size &gt; K) &#123;</span><br><span class="line">            priority_queue.pop();</span><br><span class="line">        &#125;</span><br><span class="line">        idx++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span>(priority_queue.size) &#123;</span><br><span class="line">        <span class="keyword">let</span> top = priority_queue.pop();</span><br><span class="line">        ans.push(points[top.idx]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2020/11/09/zV7lFypEPQwbCZG.png" alt="" /></p><p>æ—¶é—´å¤æ‚åº¦<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><mi>n</mi><mi>l</mi><mi>o</mi><mi>g</mi><mi>k</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">O(nlogk)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathit">n</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mclose">)</span></span></span></span>ï¼Œç©ºé—´å¤æ‚åº¦<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><mi>k</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">O(k)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mclose">)</span></span></span></span></p><h4 id="åˆ†æ²»"><a class="markdownIt-Anchor" href="#åˆ†æ²»"></a> åˆ†æ²»</h4><p>åŸºäºå¿«é€Ÿæ’åºçš„top-kç®—æ³•ï¼Œæ¯æ¬¡æ‰¾åˆ°åŸºå‡†å…ƒç´ åï¼Œæ¯”è¾ƒå·¦è¾¹å…ƒç´ ä¸<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>K</mi></mrow><annotation encoding="application/x-tex">K</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.07153em;">K</span></span></span></span>çš„å¤§å°ï¼Œå°äº<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>K</mi></mrow><annotation encoding="application/x-tex">K</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.07153em;">K</span></span></span></span>ï¼Œè¯´æ˜ç­”æ¡ˆåœ¨å·¦åŠé¢ï¼Œå¤§äº<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>K</mi></mrow><annotation encoding="application/x-tex">K</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.07153em;">K</span></span></span></span>ï¼Œç­”æ¡ˆåœ¨å³åŠé¢</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">partition</span>(<span class="params">self, subLists</span>) :</span></span><br><span class="line">        <span class="keyword">if</span> len(subLists) == <span class="number">1</span> :</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">        base = subLists[<span class="number">0</span>][<span class="number">0</span>]</span><br><span class="line">        left, right = <span class="number">1</span>, len(subLists) - <span class="number">1</span></span><br><span class="line">        <span class="keyword">while</span> left &lt; right :</span><br><span class="line">            <span class="keyword">while</span> left &lt; right <span class="keyword">and</span> subLists[right][<span class="number">0</span>] &gt; base :</span><br><span class="line">                right = right - <span class="number">1</span></span><br><span class="line">            <span class="keyword">while</span> left &lt; right <span class="keyword">and</span> subLists[left][<span class="number">0</span>] &lt;= base :</span><br><span class="line">                left = left + <span class="number">1</span></span><br><span class="line">            <span class="keyword">if</span> left &lt; right :</span><br><span class="line">                subLists[left], subLists[right] = subLists[right], subLists[left]</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> base &gt; subLists[left][<span class="number">0</span>] :</span><br><span class="line">            subLists[<span class="number">0</span>], subLists[left] = subLists[left], subLists[<span class="number">0</span>]</span><br><span class="line">            <span class="keyword">return</span> left</span><br><span class="line">            </span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">findKItems</span>(<span class="params">self, lists, K</span>) :</span></span><br><span class="line">        <span class="keyword">if</span> len(lists) == <span class="number">0</span> :</span><br><span class="line">            <span class="keyword">return</span> []</span><br><span class="line"></span><br><span class="line">        mid = self.partition(lists) + <span class="number">1</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> mid == K :</span><br><span class="line">            <span class="keyword">return</span> lists[:mid]</span><br><span class="line">        <span class="keyword">elif</span> mid &gt; K :</span><br><span class="line">            <span class="keyword">return</span> self.findKItems(lists[:mid - <span class="number">1</span>], K)</span><br><span class="line">        <span class="keyword">else</span> :</span><br><span class="line">            <span class="keyword">return</span> lists[ :mid] + self.findKItems(lists[mid: ], K - mid)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">kClosest</span>(<span class="params">self, points: List[List[int]], K: int</span>) -&gt; List[List[int]]:</span></span><br><span class="line">        res = self.findKItems(reduce(<span class="keyword">lambda</span> p, v: p + [(v[<span class="number">0</span>] ** <span class="number">2</span> + v[<span class="number">1</span>] ** <span class="number">2</span>, v)], points, []), K)</span><br><span class="line">        <span class="keyword">return</span> [item[<span class="number">1</span>] <span class="keyword">for</span> item <span class="keyword">in</span> res]</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2020/11/09/zuWeg7FRabfOrE3.png" alt="" /></p><p>æ­£å¸¸æ¥è®²å¹³å‡çš„æ—¶é—´å¤æ‚åº¦ä¸º<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><mi>n</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathit">n</span><span class="mclose">)</span></span></span></span>ï¼Œå¯èƒ½æˆ‘ä»£ç å†™å¾—æœ‰ç‚¹æŒ«</p>]]></content>
    
    
    <summary type="html">&lt;h3 id=&quot;é¢˜æ„&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#é¢˜æ„&quot;&gt;&lt;/a&gt; é¢˜æ„&lt;/h3&gt;
&lt;h4 id=&quot;è‹±æ–‡é¢˜æ„&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#è‹±æ–‡é¢˜æ„&quot;&gt;&lt;/a&gt; è‹±æ–‡é¢˜æ„&lt;/h4&gt;
&lt;p&gt;&lt;img src=&quot;https://i.loli.net/2020/11/09/DVAdUWZ5pScMRr8.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="leetcode" scheme="https://christopherrliu.github.io/categories/leetcode/"/>
    
    
    <category term="ç®—æ³•" scheme="https://christopherrliu.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
    <category term="é¢è¯•" scheme="https://christopherrliu.github.io/tags/%E9%9D%A2%E8%AF%95/"/>
    
    <category term="python" scheme="https://christopherrliu.github.io/tags/python/"/>
    
    <category term="javascript" scheme="https://christopherrliu.github.io/tags/javascript/"/>
    
    <category term="ä¼˜å…ˆé˜Ÿåˆ—" scheme="https://christopherrliu.github.io/tags/%E4%BC%98%E5%85%88%E9%98%9F%E5%88%97/"/>
    
    <category term="åˆ†æ²»" scheme="https://christopherrliu.github.io/tags/%E5%88%86%E6%B2%BB/"/>
    
  </entry>
  
  <entry>
    <title>æ¯å¤©ä¸€é“leetcode-best-time-to-buy-and-sell-stock-iv</title>
    <link href="https://christopherrliu.github.io/2020/11/09/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode-best-time-to-buy-and-sell-stock-iv/"/>
    <id>https://christopherrliu.github.io/2020/11/09/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode-best-time-to-buy-and-sell-stock-iv/</id>
    <published>2020-11-09T02:35:35.000Z</published>
    <updated>2020-11-09T02:45:00.316Z</updated>
    
    <content type="html"><![CDATA[<h3 id="é¢˜æ„"><a class="markdownIt-Anchor" href="#é¢˜æ„"></a> é¢˜æ„</h3><h4 id="è‹±æ–‡é¢˜æ„"><a class="markdownIt-Anchor" href="#è‹±æ–‡é¢˜æ„"></a> è‹±æ–‡é¢˜æ„</h4><p><img src="https://i.loli.net/2020/11/09/CkhD5NLjK9ITpQX.png" alt="" /></p><a id="more"></a><h4 id="ä¸­æ–‡é¢˜æ„"><a class="markdownIt-Anchor" href="#ä¸­æ–‡é¢˜æ„"></a> ä¸­æ–‡é¢˜æ„</h4><p><img src="https://i.loli.net/2020/11/09/9sYQX2NUSCVgxPa.png" alt="" /></p><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>åŒæ ·çš„æ€è·¯ï¼Œä¼˜åŒ–ç©ºé—´è‡³<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>d</mi><mi>p</mi><mo>[</mo><mi>k</mi><mo>]</mo><mo>[</mo><mn>2</mn><mo>]</mo></mrow><annotation encoding="application/x-tex">dp[k][2]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">d</span><span class="mord mathit">p</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathrm">2</span><span class="mclose">]</span></span></span></span></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">maxProfit</span>(<span class="params">self, k: int, prices: List[int]</span>) -&gt; int:</span></span><br><span class="line">        <span class="keyword">if</span> len(prices) == <span class="number">0</span> :</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">            </span><br><span class="line">        dp = [[int(<span class="number">-1e9</span>), int(<span class="number">-1e9</span>)] <span class="keyword">for</span> i <span class="keyword">in</span> range(k + <span class="number">1</span>)]</span><br><span class="line"></span><br><span class="line">        dp[<span class="number">0</span>][<span class="number">0</span>] ,dp[<span class="number">0</span>][<span class="number">1</span>] = <span class="number">0</span>, -prices[<span class="number">0</span>]</span><br><span class="line">        <span class="keyword">for</span> price <span class="keyword">in</span> prices[<span class="number">1</span>: ] :</span><br><span class="line">            <span class="keyword">for</span> pk <span class="keyword">in</span> range(k, <span class="number">-1</span>, <span class="number">-1</span>) :</span><br><span class="line">                <span class="keyword">if</span> pk :</span><br><span class="line">                    dp[pk][<span class="number">0</span>] = max(dp[pk][<span class="number">0</span>], dp[pk - <span class="number">1</span>][<span class="number">1</span>] + price)</span><br><span class="line">                dp[pk][<span class="number">1</span>] = max(dp[pk][<span class="number">1</span>], dp[pk][<span class="number">0</span>] - price)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> max([dp[i][<span class="number">0</span>] <span class="keyword">for</span> i <span class="keyword">in</span> range(k + <span class="number">1</span>)])</span><br></pre></td></tr></table></figure><p><a href="https://imgchr.com/i/B7Eop6"><img src="https://s1.ax1x.com/2020/11/09/B7Eop6.png" alt="B7Eop6.png" /></a></p><p>æ—¶é—´å¤æ‚åº¦<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><mi>n</mi><mi>k</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">O(nk)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathit">n</span><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mclose">)</span></span></span></span>ï¼Œç©ºé—´å¤æ‚åº¦<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><mi>k</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">O(k)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mclose">)</span></span></span></span></p>]]></content>
    
    
    <summary type="html">&lt;h3 id=&quot;é¢˜æ„&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#é¢˜æ„&quot;&gt;&lt;/a&gt; é¢˜æ„&lt;/h3&gt;
&lt;h4 id=&quot;è‹±æ–‡é¢˜æ„&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#è‹±æ–‡é¢˜æ„&quot;&gt;&lt;/a&gt; è‹±æ–‡é¢˜æ„&lt;/h4&gt;
&lt;p&gt;&lt;img src=&quot;https://i.loli.net/2020/11/09/CkhD5NLjK9ITpQX.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="leetcode" scheme="https://christopherrliu.github.io/categories/leetcode/"/>
    
    
    <category term="åŠ¨æ€è§„åˆ’" scheme="https://christopherrliu.github.io/tags/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/"/>
    
    <category term="ç®—æ³•" scheme="https://christopherrliu.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
    <category term="é¢è¯•" scheme="https://christopherrliu.github.io/tags/%E9%9D%A2%E8%AF%95/"/>
    
    <category term="python" scheme="https://christopherrliu.github.io/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>æ¯å¤©ä¸€é“leetcode-best-time-to-buy-and-sell-stock-iii</title>
    <link href="https://christopherrliu.github.io/2020/11/09/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode-best-time-to-buy-and-sell-stock-iii/"/>
    <id>https://christopherrliu.github.io/2020/11/09/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode-best-time-to-buy-and-sell-stock-iii/</id>
    <published>2020-11-09T02:09:56.000Z</published>
    <updated>2020-11-09T02:35:57.538Z</updated>
    
    <content type="html"><![CDATA[<h3 id="é¢˜æ„"><a class="markdownIt-Anchor" href="#é¢˜æ„"></a> é¢˜æ„</h3><h4 id="è‹±æ–‡é¢˜æ„"><a class="markdownIt-Anchor" href="#è‹±æ–‡é¢˜æ„"></a> è‹±æ–‡é¢˜æ„</h4><p><img src="https://i.loli.net/2020/11/09/5TNxz2op6nw9uA1.png" alt="" /></p><a id="more"></a><h4 id="ä¸­æ–‡é¢˜æ„"><a class="markdownIt-Anchor" href="#ä¸­æ–‡é¢˜æ„"></a> ä¸­æ–‡é¢˜æ„</h4><p><img src="https://i.loli.net/2020/11/09/tz2kvcnNfFdRHUV.png" alt="" /></p><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>ä¸\mbox{II}çš„æ€è·¯ç›¸ä¼¼ï¼Œç”¨<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>d</mi><mi>p</mi><mo>[</mo><mi>i</mi><mo>]</mo><mo>[</mo><mi>j</mi><mo>]</mo><mo>[</mo><mi>k</mi><mo>]</mo></mrow><annotation encoding="application/x-tex">dp[i][j][k]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">d</span><span class="mord mathit">p</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mclose">]</span></span></span></span>è¡¨ç¤ºç¬¬<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.65952em;"></span><span class="strut bottom" style="height:0.65952em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">i</span></span></span></span>å¤©å·²ç»å®Œæˆäº†<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>j</mi></mrow><annotation encoding="application/x-tex">j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.65952em;"></span><span class="strut bottom" style="height:0.85396em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.05724em;">j</span></span></span></span>ç¬”äº¤æ˜“ï¼Œæ‰‹ä¸­æ˜¯å¦è¿˜æœ‰è‚¡ç¥¨çš„æœ€å¤§åˆ©æ¶¦ï¼Œè½¬ç§»å…¬å¼ä¸ºï¼š</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mtable><mtr><mtd><mrow><mi>d</mi><mi>p</mi><mo>[</mo><mi>i</mi><mo>]</mo><mo>[</mo><mi>j</mi><mo>]</mo><mo>[</mo><mn>0</mn><mo>]</mo></mrow></mtd><mtd><mrow><mrow></mrow><mo>=</mo><mi>m</mi><mi>a</mi><mi>x</mi><mo>(</mo><mi>d</mi><mi>p</mi><mo>[</mo><mi>i</mi><mo>âˆ’</mo><mn>1</mn><mo>]</mo><mo>[</mo><mi>j</mi><mo>]</mo><mo>[</mo><mn>0</mn><mo>]</mo><mo separator="true">,</mo><mi>d</mi><mi>p</mi><mo>[</mo><mi>i</mi><mo>âˆ’</mo><mn>1</mn><mo>]</mo><mo>[</mo><mi>j</mi><mo>âˆ’</mo><mn>1</mn><mo>]</mo><mo>[</mo><mn>1</mn><mo>]</mo><mo>+</mo><mi>p</mi><mi>r</mi><mi>i</mi><mi>c</mi><mi>e</mi><mi>s</mi><mo>[</mo><mi>i</mi><mo>]</mo><mo>)</mo></mrow></mtd></mtr><mtr><mtd><mrow><mi>d</mi><mi>p</mi><mo>[</mo><mi>i</mi><mo>]</mo><mo>[</mo><mi>j</mi><mo>]</mo><mo>[</mo><mn>1</mn><mo>]</mo></mrow></mtd><mtd><mrow><mrow></mrow><mo>=</mo><mi>m</mi><mi>a</mi><mi>x</mi><mo>(</mo><mi>d</mi><mi>p</mi><mo>[</mo><mi>i</mi><mo>âˆ’</mo><mn>1</mn><mo>]</mo><mo>[</mo><mi>j</mi><mo>]</mo><mo>[</mo><mn>1</mn><mo>]</mo><mo separator="true">,</mo><mi>d</mi><mi>p</mi><mo>[</mo><mi>i</mi><mo>âˆ’</mo><mn>1</mn><mo>]</mo><mo>[</mo><mi>j</mi><mo>]</mo><mo>[</mo><mn>0</mn><mo>]</mo><mo>âˆ’</mo><mi>p</mi><mi>r</mi><mi>i</mi><mi>c</mi><mi>e</mi><mi>s</mi><mo>[</mo><mi>i</mi><mo>]</mo><mo>)</mo></mrow></mtd></mtr></mtable></mrow><annotation encoding="application/x-tex">\begin{aligned}dp[i][j][0] &amp;= max(dp[i - 1][j][0], dp[i - 1][j - 1][1] + prices[i])\\dp[i][j][1] &amp;= max(dp[i - 1][j][1], dp[i - 1][j][0] - prices[i])\end{aligned}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.45em;"></span><span class="strut bottom" style="height:2.4000000000000004em;vertical-align:-0.9500000000000004em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist"><span style="top:-0.6099999999999999em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord mathit">d</span><span class="mord mathit">p</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathrm">0</span><span class="mclose">]</span></span></span><span style="top:0.5900000000000003em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord mathit">d</span><span class="mord mathit">p</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathrm">1</span><span class="mclose">]</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="col-align-l"><span class="vlist"><span style="top:-0.6099999999999999em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord displaystyle textstyle uncramped"></span><span class="mrel">=</span><span class="mord mathit">m</span><span class="mord mathit">a</span><span class="mord mathit">x</span><span class="mopen">(</span><span class="mord mathit">d</span><span class="mord mathit">p</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mbin">âˆ’</span><span class="mord mathrm">1</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathrm">0</span><span class="mclose">]</span><span class="mpunct">,</span><span class="mord mathit">d</span><span class="mord mathit">p</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mbin">âˆ’</span><span class="mord mathrm">1</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mbin">âˆ’</span><span class="mord mathrm">1</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathrm">1</span><span class="mclose">]</span><span class="mbin">+</span><span class="mord mathit">p</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">i</span><span class="mord mathit">c</span><span class="mord mathit">e</span><span class="mord mathit">s</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mclose">]</span><span class="mclose">)</span></span></span><span style="top:0.5900000000000003em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord displaystyle textstyle uncramped"></span><span class="mrel">=</span><span class="mord mathit">m</span><span class="mord mathit">a</span><span class="mord mathit">x</span><span class="mopen">(</span><span class="mord mathit">d</span><span class="mord mathit">p</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mbin">âˆ’</span><span class="mord mathrm">1</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathrm">1</span><span class="mclose">]</span><span class="mpunct">,</span><span class="mord mathit">d</span><span class="mord mathit">p</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mbin">âˆ’</span><span class="mord mathrm">1</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathrm">0</span><span class="mclose">]</span><span class="mbin">âˆ’</span><span class="mord mathit">p</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">i</span><span class="mord mathit">c</span><span class="mord mathit">e</span><span class="mord mathit">s</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mclose">]</span><span class="mclose">)</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span></span></span></span></p><p>å› ä¸º<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>d</mi><mi>p</mi><mo>[</mo><mi>i</mi><mo>]</mo></mrow><annotation encoding="application/x-tex">dp[i]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">d</span><span class="mord mathit">p</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mclose">]</span></span></span></span>åªä¸<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>d</mi><mi>p</mi><mo>[</mo><mi>i</mi><mo>âˆ’</mo><mn>1</mn><mo>]</mo></mrow><annotation encoding="application/x-tex">dp[i - 1]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">d</span><span class="mord mathit">p</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mbin">âˆ’</span><span class="mord mathrm">1</span><span class="mclose">]</span></span></span></span>æœ‰å…³ï¼Œå¹¶ä¸”<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>j</mi></mrow><annotation encoding="application/x-tex">j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.65952em;"></span><span class="strut bottom" style="height:0.85396em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.05724em;">j</span></span></span></span>çš„å–å€¼èŒƒå›´æœ‰é™ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å‡ ä¸ªå˜é‡ä¼˜åŒ–ç©ºé—´å¤æ‚åº¦è‡³<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><mn>1</mn><mo>)</mo></mrow><annotation encoding="application/x-tex">O(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathrm">1</span><span class="mclose">)</span></span></span></span></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">maxProfit</span>(<span class="params">self, prices: List[int]</span>) -&gt; int:</span></span><br><span class="line">        dp1, dp2, dp3, dp4 = <span class="number">-1e9</span>, <span class="number">-1e9</span>, -prices[<span class="number">0</span>], <span class="number">-1e9</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> idx, price <span class="keyword">in</span> enumerate(prices[<span class="number">1</span>:]) :</span><br><span class="line">            ndp1 = max(dp1, dp3 + price)</span><br><span class="line">            ndp2 = max(dp2, dp4 + price)</span><br><span class="line">            ndp3 = max(dp3, <span class="number">0</span> - price)</span><br><span class="line">            ndp4 = max(dp4, dp1 - price)</span><br><span class="line"></span><br><span class="line">            dp1, dp2, dp3, dp4 = ndp1, ndp2, ndp3, ndp4</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> max(dp1, dp2, <span class="number">0</span>)</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2020/11/09/Hnqzg4mwRGAaoY1.png" alt="" /></p><p>æ—¶é—´å¤æ‚åº¦<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><mi>n</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathit">n</span><span class="mclose">)</span></span></span></span>ï¼Œç©ºé—´å¤æ‚åº¦<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><mn>1</mn><mo>)</mo></mrow><annotation encoding="application/x-tex">O(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathrm">1</span><span class="mclose">)</span></span></span></span></p>]]></content>
    
    
    <summary type="html">&lt;h3 id=&quot;é¢˜æ„&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#é¢˜æ„&quot;&gt;&lt;/a&gt; é¢˜æ„&lt;/h3&gt;
&lt;h4 id=&quot;è‹±æ–‡é¢˜æ„&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#è‹±æ–‡é¢˜æ„&quot;&gt;&lt;/a&gt; è‹±æ–‡é¢˜æ„&lt;/h4&gt;
&lt;p&gt;&lt;img src=&quot;https://i.loli.net/2020/11/09/5TNxz2op6nw9uA1.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="leetcode" scheme="https://christopherrliu.github.io/categories/leetcode/"/>
    
    
    <category term="åŠ¨æ€è§„åˆ’" scheme="https://christopherrliu.github.io/tags/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/"/>
    
    <category term="ç®—æ³•" scheme="https://christopherrliu.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
    <category term="é¢è¯•" scheme="https://christopherrliu.github.io/tags/%E9%9D%A2%E8%AF%95/"/>
    
    <category term="python" scheme="https://christopherrliu.github.io/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>æ¯å¤©ä¸€é“leetcode-kth-smallest-number-in-multiplication-table</title>
    <link href="https://christopherrliu.github.io/2020/11/08/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode-kth-smallest-number-in-multiplication-table/"/>
    <id>https://christopherrliu.github.io/2020/11/08/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode-kth-smallest-number-in-multiplication-table/</id>
    <published>2020-11-08T12:19:14.000Z</published>
    <updated>2020-11-08T12:39:24.180Z</updated>
    
    <content type="html"><![CDATA[<h3 id="é¢˜æ„"><a class="markdownIt-Anchor" href="#é¢˜æ„"></a> é¢˜æ„</h3><h4 id="è‹±æ–‡é¢˜æ„"><a class="markdownIt-Anchor" href="#è‹±æ–‡é¢˜æ„"></a> è‹±æ–‡é¢˜æ„</h4><p><img src="https://s1.ax1x.com/2020/11/08/BTZ8XD.png" alt="" /></p><a id="more"></a><h4 id="ä¸­æ–‡é¢˜æ„"><a class="markdownIt-Anchor" href="#ä¸­æ–‡é¢˜æ„"></a> ä¸­æ–‡é¢˜æ„</h4><p><img src="https://s1.ax1x.com/2020/11/08/BTZyng.png" alt="" /></p><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>å› ä¸º<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn><msup><mn>0</mn><mrow><mn>1</mn><mn>0</mn></mrow></msup></mrow><annotation encoding="application/x-tex">10^{10}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8141079999999999em;"></span><span class="strut bottom" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathrm">1</span><span class="mord"><span class="mord mathrm">0</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">1</span><span class="mord mathrm">0</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span>çš„æ•°æ®è§„æ¨¡ï¼Œå¿…é¡»æœ‰<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>l</mi><mi>o</mi><mi>g</mi><mi>n</mi></mrow><annotation encoding="application/x-tex">logn</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord mathit">n</span></span></span></span>çš„è§£æ³•ï¼Œå› æ­¤æˆ‘ä»¬äºŒåˆ†æœç´¢ç­”æ¡ˆï¼Œç„¶ååœ¨<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><mi>n</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathit">n</span><span class="mclose">)</span></span></span></span>çš„å¤æ‚åº¦å†…éªŒè¯è§£çš„æ­£ç¡®æ€§å³å¯</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">check</span>(<span class="params">self, num, m, n, k</span>) :</span></span><br><span class="line">        loc_x = min(m, ceil(num / n))</span><br><span class="line">        loc_y = min(n, ceil(num / loc_x))</span><br><span class="line"></span><br><span class="line">        bigger_num = (m - loc_x + <span class="number">1</span>) * (n - loc_y + <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, loc_y) :</span><br><span class="line">            bigger_num = bigger_num + max(<span class="number">0</span>, m - ceil(num / i) + <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, loc_x) :</span><br><span class="line">            bigger_num = bigger_num + max(<span class="number">0</span>, n - ceil(num / i) + <span class="number">1</span>)</span><br><span class="line">            </span><br><span class="line">        <span class="keyword">return</span> m * n - bigger_num &gt;= k</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">findKthNumber</span>(<span class="params">self, m: int, n: int, k: int</span>) -&gt; int:</span></span><br><span class="line">        lower, upper = <span class="number">1</span>, m * n</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> lower &lt;= upper :</span><br><span class="line">            mid = (lower + upper) // <span class="number">2</span></span><br><span class="line">            <span class="keyword">if</span> self.check(mid, m, n, k) :</span><br><span class="line">                upper = mid - <span class="number">1</span></span><br><span class="line">            <span class="keyword">else</span> :</span><br><span class="line">                lower = mid + <span class="number">1</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> upper</span><br></pre></td></tr></table></figure><p><img src="https://s1.ax1x.com/2020/11/08/BTerP1.png" alt="" /></p><p>æ—¶é—´å¤æ‚åº¦<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><mi>n</mi><mi>l</mi><mi>o</mi><mi>g</mi><mi>n</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">O(nlogn)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathit">n</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord mathit">n</span><span class="mclose">)</span></span></span></span>ï¼Œç©ºé—´å¤æ‚åº¦<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><mn>1</mn><mo>)</mo></mrow><annotation encoding="application/x-tex">O(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathrm">1</span><span class="mclose">)</span></span></span></span></p>]]></content>
    
    
    <summary type="html">&lt;h3 id=&quot;é¢˜æ„&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#é¢˜æ„&quot;&gt;&lt;/a&gt; é¢˜æ„&lt;/h3&gt;
&lt;h4 id=&quot;è‹±æ–‡é¢˜æ„&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#è‹±æ–‡é¢˜æ„&quot;&gt;&lt;/a&gt; è‹±æ–‡é¢˜æ„&lt;/h4&gt;
&lt;p&gt;&lt;img src=&quot;https://s1.ax1x.com/2020/11/08/BTZ8XD.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="leetcode" scheme="https://christopherrliu.github.io/categories/leetcode/"/>
    
    
    <category term="ç®—æ³•" scheme="https://christopherrliu.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
    <category term="é¢è¯•" scheme="https://christopherrliu.github.io/tags/%E9%9D%A2%E8%AF%95/"/>
    
    <category term="python" scheme="https://christopherrliu.github.io/tags/python/"/>
    
    <category term="äºŒåˆ†" scheme="https://christopherrliu.github.io/tags/%E4%BA%8C%E5%88%86/"/>
    
  </entry>
  
  <entry>
    <title>leetcodeå‘¨èµ›-weekly-contest-214</title>
    <link href="https://christopherrliu.github.io/2020/11/08/leetcode%E5%91%A8%E8%B5%9B/leetcode%E5%91%A8%E8%B5%9B-weekly-contest-214/"/>
    <id>https://christopherrliu.github.io/2020/11/08/leetcode%E5%91%A8%E8%B5%9B/leetcode%E5%91%A8%E8%B5%9B-weekly-contest-214/</id>
    <published>2020-11-08T07:34:07.000Z</published>
    <updated>2020-11-08T12:19:43.790Z</updated>
    
    <content type="html"><![CDATA[<p>ç¬¬äºŒæ¬¡å‘¨èµ›ï¼Œåšäº†åŠä¸ªå°æ—¶é¢˜ç›®ï¼Œåªåšäº†ä¸€é“åŠğŸ¤¦â€</p><p><img src="https://i.loli.net/2020/11/08/uJVox12R83y4nmB.png" alt="" /></p><a id="more"></a><h3 id="è·å–ç”Ÿæˆæ•°ç»„ä¸­çš„æœ€å¤§å€¼"><a class="markdownIt-Anchor" href="#è·å–ç”Ÿæˆæ•°ç»„ä¸­çš„æœ€å¤§å€¼"></a> <a href="https://leetcode-cn.com/problems/get-maximum-in-generated-array/">è·å–ç”Ÿæˆæ•°ç»„ä¸­çš„æœ€å¤§å€¼</a></h3><h4 id="é¢˜æ„"><a class="markdownIt-Anchor" href="#é¢˜æ„"></a> é¢˜æ„</h4><p><img src="https://i.loli.net/2020/11/08/GvpzWoS5mN6HkEA.png" alt="" /></p><h4 id="åšæ³•"><a class="markdownIt-Anchor" href="#åšæ³•"></a> åšæ³•</h4><p>æ°´é¢˜ï¼ŒæŒ‰é¢˜æ„æ¨¡æ‹Ÿå³å¯</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">getMaximumGenerated</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(n == <span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span>(n == <span class="number">1</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> ans = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> nums[<span class="number">101</span>];</span><br><span class="line">        nums[<span class="number">0</span>] = <span class="number">0</span>, nums[<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; ; ++i) &#123;</span><br><span class="line">            <span class="keyword">if</span>(i * <span class="number">2</span> &gt; n) <span class="keyword">break</span>;</span><br><span class="line">            nums[<span class="number">2</span> * i] = nums[i];</span><br><span class="line">            ans = max(ans, nums[<span class="number">2</span> * i]);</span><br><span class="line">            <span class="keyword">if</span>(i * <span class="number">2</span> + <span class="number">1</span> &gt; n) <span class="keyword">break</span>;</span><br><span class="line">            nums[<span class="number">2</span> * i + <span class="number">1</span>] = nums[i] + nums[i + <span class="number">1</span>];</span><br><span class="line">            ans = max(ans, nums[<span class="number">2</span> * i + <span class="number">1</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2020/11/08/ADx8oFwTQ3HuVjO.png" alt="" /></p><h3 id="å­—ç¬¦é¢‘æ¬¡å”¯ä¸€çš„æœ€å°åˆ é™¤æ¬¡æ•°"><a class="markdownIt-Anchor" href="#å­—ç¬¦é¢‘æ¬¡å”¯ä¸€çš„æœ€å°åˆ é™¤æ¬¡æ•°"></a> <a href="https://leetcode-cn.com/problems/minimum-deletions-to-make-character-frequencies-unique/">å­—ç¬¦é¢‘æ¬¡å”¯ä¸€çš„æœ€å°åˆ é™¤æ¬¡æ•°</a></h3><h4 id="é¢˜æ„-2"><a class="markdownIt-Anchor" href="#é¢˜æ„-2"></a> é¢˜æ„</h4><p><img src="https://i.loli.net/2020/11/08/XHsaIy8kbWoUxFS.png" alt="" /></p><h4 id="åšæ³•-2"><a class="markdownIt-Anchor" href="#åšæ³•-2"></a> åšæ³•</h4><p>é¦–å…ˆç»Ÿè®¡å‡ºæ‰€æœ‰å­—æ¯çš„å‡ºç°æ­¤æ—¶ï¼Œç„¶åä»å¤§åˆ°å°æ’åºï¼Œå‡è®¾ä¸º<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi><mi>u</mi><msub><mi>m</mi><mn>1</mn></msub><mo separator="true">,</mo><mi>n</mi><mi>u</mi><msub><mi>m</mi><mn>2</mn></msub><mo separator="true">,</mo><mi>n</mi><mi>u</mi><msub><mi>m</mi><mn>2</mn></msub><mo separator="true">,</mo><mi>n</mi><mi>u</mi><msub><mi>m</mi><mn>2</mn></msub><mo separator="true">,</mo><mi>n</mi><mi>u</mi><msub><mi>m</mi><mn>3</mn></msub></mrow><annotation encoding="application/x-tex">num_1,num_2,num_2,num_2,num_3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord mathit">n</span><span class="mord mathit">u</span><span class="mord"><span class="mord mathit">m</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathrm">1</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord mathit">n</span><span class="mord mathit">u</span><span class="mord"><span class="mord mathit">m</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord mathit">n</span><span class="mord mathit">u</span><span class="mord"><span class="mord mathit">m</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord mathit">n</span><span class="mord mathit">u</span><span class="mord"><span class="mord mathit">m</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord mathit">n</span><span class="mord mathit">u</span><span class="mord"><span class="mord mathit">m</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathrm">3</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span>ï¼Œå…¶ä¸­<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi><mi>u</mi><msub><mi>m</mi><mi>i</mi></msub><mo>=</mo><mo>=</mo><mi>n</mi><mi>u</mi><msub><mi>m</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">num_i==num_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="base textstyle uncramped"><span class="mord mathit">n</span><span class="mord mathit">u</span><span class="mord"><span class="mord mathit">m</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">=</span><span class="mrel">=</span><span class="mord mathit">n</span><span class="mord mathit">u</span><span class="mord"><span class="mord mathit">m</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span>ï¼Œæˆ‘ä»¬æƒ³è®©ä¸‰ä¸ª<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi><mi>u</mi><msub><mi>m</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">num_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="base textstyle uncramped"><span class="mord mathit">n</span><span class="mord mathit">u</span><span class="mord"><span class="mord mathit">m</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span>å˜ä¸ºä¸ç›¸ç­‰çš„æ•°ï¼Œå› ä¸ºåªèƒ½å¢åŠ ï¼Œæ‰€ä»¥æœ€å¥½çš„æ–¹æ¡ˆå°±æ˜¯<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>âˆ’</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.64444em;"></span><span class="strut bottom" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="base textstyle uncramped"><span class="mord">âˆ’</span><span class="mord mathrm">1</span></span></span></span>ï¼Œä¹Ÿå°±æ˜¯è¯´éµå¾ªè¿™æ ·çš„è§„åˆ™ï¼š</p><ul><li>åä¸€ä¸ªæ•°å­—å¤§äºç­‰äºå‰ä¸€ä¸ªæ•°å­—å°±æ˜¯å½“å‰æ•°å­—å˜ä¸ºå‰ä¸€ä¸ªæ•°å­—å‡ä¸€</li></ul><p>è¿™æ ·å¾—åˆ°çš„ç­”æ¡ˆå¿…å®šæ˜¯æœ€ä¼˜çš„</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">class <span class="title">Solution</span><span class="params">(object)</span>:</span></span><br><span class="line"><span class="function">    def <span class="title">minDeletions</span><span class="params">(self, s)</span>:</span></span><br><span class="line">        &quot;&quot;&quot;</span><br><span class="line">        :type s: str</span><br><span class="line">        :rtype: <span class="keyword">int</span></span><br><span class="line">        <span class="string">&quot;&quot;</span><span class="string">&quot;</span></span><br><span class="line"><span class="string">        s_appear_num = dict()</span></span><br><span class="line"><span class="string">        for ss in s :</span></span><br><span class="line"><span class="string">            if ss not in s_appear_num.keys() :</span></span><br><span class="line"><span class="string">                s_appear_num.update(&#123;</span></span><br><span class="line"><span class="string">                    ss : 0</span></span><br><span class="line"><span class="string">                &#125;)</span></span><br><span class="line"><span class="string">            s_appear_num[ss] = s_appear_num[ss] + 1</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        s_appear_num = sorted(s_appear_num.values(), key=lambda x : x, reverse=True)</span></span><br><span class="line"><span class="string">        </span></span><br><span class="line"><span class="string">        pre_num = -1</span></span><br><span class="line"><span class="string">        ans = 0</span></span><br><span class="line"><span class="string">        for num in s_appear_num :</span></span><br><span class="line"><span class="string">            if pre_num != -1 and num &gt;= pre_num :</span></span><br><span class="line"><span class="string">                ans = ans + (num - max(0, pre_num - 1))</span></span><br><span class="line"><span class="string">                num = max(0, pre_num - 1)</span></span><br><span class="line"><span class="string">            pre_num = num</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        return ans</span></span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2020/11/08/ScJZOrfUoYLkCwn.png" alt="" /></p><p>æ—¶é—´å¤æ‚åº¦<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><mi>n</mi><mi>l</mi><mi>o</mi><mi>g</mi><mi>n</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">O(nlogn)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathit">n</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord mathit">n</span><span class="mclose">)</span></span></span></span>ï¼Œåæ¥æƒ³äº†ä¸€ä¸‹å…¶å®ä¸ç”¨æ’åºï¼Œç”¨ä¸€ä¸ªsetä¹Ÿå¯ä»¥ç»´æŠ¤</p><h3 id="é”€å”®ä»·å€¼å‡å°‘çš„é¢œè‰²çƒ"><a class="markdownIt-Anchor" href="#é”€å”®ä»·å€¼å‡å°‘çš„é¢œè‰²çƒ"></a> <a href="https://leetcode-cn.com/problems/sell-diminishing-valued-colored-balls/">é”€å”®ä»·å€¼å‡å°‘çš„é¢œè‰²çƒ</a></h3><h4 id="é¢˜æ„-3"><a class="markdownIt-Anchor" href="#é¢˜æ„-3"></a> é¢˜æ„</h4><p><img src="https://i.loli.net/2020/11/08/KWfqlc4Qa5AUY7x.png" alt="" /></p><h3 id="åšæ³•-3"><a class="markdownIt-Anchor" href="#åšæ³•-3"></a> åšæ³•</h3><p>è´ªå¿ƒçš„æƒ³æ³•ï¼Œæˆ‘ä»¬æ¯æ¬¡è‚¯å®šæ˜¯è¦é€‰æ‹©æ•°é‡æœ€å¤šçš„çƒï¼Œé‚£ä¹ˆä½¿ç”¨ä¼˜å…ˆé˜Ÿåˆ—ç»´æŠ¤æ•°é‡ï¼Œæ¯æ¬¡ä»é˜Ÿåˆ—å–å‡ºæœ€å¤§å€¼ï¼Œç„¶åæ›´æ–°orderï¼Œå†å°†è¿™ä¸ªæœ€å¤§å€¼å‡ä¸€æ”¾å›é˜Ÿåˆ—ï¼Œä½†æ˜¯orderçš„èŒƒå›´è¾¾åˆ°äº†<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn><msup><mn>0</mn><mn>9</mn></msup></mrow><annotation encoding="application/x-tex">10^9</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8141079999999999em;"></span><span class="strut bottom" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathrm">1</span><span class="mord"><span class="mord mathrm">0</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathrm">9</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span>ï¼Œè¿™æ ·è‚¯å®šä¼šè¶…æ—¶ã€‚è€ƒè™‘åˆ°å¦‚æœè¿™ä¸ªæœ€å¤§å€¼æ¯”æ¬¡å¤§å€¼å¤§<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>m</mi></mrow><annotation encoding="application/x-tex">m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.43056em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">m</span></span></span></span>çš„è¯ï¼Œé‚£ä¹ˆå®ƒè‚¯å®šä¼šè¢«å–<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>m</mi></mrow><annotation encoding="application/x-tex">m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.43056em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">m</span></span></span></span>æ¬¡ï¼Œæ‰€ä»¥æ¯æ¬¡ä¸ä»…å–å‡ºæœ€å¤§å€¼ï¼Œè¿˜è¦å–å‡ºæ¬¡å¤§å€¼ï¼Œç„¶åæ ¹æ®æ¬¡å¤§å€¼æ¥æ›´æ–°æœ€å¤§å€¼ã€‚è¿™æ ·è¿˜ä¸å¤Ÿï¼Œå› ä¸ºå¦‚æœinventæ•°ç»„çš„æ•°é‡å¾ˆæ¥è¿‘ï¼Œå°±ä¼šé€€åŒ–æˆ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><mi>n</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathit">n</span><span class="mclose">)</span></span></span></span>ï¼Œè¿˜æ˜¯ä¼šè¶…æ—¶ï¼Œæ‰€ä»¥ç”¨ä¸€ä¸ªhashè¡¨è®°å½•æ¯ä¸ªæ•°é‡çš„ä¸ªæ•°ï¼Œä¿è¯æ¯ä¸ªé¢œè‰²æ•°é‡åªè¿›å…¥é˜Ÿåˆ—ä¸€æ¬¡å°±å¯ä»¥é€šè¿‡ï¼Œè¿˜æœ‰ä¸€äº›ç»†èŠ‚å¯çœ‹ä»£ç ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">const</span> <span class="keyword">long</span> <span class="keyword">long</span> mod = <span class="number">1e9</span> + <span class="number">7</span>;</span><br><span class="line">    <span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"></span><br><span class="line">    <span class="function">ll <span class="title">calculateSum</span><span class="params">(ll size, ll num, ll upper)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// numç»„å–å€¼åˆ†å¸ƒå°½å¯èƒ½å‡åŒ€</span></span><br><span class="line">        ll per_num = <span class="built_in">floor</span>(size * <span class="number">1.0</span> / num);</span><br><span class="line">        ll lower = upper - per_num + <span class="number">1</span>;</span><br><span class="line">        <span class="comment">// ç­‰å·®å…¬å¼</span></span><br><span class="line">        ll sum = (per_num * (upper + lower)) / <span class="number">2</span>;</span><br><span class="line">        <span class="comment">// numç»„</span></span><br><span class="line">        sum = ((sum % mod) * (num % mod)) % mod;</span><br><span class="line">        <span class="comment">// è¿˜å·®å¤šå°‘ä¸ª</span></span><br><span class="line">        size -= per_num * num;</span><br><span class="line">        lower -= <span class="number">1</span>;</span><br><span class="line">        sum = (sum + size * lower) % mod;</span><br><span class="line">        <span class="keyword">return</span> sum;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">maxProfit</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; inventory, <span class="keyword">int</span> orders)</span> </span>&#123;</span><br><span class="line">        ll ans = <span class="number">0</span>;</span><br><span class="line">        <span class="built_in">priority_queue</span>&lt;ll, <span class="built_in">vector</span>&lt;ll&gt;, less&lt;ll&gt;&gt; que;</span><br><span class="line">        <span class="built_in">unordered_map</span>&lt;ll, <span class="keyword">int</span>&gt; hash;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">const</span> <span class="keyword">auto</span>&amp; invet : inventory) &#123;</span><br><span class="line">            <span class="keyword">if</span>(hash.count((ll)invet)) &#123;</span><br><span class="line">                hash[(ll)invet]++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                que.push(invet);</span><br><span class="line">                hash[(ll)invet] = <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span>(orders &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            ll max_invent = que.top();</span><br><span class="line">            que.pop();</span><br><span class="line">            ll sec_max_invent = que.empty() ? <span class="number">0</span> : que.top();</span><br><span class="line">            ll len = min((ll)orders, (max_invent - sec_max_invent) * hash[max_invent]);</span><br><span class="line">            ll sum = calculateSum(len, hash[max_invent], max_invent);</span><br><span class="line"></span><br><span class="line">            ans = (ans + sum) % mod;</span><br><span class="line">            hash[sec_max_invent] += hash[max_invent];</span><br><span class="line">            orders -= len;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2020/11/08/UjF1kxI5Rz2cg3X.png" alt="" /></p><p>æ—¶é—´å¤æ‚åº¦<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><mi>k</mi><mi>l</mi><mi>o</mi><mi>g</mi><mi>k</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">O(klogk)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mclose">)</span></span></span></span>ï¼Œç©ºé—´å¤æ‚åº¦<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>l</mi><mi>o</mi><mi>g</mi><mi>k</mi></mrow><annotation encoding="application/x-tex">logk</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord mathit" style="margin-right:0.03148em;">k</span></span></span></span>ï¼Œå…¶ä¸­<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.69444em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.03148em;">k</span></span></span></span>æ˜¯inventoryä¸­ä¸åŒå€¼çš„ä¸ªæ•°</p><h3 id="é€šè¿‡æŒ‡ä»¤åˆ›å»ºæœ‰åºæ•°ç»„"><a class="markdownIt-Anchor" href="#é€šè¿‡æŒ‡ä»¤åˆ›å»ºæœ‰åºæ•°ç»„"></a> <a href="https://leetcode-cn.com/problems/create-sorted-array-through-instructions/">é€šè¿‡æŒ‡ä»¤åˆ›å»ºæœ‰åºæ•°ç»„</a></h3><h4 id="é¢˜æ„-4"><a class="markdownIt-Anchor" href="#é¢˜æ„-4"></a> é¢˜æ„</h4><p><img src="https://i.loli.net/2020/11/08/juQNSibnFve16By.png" alt="" /></p><h4 id="åšæ³•-4"><a class="markdownIt-Anchor" href="#åšæ³•-4"></a> åšæ³•</h4><p>å¯¹äºæ¯ä¸ªæ’å…¥çš„å…ƒç´ æˆ‘ä»¬éœ€è¦æ¯”è¾ƒ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>[</mo><mn>0</mn><mo separator="true">,</mo><mi>i</mi><mi>n</mi><mi>s</mi><mi>t</mi><mi>r</mi><mi>u</mi><mi>c</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mi>s</mi><mo>[</mo><mi>i</mi><mo>]</mo><mo>âˆ’</mo><mn>1</mn><mo>]</mo></mrow><annotation encoding="application/x-tex">[0, instructions[i] - 1]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mopen">[</span><span class="mord mathrm">0</span><span class="mpunct">,</span><span class="mord mathit">i</span><span class="mord mathit">n</span><span class="mord mathit">s</span><span class="mord mathit">t</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">u</span><span class="mord mathit">c</span><span class="mord mathit">t</span><span class="mord mathit">i</span><span class="mord mathit">o</span><span class="mord mathit">n</span><span class="mord mathit">s</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mclose">]</span><span class="mbin">âˆ’</span><span class="mord mathrm">1</span><span class="mclose">]</span></span></span></span>å’Œ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>[</mo><mi>i</mi><mi>n</mi><mi>s</mi><mi>t</mi><mi>r</mi><mi>u</mi><mi>c</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mi>s</mi><mo>[</mo><mi>i</mi><mo>]</mo><mo>+</mo><mn>1</mn><mo separator="true">,</mo><mi>M</mi><mi>A</mi><mi>X</mi><mo>]</mo></mrow><annotation encoding="application/x-tex">[instructions[i] + 1, MAX]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mopen">[</span><span class="mord mathit">i</span><span class="mord mathit">n</span><span class="mord mathit">s</span><span class="mord mathit">t</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">u</span><span class="mord mathit">c</span><span class="mord mathit">t</span><span class="mord mathit">i</span><span class="mord mathit">o</span><span class="mord mathit">n</span><span class="mord mathit">s</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mclose">]</span><span class="mbin">+</span><span class="mord mathrm">1</span><span class="mpunct">,</span><span class="mord mathit" style="margin-right:0.10903em;">M</span><span class="mord mathit">A</span><span class="mord mathit" style="margin-right:0.07847em;">X</span><span class="mclose">]</span></span></span></span>ä¸¤ä¸ªåŒºé—´å…ƒç´ ä¸ªæ•°çš„å¤§å°ï¼Œå¿«é€Ÿæ±‚åŒºé—´å’Œåº”è¯¥æƒ³åˆ°çº¿æ®µæ ‘å’Œæ ‘çŠ¶æ•°ç»„ã€‚</p><p>å…ˆå¯¹<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>i</mi><mi>n</mi><mi>s</mi><mi>t</mi><mi>r</mi><mi>u</mi><mi>c</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">instructions</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.65952em;"></span><span class="strut bottom" style="height:0.65952em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">i</span><span class="mord mathit">n</span><span class="mord mathit">s</span><span class="mord mathit">t</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">u</span><span class="mord mathit">c</span><span class="mord mathit">t</span><span class="mord mathit">i</span><span class="mord mathit">o</span><span class="mord mathit">n</span><span class="mord mathit">s</span></span></span></span>åšç¦»æ•£åŒ–å¤„ç†ï¼Œç„¶åéå†æ•°ç»„ï¼ŒæŸ¥è¯¢åŒºé—´å…ƒç´ ä¸ªæ•°ï¼ŒæŸ¥è¯¢å®Œä¹‹åå†æ›´æ–°</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;number[]&#125;</span> <span class="variable">instructions</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;number&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> createSortedArray = <span class="function"><span class="keyword">function</span>(<span class="params">instructions</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> mod = <span class="number">1e9</span> + <span class="number">7</span>;</span><br><span class="line">    <span class="keyword">let</span> idx = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">let</span> inst2idx = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line">    <span class="keyword">let</span> uniqueIntructions = <span class="keyword">new</span> <span class="built_in">Set</span>(instructions.slice(<span class="number">0</span>).sort(<span class="function">(<span class="params">a, b</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> a - b;</span><br><span class="line">    &#125;));</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> inst <span class="keyword">of</span> uniqueIntructions.values()) &#123;</span><br><span class="line">        <span class="built_in">Object</span>.assign(inst2idx, &#123;[inst] : ++idx&#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> tree = <span class="keyword">new</span> <span class="built_in">Array</span>(idx + <span class="number">1</span>).fill(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> update = <span class="function"><span class="keyword">function</span>(<span class="params">x</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">while</span>(x &lt;= idx) &#123;</span><br><span class="line">            tree[x] += <span class="number">1</span>;</span><br><span class="line">            x += (x &amp; (-x));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">let</span> query = <span class="function"><span class="keyword">function</span>(<span class="params">x</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">let</span> res = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(x) &#123;</span><br><span class="line">            res += tree[x];</span><br><span class="line">            x -= (x &amp; (-x));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> ans = <span class="number">0</span>, cnt = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> inst <span class="keyword">of</span> instructions) &#123;</span><br><span class="line">        <span class="keyword">let</span> value = <span class="built_in">Math</span>.min(query(inst2idx[inst] - <span class="number">1</span>), cnt - query(inst2idx[inst]));</span><br><span class="line">        ans = (ans + value) % mod;</span><br><span class="line">        update(inst2idx[inst]);</span><br><span class="line">        ++cnt;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2020/11/08/k4LbTnlUpvhgdJj.png" alt="" /></p><p>æ—¶é—´å¤æ‚åº¦<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><mi>n</mi><mi>l</mi><mi>o</mi><mi>g</mi><mi>n</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">O(nlogn)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathit">n</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord mathit">n</span><span class="mclose">)</span></span></span></span>ï¼Œç©ºé—´å¤æ‚åº¦<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><mi>n</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathit">n</span><span class="mclose">)</span></span></span></span></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;ç¬¬äºŒæ¬¡å‘¨èµ›ï¼Œåšäº†åŠä¸ªå°æ—¶é¢˜ç›®ï¼Œåªåšäº†ä¸€é“åŠğŸ¤¦â€&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://i.loli.net/2020/11/08/uJVox12R83y4nmB.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="leetcode" scheme="https://christopherrliu.github.io/categories/leetcode/"/>
    
    
    <category term="è´ªå¿ƒ" scheme="https://christopherrliu.github.io/tags/%E8%B4%AA%E5%BF%83/"/>
    
    <category term="ç®—æ³•" scheme="https://christopherrliu.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
    <category term="é¢è¯•" scheme="https://christopherrliu.github.io/tags/%E9%9D%A2%E8%AF%95/"/>
    
    <category term="c++" scheme="https://christopherrliu.github.io/tags/c/"/>
    
    <category term="python" scheme="https://christopherrliu.github.io/tags/python/"/>
    
    <category term="javascript" scheme="https://christopherrliu.github.io/tags/javascript/"/>
    
    <category term="ä¼˜å…ˆé˜Ÿåˆ—" scheme="https://christopherrliu.github.io/tags/%E4%BC%98%E5%85%88%E9%98%9F%E5%88%97/"/>
    
    <category term="çº¿æ®µæ ‘" scheme="https://christopherrliu.github.io/tags/%E7%BA%BF%E6%AE%B5%E6%A0%91/"/>
    
    <category term="æ ‘çŠ¶æ•°ç»„" scheme="https://christopherrliu.github.io/tags/%E6%A0%91%E7%8A%B6%E6%95%B0%E7%BB%84/"/>
    
  </entry>
  
  <entry>
    <title>æ¯å¤©ä¸€é“leetcode-best-time-to-buy-and-sell-stock-ii</title>
    <link href="https://christopherrliu.github.io/2020/11/08/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode-best-time-to-buy-and-sell-stock-ii/"/>
    <id>https://christopherrliu.github.io/2020/11/08/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode-best-time-to-buy-and-sell-stock-ii/</id>
    <published>2020-11-08T05:39:01.000Z</published>
    <updated>2020-11-08T07:32:26.935Z</updated>
    
    <content type="html"><![CDATA[<h3 id="é¢˜æ„"><a class="markdownIt-Anchor" href="#é¢˜æ„"></a> é¢˜æ„</h3><h4 id="è‹±æ–‡é¢˜æ„"><a class="markdownIt-Anchor" href="#è‹±æ–‡é¢˜æ„"></a> è‹±æ–‡é¢˜æ„</h4><p><img src="https://s1.ax1x.com/2020/11/08/Bo3iwT.png" alt="" /></p><a id="more"></a><h4 id="ä¸­æ–‡é¢˜æ„"><a class="markdownIt-Anchor" href="#ä¸­æ–‡é¢˜æ„"></a> ä¸­æ–‡é¢˜æ„</h4><p><img src="https://s1.ax1x.com/2020/11/08/Bo3EY4.png" alt="" /></p><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><h4 id="åŠ¨æ€è§„åˆ’"><a class="markdownIt-Anchor" href="#åŠ¨æ€è§„åˆ’"></a> åŠ¨æ€è§„åˆ’</h4><p>æ¯”è¾ƒç›´è§‚çš„æƒ³æ³•æ˜¯<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>d</mi><mi>p</mi><mo>[</mo><mi>i</mi><mo>]</mo></mrow><annotation encoding="application/x-tex">dp[i]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">d</span><span class="mord mathit">p</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mclose">]</span></span></span></span>è¡¨ç¤º<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn><mo>âˆ’</mo><mi>i</mi></mrow><annotation encoding="application/x-tex">1-i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.65952em;"></span><span class="strut bottom" style="height:0.74285em;vertical-align:-0.08333em;"></span><span class="base textstyle uncramped"><span class="mord mathrm">1</span><span class="mbin">âˆ’</span><span class="mord mathit">i</span></span></span></span>çš„è‚¡ç¥¨æœ€å¤§æ”¶ç›Šï¼Œé‚£ä¹ˆè½¬ç§»å…¬å¼ä¸ºï¼š</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>d</mi><mi>p</mi><mo>[</mo><mi>i</mi><mo>]</mo><mo>=</mo><mi>m</mi><mi>a</mi><mi>x</mi><mo>(</mo><mi>d</mi><mi>p</mi><mo>[</mo><mi>i</mi><mo>âˆ’</mo><mn>1</mn><mo>]</mo><mo separator="true">,</mo><mi>d</mi><mi>p</mi><mo>[</mo><mi>j</mi><mo>âˆ’</mo><mn>1</mn><mo>]</mo><mo>+</mo><mi>p</mi><mi>r</mi><mi>i</mi><mi>c</mi><mi>e</mi><mi>s</mi><mo>[</mo><mi>i</mi><mo>]</mo><mo>âˆ’</mo><mi>p</mi><mi>r</mi><mi>i</mi><mi>c</mi><mi>e</mi><mi>s</mi><mo>[</mo><mi>j</mi><mo>]</mo><mo>)</mo><mo separator="true">,</mo><mspace width="1em"></mspace><mi>p</mi><mi>r</mi><mi>i</mi><mi>c</mi><mi>e</mi><mi>s</mi><mo>[</mo><mi>j</mi><mo>]</mo><mo>&lt;</mo><mi>p</mi><mi>r</mi><mi>i</mi><mi>c</mi><mi>e</mi><mi>s</mi><mo>[</mo><mi>i</mi><mo>]</mo></mrow><annotation encoding="application/x-tex">dp[i] = max(dp[i - 1], dp[j - 1] + prices[i] - prices[j]),\quad prices[j] \lt prices[i]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathit">d</span><span class="mord mathit">p</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mclose">]</span><span class="mrel">=</span><span class="mord mathit">m</span><span class="mord mathit">a</span><span class="mord mathit">x</span><span class="mopen">(</span><span class="mord mathit">d</span><span class="mord mathit">p</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mbin">âˆ’</span><span class="mord mathrm">1</span><span class="mclose">]</span><span class="mpunct">,</span><span class="mord mathit">d</span><span class="mord mathit">p</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mbin">âˆ’</span><span class="mord mathrm">1</span><span class="mclose">]</span><span class="mbin">+</span><span class="mord mathit">p</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">i</span><span class="mord mathit">c</span><span class="mord mathit">e</span><span class="mord mathit">s</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mclose">]</span><span class="mbin">âˆ’</span><span class="mord mathit">p</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">i</span><span class="mord mathit">c</span><span class="mord mathit">e</span><span class="mord mathit">s</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mclose">]</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mord mspace quad"></span><span class="mord mathit">p</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">i</span><span class="mord mathit">c</span><span class="mord mathit">e</span><span class="mord mathit">s</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mclose">]</span><span class="mrel">&lt;</span><span class="mord mathit">p</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">i</span><span class="mord mathit">c</span><span class="mord mathit">e</span><span class="mord mathit">s</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mclose">]</span></span></span></span></span></p><p>ä½†æ˜¯è¿™æ ·çš„æ—¶é—´å¤æ‚åº¦ä¸º<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><msup><mi>n</mi><mn>2</mn></msup><mo>)</mo></mrow><annotation encoding="application/x-tex">O(n^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8141079999999999em;"></span><span class="strut bottom" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">n</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span>ï¼Œæ˜¯ä¸èƒ½é€šè¿‡çš„</p><p>è€ƒè™‘åˆ°æ¯æ¬¡åªèƒ½ä¹°ä¸€æ”¯è‚¡ç¥¨ï¼Œé‚£ä¹ˆå¯¹äºæ¯ä¸€å¤©æ¥è¯´åªæœ‰ä¸¤ç§æƒ…å†µï¼š</p><ul><li>æŒæœ‰è‚¡ç¥¨</li><li>æ²¡æœ‰è‚¡ç¥¨</li></ul><p>æˆ‘ä»¬ç”¨<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>d</mi><mi>p</mi><mo>[</mo><mi>i</mi><mo>]</mo><mo>[</mo><mn>0</mn><mo>]</mo></mrow><annotation encoding="application/x-tex">dp[i][0]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">d</span><span class="mord mathit">p</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathrm">0</span><span class="mclose">]</span></span></span></span>è¡¨ç¤ºæŒæœ‰è‚¡ç¥¨çš„æœ€å¤§æ”¶ç›Šï¼Œ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>d</mi><mi>p</mi><mo>[</mo><mi>i</mi><mo>]</mo><mo>[</mo><mn>1</mn><mo>]</mo></mrow><annotation encoding="application/x-tex">dp[i][1]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">d</span><span class="mord mathit">p</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathrm">1</span><span class="mclose">]</span></span></span></span>è¡¨ç¤ºæ²¡æœ‰è‚¡ç¥¨çš„æœ€å¤§æ”¶ç›Šï¼Œé‚£ä¹ˆè½¬ç§»å…¬å¼ä¸ºï¼š</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mtable><mtr><mtd><mrow><mi>d</mi><mi>p</mi><mo>[</mo><mi>i</mi><mo>]</mo><mo>[</mo><mn>0</mn><mo>]</mo></mrow></mtd><mtd><mrow><mrow></mrow><mo>=</mo><mi>m</mi><mi>a</mi><mi>x</mi><mo>(</mo><mi>d</mi><mi>p</mi><mo>[</mo><mi>i</mi><mo>]</mo><mo>[</mo><mn>0</mn><mo>]</mo><mo separator="true">,</mo><mi>d</mi><mi>p</mi><mo>[</mo><mi>i</mi><mo>âˆ’</mo><mn>1</mn><mo>]</mo><mo>[</mo><mn>1</mn><mo>]</mo><mo>âˆ’</mo><mi>p</mi><mi>r</mi><mi>i</mi><mi>c</mi><mi>e</mi><mi>s</mi><mo>[</mo><mi>i</mi><mo>]</mo><mo>)</mo></mrow></mtd></mtr><mtr><mtd><mrow><mi>d</mi><mi>p</mi><mo>[</mo><mi>i</mi><mo>]</mo><mo>[</mo><mn>1</mn><mo>]</mo></mrow></mtd><mtd><mrow><mrow></mrow><mo>=</mo><mi>m</mi><mi>a</mi><mi>x</mi><mo>(</mo><mi>d</mi><mi>p</mi><mo>[</mo><mi>i</mi><mo>]</mo><mo>[</mo><mn>1</mn><mo>]</mo><mo separator="true">,</mo><mi>d</mi><mi>p</mi><mo>[</mo><mi>i</mi><mo>âˆ’</mo><mn>1</mn><mo>]</mo><mo>[</mo><mn>0</mn><mo>]</mo><mo>+</mo><mi>p</mi><mi>r</mi><mi>i</mi><mi>c</mi><mi>e</mi><mi>s</mi><mo>[</mo><mi>i</mi><mo>]</mo><mo>)</mo></mrow></mtd></mtr></mtable></mrow><annotation encoding="application/x-tex">\begin{aligned}dp[i][0] &amp;= max(dp[i][0], dp[i - 1][1] - prices[i]) \\dp[i][1] &amp;= max(dp[i][1], dp[i - 1][0] + prices[i])\end{aligned}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.45em;"></span><span class="strut bottom" style="height:2.4000000000000004em;vertical-align:-0.9500000000000004em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist"><span style="top:-0.6099999999999999em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord mathit">d</span><span class="mord mathit">p</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathrm">0</span><span class="mclose">]</span></span></span><span style="top:0.5900000000000003em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord mathit">d</span><span class="mord mathit">p</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathrm">1</span><span class="mclose">]</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="col-align-l"><span class="vlist"><span style="top:-0.6099999999999999em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord displaystyle textstyle uncramped"></span><span class="mrel">=</span><span class="mord mathit">m</span><span class="mord mathit">a</span><span class="mord mathit">x</span><span class="mopen">(</span><span class="mord mathit">d</span><span class="mord mathit">p</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathrm">0</span><span class="mclose">]</span><span class="mpunct">,</span><span class="mord mathit">d</span><span class="mord mathit">p</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mbin">âˆ’</span><span class="mord mathrm">1</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathrm">1</span><span class="mclose">]</span><span class="mbin">âˆ’</span><span class="mord mathit">p</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">i</span><span class="mord mathit">c</span><span class="mord mathit">e</span><span class="mord mathit">s</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mclose">]</span><span class="mclose">)</span></span></span><span style="top:0.5900000000000003em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord displaystyle textstyle uncramped"></span><span class="mrel">=</span><span class="mord mathit">m</span><span class="mord mathit">a</span><span class="mord mathit">x</span><span class="mopen">(</span><span class="mord mathit">d</span><span class="mord mathit">p</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathrm">1</span><span class="mclose">]</span><span class="mpunct">,</span><span class="mord mathit">d</span><span class="mord mathit">p</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mbin">âˆ’</span><span class="mord mathrm">1</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathrm">0</span><span class="mclose">]</span><span class="mbin">+</span><span class="mord mathit">p</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">i</span><span class="mord mathit">c</span><span class="mord mathit">e</span><span class="mord mathit">s</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mclose">]</span><span class="mclose">)</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span></span></span></span></p><p>å¯åˆ©ç”¨æ»šåŠ¨æ•°ç»„ä¼˜åŒ–</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; dp;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">maxProfit</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; prices)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = prices.size();</span><br><span class="line">        <span class="keyword">int</span> dp1 = -prices[<span class="number">0</span>], dp2 = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; n; ++i) &#123;</span><br><span class="line">            <span class="keyword">int</span> ndp1 = max(dp1, dp2 - prices[i]);</span><br><span class="line">            <span class="keyword">int</span> ndp2 = max(dp2, dp1 + prices[i]);</span><br><span class="line">            dp1 = ndp1;</span><br><span class="line">            dp2 = ndp2;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> dp2;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><img src="https://s1.ax1x.com/2020/11/08/BoQ79A.png" alt="" /></p><p>æ—¶é—´å¤æ‚åº¦<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><mi>n</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathit">n</span><span class="mclose">)</span></span></span></span>ï¼Œç©ºé—´å¤æ‚åº¦<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><mn>1</mn><mo>)</mo></mrow><annotation encoding="application/x-tex">O(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathrm">1</span><span class="mclose">)</span></span></span></span></p><h4 id="è´ªå¿ƒ"><a class="markdownIt-Anchor" href="#è´ªå¿ƒ"></a> è´ªå¿ƒ</h4><p>æˆ‘ä»¬å¯ä»¥æŠŠæ¯ä¸ªåŒºé—´åˆ‡åˆ†ï¼Œå³<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>p</mi><mi>r</mi><mi>i</mi><mi>c</mi><mi>e</mi><mi>s</mi><mo>[</mo><mi>i</mi><mo>]</mo><mo>âˆ’</mo><mi>p</mi><mi>r</mi><mi>i</mi><mi>c</mi><mi>e</mi><mi>s</mi><mo>[</mo><mi>j</mi><mo>]</mo><mo>=</mo><msubsup><mo>âˆ‘</mo><mrow><mi>k</mi><mo>=</mo><mi>j</mi><mo>+</mo><mn>1</mn></mrow><mrow><mi>i</mi></mrow></msubsup><mo>(</mo><mi>p</mi><mi>r</mi><mi>i</mi><mi>c</mi><mi>e</mi><mi>s</mi><mo>[</mo><mi>k</mi><mo>]</mo><mo>âˆ’</mo><mi>p</mi><mi>r</mi><mi>c</mi><mi>i</mi><mi>e</mi><mi>s</mi><mo>[</mo><mi>k</mi><mo>âˆ’</mo><mn>1</mn><mo>]</mo><mo>)</mo></mrow><annotation encoding="application/x-tex">prices[i] - prices[j] = \sum_{k=j + 1}^{i}(prices[k] - prcies[k - 1])</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.825664em;"></span><span class="strut bottom" style="height:1.261782em;vertical-align:-0.436118em;"></span><span class="base textstyle uncramped"><span class="mord mathit">p</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">i</span><span class="mord mathit">c</span><span class="mord mathit">e</span><span class="mord mathit">s</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mclose">]</span><span class="mbin">âˆ’</span><span class="mord mathit">p</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">i</span><span class="mord mathit">c</span><span class="mord mathit">e</span><span class="mord mathit">s</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mclose">]</span><span class="mrel">=</span><span class="mop"><span class="op-symbol small-op mop" style="top:-0.0000050000000000050004em;">âˆ‘</span><span class="vlist"><span style="top:0.30001em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mbin">+</span><span class="mord mathrm">1</span></span></span></span><span style="top:-0.364em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit">i</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit">p</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">i</span><span class="mord mathit">c</span><span class="mord mathit">e</span><span class="mord mathit">s</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mclose">]</span><span class="mbin">âˆ’</span><span class="mord mathit">p</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">c</span><span class="mord mathit">i</span><span class="mord mathit">e</span><span class="mord mathit">s</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mbin">âˆ’</span><span class="mord mathrm">1</span><span class="mclose">]</span><span class="mclose">)</span></span></span></span>ï¼Œé‚£ä¹ˆå¯ä»¥è´ªå¿ƒçš„é€‰æ‹©æ¯ä¸€ä¸ª<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>p</mi><mi>r</mi><mi>i</mi><mi>c</mi><mi>e</mi><mi>s</mi><mo>[</mo><mi>k</mi><mo>]</mo><mo>âˆ’</mo><mi>p</mi><mi>r</mi><mi>i</mi><mi>c</mi><mi>e</mi><mi>s</mi><mo>[</mo><mi>k</mi><mo>âˆ’</mo><mn>1</mn><mo>]</mo></mrow><annotation encoding="application/x-tex">prices[k] - prices[k - 1]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">p</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">i</span><span class="mord mathit">c</span><span class="mord mathit">e</span><span class="mord mathit">s</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mclose">]</span><span class="mbin">âˆ’</span><span class="mord mathit">p</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">i</span><span class="mord mathit">c</span><span class="mord mathit">e</span><span class="mord mathit">s</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mbin">âˆ’</span><span class="mord mathrm">1</span><span class="mclose">]</span></span></span></span>ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">maxProfit</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; prices)</span> </span>&#123;   </span><br><span class="line">        <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> n = prices.size();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; n; ++i) &#123;</span><br><span class="line">            ans += max(<span class="number">0</span>, prices[i] - prices[i - <span class="number">1</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><img src="https://s1.ax1x.com/2020/11/08/Bo1LTS.png" alt="" /></p><p>æ—¶é—´å¤æ‚åº¦<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><mi>n</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathit">n</span><span class="mclose">)</span></span></span></span>ï¼Œç©ºé—´å¤æ‚åº¦<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><mn>1</mn><mo>)</mo></mrow><annotation encoding="application/x-tex">O(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathrm">1</span><span class="mclose">)</span></span></span></span></p>]]></content>
    
    
    <summary type="html">&lt;h3 id=&quot;é¢˜æ„&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#é¢˜æ„&quot;&gt;&lt;/a&gt; é¢˜æ„&lt;/h3&gt;
&lt;h4 id=&quot;è‹±æ–‡é¢˜æ„&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#è‹±æ–‡é¢˜æ„&quot;&gt;&lt;/a&gt; è‹±æ–‡é¢˜æ„&lt;/h4&gt;
&lt;p&gt;&lt;img src=&quot;https://s1.ax1x.com/2020/11/08/Bo3iwT.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="leetcode" scheme="https://christopherrliu.github.io/categories/leetcode/"/>
    
    
    <category term="åŠ¨æ€è§„åˆ’" scheme="https://christopherrliu.github.io/tags/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/"/>
    
    <category term="è´ªå¿ƒ" scheme="https://christopherrliu.github.io/tags/%E8%B4%AA%E5%BF%83/"/>
    
    <category term="ç®—æ³•" scheme="https://christopherrliu.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
    <category term="é¢è¯•" scheme="https://christopherrliu.github.io/tags/%E9%9D%A2%E8%AF%95/"/>
    
    <category term="c++" scheme="https://christopherrliu.github.io/tags/c/"/>
    
  </entry>
  
  <entry>
    <title>æ¯å¤©ä¸€é“leetcode-largest-values-from-labels</title>
    <link href="https://christopherrliu.github.io/2020/11/08/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode-largest-values-from-labels/"/>
    <id>https://christopherrliu.github.io/2020/11/08/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode-largest-values-from-labels/</id>
    <published>2020-11-08T01:42:13.000Z</published>
    <updated>2020-11-08T02:00:14.240Z</updated>
    
    <content type="html"><![CDATA[<h3 id="é¢˜æ„"><a class="markdownIt-Anchor" href="#é¢˜æ„"></a> é¢˜æ„</h3><h4 id="è‹±æ–‡é¢˜æ„"><a class="markdownIt-Anchor" href="#è‹±æ–‡é¢˜æ„"></a> è‹±æ–‡é¢˜æ„</h4><p><img src="https://s1.ax1x.com/2020/11/08/BIjBgx.png" alt="" /></p><a id="more"></a><h4 id="ä¸­æ–‡é¢˜æ„"><a class="markdownIt-Anchor" href="#ä¸­æ–‡é¢˜æ„"></a> ä¸­æ–‡é¢˜æ„</h4><p><img src="https://s1.ax1x.com/2020/11/08/BIjsKK.png" alt="" /></p><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>æ ¹æ®è´ªå¿ƒçš„æ€è·¯ï¼Œå°†<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>v</mi><mi>a</mi><mi>l</mi><mi>u</mi><mi>e</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">values</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.69444em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.03588em;">v</span><span class="mord mathit">a</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">u</span><span class="mord mathit">e</span><span class="mord mathit">s</span></span></span></span>ä»å¤§åˆ°å°æ’åºï¼Œç„¶åä¾æ¬¡å–å€¼ï¼Œå¦å¤–è¿˜è¦æ»¡è¶³<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>u</mi><mi>s</mi><mi>e</mi><mi mathvariant="normal">_</mi><mi>l</mi><mi>i</mi><mi>m</mi><mi>i</mi><mi>t</mi></mrow><annotation encoding="application/x-tex">use\_limit</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:1.00444em;vertical-align:-0.31em;"></span><span class="base textstyle uncramped"><span class="mord mathit">u</span><span class="mord mathit">s</span><span class="mord mathit">e</span><span class="mord mathrm" style="margin-right:0.02778em;">_</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">i</span><span class="mord mathit">m</span><span class="mord mathit">i</span><span class="mord mathit">t</span></span></span></span>çš„æ¡ä»¶ï¼Œå†è®¾ç½®ä¸€ä¸ªæ•°ç»„è®°å½•æ¯ä¸ª<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>l</mi><mi>a</mi><mi>b</mi><mi>e</mi><mi>l</mi></mrow><annotation encoding="application/x-tex">label</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.69444em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">a</span><span class="mord mathit">b</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.01968em;">l</span></span></span></span>å·²ç»å–äº†å¤šå°‘å€¼</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">largestValsFromLabels</span>(<span class="params">self, values: List[int], labels: List[int], num_wanted: int, use_limit: int</span>) -&gt; int:</span></span><br><span class="line">        n = len(values)</span><br><span class="line">        ans = <span class="number">0</span></span><br><span class="line">        select_number = <span class="number">0</span></span><br><span class="line">        select_number_per_label = dict()</span><br><span class="line"></span><br><span class="line">        sorted_idx = sorted(range(n), key=<span class="keyword">lambda</span> x : values[x], reverse=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> idx <span class="keyword">in</span> sorted_idx :</span><br><span class="line">            <span class="keyword">if</span> labels[idx] <span class="keyword">not</span> <span class="keyword">in</span> select_number_per_label.keys() :</span><br><span class="line">                select_number_per_label.update(&#123;</span><br><span class="line">                    labels[idx] : <span class="number">0</span></span><br><span class="line">                &#125;)</span><br><span class="line">            <span class="keyword">if</span> select_number_per_label[labels[idx]] &lt; use_limit :</span><br><span class="line">                select_number = select_number + <span class="number">1</span></span><br><span class="line">                select_number_per_label[labels[idx]] = select_number_per_label[labels[idx]] + <span class="number">1</span></span><br><span class="line">                ans += values[idx]</span><br><span class="line">                <span class="keyword">if</span> select_number == num_wanted :</span><br><span class="line">                    <span class="keyword">break</span></span><br><span class="line">            </span><br><span class="line">        <span class="keyword">return</span> ans</span><br></pre></td></tr></table></figure><p><img src="https://s1.ax1x.com/2020/11/08/BIvWeU.png" alt="" /></p><p>æ—¶é—´å¤æ‚åº¦<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><mi>n</mi><mi>l</mi><mi>o</mi><mi>g</mi><mi>n</mi><mo>+</mo><mi>n</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">O(nlogn+n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathit">n</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord mathit">n</span><span class="mbin">+</span><span class="mord mathit">n</span><span class="mclose">)</span></span></span></span>ï¼Œç©ºé—´å¤æ‚åº¦<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><mi>n</mi><mo>+</mo><mi>k</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">O(n + k)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathit">n</span><span class="mbin">+</span><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mclose">)</span></span></span></span></p>]]></content>
    
    
    <summary type="html">&lt;h3 id=&quot;é¢˜æ„&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#é¢˜æ„&quot;&gt;&lt;/a&gt; é¢˜æ„&lt;/h3&gt;
&lt;h4 id=&quot;è‹±æ–‡é¢˜æ„&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#è‹±æ–‡é¢˜æ„&quot;&gt;&lt;/a&gt; è‹±æ–‡é¢˜æ„&lt;/h4&gt;
&lt;p&gt;&lt;img src=&quot;https://s1.ax1x.com/2020/11/08/BIjBgx.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="leetcode" scheme="https://christopherrliu.github.io/categories/leetcode/"/>
    
    
    <category term="è´ªå¿ƒ" scheme="https://christopherrliu.github.io/tags/%E8%B4%AA%E5%BF%83/"/>
    
    <category term="ç®—æ³•" scheme="https://christopherrliu.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
    <category term="é¢è¯•" scheme="https://christopherrliu.github.io/tags/%E9%9D%A2%E8%AF%95/"/>
    
    <category term="python" scheme="https://christopherrliu.github.io/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>æ¯å¤©ä¸€é“leetcode-guess-the-word</title>
    <link href="https://christopherrliu.github.io/2020/11/07/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode-guess-the-word/"/>
    <id>https://christopherrliu.github.io/2020/11/07/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode-guess-the-word/</id>
    <published>2020-11-07T13:32:24.000Z</published>
    <updated>2020-11-07T13:39:40.934Z</updated>
    
    <content type="html"><![CDATA[<h3 id="é¢˜æ„"><a class="markdownIt-Anchor" href="#é¢˜æ„"></a> é¢˜æ„</h3><h4 id="è‹±æ–‡é¢˜æ„"><a class="markdownIt-Anchor" href="#è‹±æ–‡é¢˜æ„"></a> è‹±æ–‡é¢˜æ„</h4><p><img src="https://s1.ax1x.com/2020/11/07/BInMkR.png" alt="" /></p><a id="more"></a><h4 id="ä¸­æ–‡é¢˜æ„"><a class="markdownIt-Anchor" href="#ä¸­æ–‡é¢˜æ„"></a> ä¸­æ–‡é¢˜æ„</h4><p><img src="https://s1.ax1x.com/2020/11/07/BIn3p6.png" alt="" /></p><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>é¦–å…ˆé¢„å¤„ç†å‡ºå•è¯ä¹‹é—´çš„è·ç¦»ï¼Œå³ä¸¤ä¸ªå•è¯ç›¸åŒå­—æ¯çš„æ•°é‡ï¼Œé‚£ä¹ˆæœ‰è¿™æ ·ä¸€ä¸ªäº‹å®ï¼šè‹¥æµ‹è¯•å•è¯ä¸ç­”æ¡ˆå•è¯æœ‰<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.69444em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.03148em;">k</span></span></span></span>ä¸ªç›¸åŒå­—æ¯ï¼Œé‚£ä¹ˆç­”æ¡ˆå•è¯å¿…å®šåœ¨é‚£äº›ä¸æµ‹è¯•å•è¯è·ç¦»ä¸º<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.69444em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.03148em;">k</span></span></span></span>çš„å•è¯ä¸­</p><p>è¿™æ ·çš„è¯ï¼Œæˆ‘ä»¬æ¯æ¬¡é€‰æ‹©ä¸€ä¸ªå•è¯æµ‹è¯•ï¼Œç„¶åæ ¹æ®ç»“æœå»é™¤ä¸å¯èƒ½çš„å•è¯å°±å¯ä»¥å¾—åˆ°ç­”æ¡ˆã€‚ä½†ç”±äºæˆ‘ä»¬åªæœ‰10æ¬¡æœºä¼šï¼Œæˆ‘ä»¬æ¯æ¬¡éœ€è¦å°½å¯èƒ½æ’é™¤å°½é‡å¤šçš„å•è¯ï¼Œä¹Ÿå°±æ˜¯è¯´éœ€è¦é€‰æ‹©ä¸€ä¸ªå½“å‰æ‰€æœ‰è·ç¦»çš„å•è¯æ•°é‡åˆ†å¸ƒæœ€å‡åŒ€çš„å•è¯ï¼Œç­‰ä»·äºæ‰€æœ‰è·ç¦»çš„å•è¯æ•°é‡çš„æœ€å¤§å€¼çš„æœ€å°ï¼ŒæŒ‰ç…§è¿™ä¸ªè§„åˆ™é€‰æ‹©å•è¯å³å¯</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * // This is the master&#x27;s API interface.</span></span><br><span class="line"><span class="comment"> * // You should not implement it, or speculate about its implementation</span></span><br><span class="line"><span class="comment"> * function Master() &#123;</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *     <span class="doctag">@param <span class="type">&#123;string[]&#125;</span> <span class="variable">wordlist</span></span></span></span><br><span class="line"><span class="comment"> *     <span class="doctag">@param <span class="type">&#123;Master&#125;</span> <span class="variable">master</span></span></span></span><br><span class="line"><span class="comment"> *     <span class="doctag">@return <span class="type">&#123;integer&#125;</span></span></span></span><br><span class="line"><span class="comment"> *     this.guess = function(word) &#123;</span></span><br><span class="line"><span class="comment"> *         ...</span></span><br><span class="line"><span class="comment"> *     &#125;;</span></span><br><span class="line"><span class="comment"> * &#125;;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;string[]&#125;</span> <span class="variable">wordlist</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Master&#125;</span> <span class="variable">master</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;void&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> findSecretWord = <span class="function"><span class="keyword">function</span>(<span class="params">wordlist, master</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> same = <span class="keyword">new</span> <span class="built_in">Array</span>();</span><br><span class="line">    <span class="keyword">let</span> valid = <span class="keyword">new</span> <span class="built_in">Array</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; wordlist.length; ++i) &#123;</span><br><span class="line">        same[i] = <span class="keyword">new</span> <span class="built_in">Array</span>();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; wordlist.length; ++j) &#123;</span><br><span class="line">            same[i][j] = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; wordlist.length; ++i) &#123;</span><br><span class="line">        valid[i] = <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">let</span> j = i + <span class="number">1</span>; j &lt; wordlist.length; ++j) &#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">let</span> k = <span class="number">0</span>; k &lt; <span class="number">6</span>; ++k) &#123;</span><br><span class="line">                same[i][j] += wordlist[i][k] == wordlist[j][k] ? <span class="number">1</span> : <span class="number">0</span>;</span><br><span class="line">                same[j][i] += wordlist[i][k] == wordlist[j][k] ? <span class="number">1</span> : <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> tryNumber = <span class="number">0</span>; tryNumber &lt; <span class="number">10</span>; ++tryNumber) &#123;</span><br><span class="line">        <span class="keyword">let</span> flag = <span class="built_in">Number</span>.MAX_SAFE_INTEGER;</span><br><span class="line">        <span class="keyword">let</span> index = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; wordlist.length; ++i) &#123;</span><br><span class="line">            <span class="keyword">let</span> nums = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">7</span>).fill(<span class="number">0</span>);</span><br><span class="line">            <span class="keyword">if</span>(valid[i] == <span class="literal">false</span>) &#123;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; wordlist.length; ++j) &#123;</span><br><span class="line">                <span class="keyword">if</span>(valid[j] == <span class="literal">false</span>) &#123;</span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                nums[same[i][j]]++;</span><br><span class="line">            &#125;</span><br><span class="line">            curMax = <span class="built_in">Math</span>.max(...nums);</span><br><span class="line">            <span class="keyword">if</span>(flag &gt; curMax) &#123;</span><br><span class="line">                flag = curMax;</span><br><span class="line">                index = i;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> guessResult = master.guess(wordlist[index]);</span><br><span class="line">        <span class="keyword">if</span>(guessResult != <span class="number">6</span>) &#123;</span><br><span class="line">            valid[index] = <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">            </span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; wordlist.length; ++i) &#123;</span><br><span class="line">            <span class="keyword">if</span>(same[index][i] != guessResult) &#123;</span><br><span class="line">                valid[i] = <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><img src="https://s1.ax1x.com/2020/11/07/BImgF1.png" alt="" /></p><p>æ—¶é—´å¤æ‚åº¦<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><msup><mi>n</mi><mn>2</mn></msup><mo>)</mo></mrow><annotation encoding="application/x-tex">O(n^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8141079999999999em;"></span><span class="strut bottom" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">n</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span>ï¼Œç©ºé—´å¤æ‚åº¦<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><msup><mi>n</mi><mn>2</mn></msup><mo>)</mo></mrow><annotation encoding="application/x-tex">O(n^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8141079999999999em;"></span><span class="strut bottom" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">n</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span></p>]]></content>
    
    
    <summary type="html">&lt;h3 id=&quot;é¢˜æ„&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#é¢˜æ„&quot;&gt;&lt;/a&gt; é¢˜æ„&lt;/h3&gt;
&lt;h4 id=&quot;è‹±æ–‡é¢˜æ„&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#è‹±æ–‡é¢˜æ„&quot;&gt;&lt;/a&gt; è‹±æ–‡é¢˜æ„&lt;/h4&gt;
&lt;p&gt;&lt;img src=&quot;https://s1.ax1x.com/2020/11/07/BInMkR.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="leetcode" scheme="https://christopherrliu.github.io/categories/leetcode/"/>
    
    
    <category term="ç®—æ³•" scheme="https://christopherrliu.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
    <category term="é¢è¯•" scheme="https://christopherrliu.github.io/tags/%E9%9D%A2%E8%AF%95/"/>
    
    <category term="javascript" scheme="https://christopherrliu.github.io/tags/javascript/"/>
    
    <category term="çº¿æ®µæ ‘" scheme="https://christopherrliu.github.io/tags/%E7%BA%BF%E6%AE%B5%E6%A0%91/"/>
    
    <category term="æ ‘çŠ¶æ•°ç»„" scheme="https://christopherrliu.github.io/tags/%E6%A0%91%E7%8A%B6%E6%95%B0%E7%BB%84/"/>
    
  </entry>
  
  <entry>
    <title>æ¯å¤©ä¸€é“leetcode-count-of-range-sum</title>
    <link href="https://christopherrliu.github.io/2020/11/07/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode-count-of-range-sum/"/>
    <id>https://christopherrliu.github.io/2020/11/07/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93leetcode-count-of-range-sum/</id>
    <published>2020-11-07T11:11:04.000Z</published>
    <updated>2020-11-07T13:32:56.446Z</updated>
    
    <content type="html"><![CDATA[<h3 id="é¢˜æ„"><a class="markdownIt-Anchor" href="#é¢˜æ„"></a> é¢˜æ„</h3><h4 id="è‹±æ–‡é¢˜æ„"><a class="markdownIt-Anchor" href="#è‹±æ–‡é¢˜æ„"></a> è‹±æ–‡é¢˜æ„</h4><p><img src="https://s1.ax1x.com/2020/11/07/B5IPjs.png" alt="" /></p><a id="more"></a><h4 id="ä¸­æ–‡é¢˜æ„"><a class="markdownIt-Anchor" href="#ä¸­æ–‡é¢˜æ„"></a> ä¸­æ–‡é¢˜æ„</h4><p><img src="https://s1.ax1x.com/2020/11/07/B5IVEV.png" alt="" /></p><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><h4 id="æš´åŠ›"><a class="markdownIt-Anchor" href="#æš´åŠ›"></a> æš´åŠ›</h4><p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><msup><mi>n</mi><mn>2</mn></msup><mo>)</mo></mrow><annotation encoding="application/x-tex">O(n^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8141079999999999em;"></span><span class="strut bottom" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">n</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span>çš„éå†æ‰€æœ‰åŒºé—´</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @param &#123;number[]&#125; nums</span></span><br><span class="line"><span class="comment"> * @param &#123;number&#125; lower</span></span><br><span class="line"><span class="comment"> * @param &#123;number&#125; upper</span></span><br><span class="line"><span class="comment"> * @return &#123;number&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">var countRangeSum = function(nums, lower, upper) &#123;</span><br><span class="line">    let ans = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(let i = <span class="number">0</span>; i &lt; nums.length; ++i) &#123;</span><br><span class="line">        let sum = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(let j = i; j &lt; nums.length; ++j) &#123;</span><br><span class="line">            sum += nums[j];</span><br><span class="line">            <span class="keyword">if</span>(sum &gt;= lower &amp;&amp; sum &lt;= upper) &#123;</span><br><span class="line">                ans = ans + <span class="number">1</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><img src="https://s1.ax1x.com/2020/11/07/B5omZt.png" alt="" /></p><h4 id="çº¿æ®µæ ‘"><a class="markdownIt-Anchor" href="#çº¿æ®µæ ‘"></a> çº¿æ®µæ ‘</h4><p>åŒºé—´å’Œçš„é—®é¢˜ä¸€èˆ¬ä¸å‰ç¼€å’Œæœ‰å…³ï¼Œè®¾å‰ç¼€æ•°ç»„ä¸º<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>p</mi><mi>r</mi><mi>e</mi><mi>S</mi><mi>u</mi><mi>m</mi></mrow><annotation encoding="application/x-tex">preSum</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord mathit">p</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.05764em;">S</span><span class="mord mathit">u</span><span class="mord mathit">m</span></span></span></span>ï¼Œé‚£ä¹ˆæ»¡è¶³æ¡ä»¶çš„åŒºé—´ä¸º<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>l</mi><mi>o</mi><mi>w</mi><mi>e</mi><mi>r</mi><mo>â‰¤</mo><mi>p</mi><mi>r</mi><mi>e</mi><mi>S</mi><mi>u</mi><mi>m</mi><mo>[</mo><mi>i</mi><mo>]</mo><mo>âˆ’</mo><mi>p</mi><mi>r</mi><mi>e</mi><mi>S</mi><mi>u</mi><mi>m</mi><mo>[</mo><mi>j</mi><mo>]</mo><mo>â‰¤</mo><mi>u</mi><mi>p</mi><mi>p</mi><mi>e</mi><mi>r</mi></mrow><annotation encoding="application/x-tex">lower \le preSum[i] - preSum[j] \le upper</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right:0.02691em;">w</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mrel">â‰¤</span><span class="mord mathit">p</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.05764em;">S</span><span class="mord mathit">u</span><span class="mord mathit">m</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mclose">]</span><span class="mbin">âˆ’</span><span class="mord mathit">p</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.05764em;">S</span><span class="mord mathit">u</span><span class="mord mathit">m</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mclose">]</span><span class="mrel">â‰¤</span><span class="mord mathit">u</span><span class="mord mathit">p</span><span class="mord mathit">p</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.02778em;">r</span></span></span></span>ï¼ŒåŒ–ç®€ä¸€ä¸‹å°±æ˜¯<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>p</mi><mi>r</mi><mi>e</mi><mi>S</mi><mi>u</mi><mi>m</mi><mo>[</mo><mi>i</mi><mo>]</mo><mo>âˆ’</mo><mi>u</mi><mi>p</mi><mi>p</mi><mi>e</mi><mi>r</mi><mo>â‰¤</mo><mi>p</mi><mi>r</mi><mi>e</mi><mi>S</mi><mi>u</mi><mi>m</mi><mo>[</mo><mi>j</mi><mo>]</mo><mo>â‰¤</mo><mi>p</mi><mi>r</mi><mi>e</mi><mi>S</mi><mi>u</mi><mi>m</mi><mo>[</mo><mi>i</mi><mo>]</mo><mo>âˆ’</mo><mi>l</mi><mi>o</mi><mi>w</mi><mi>e</mi><mi>r</mi><mo>(</mo><mi>j</mi><mo>&lt;</mo><mi>i</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">preSum[i] - upper \le preSum[j] \le preSum[i] - lower(j \lt i)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">p</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.05764em;">S</span><span class="mord mathit">u</span><span class="mord mathit">m</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mclose">]</span><span class="mbin">âˆ’</span><span class="mord mathit">u</span><span class="mord mathit">p</span><span class="mord mathit">p</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mrel">â‰¤</span><span class="mord mathit">p</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.05764em;">S</span><span class="mord mathit">u</span><span class="mord mathit">m</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mclose">]</span><span class="mrel">â‰¤</span><span class="mord mathit">p</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.05764em;">S</span><span class="mord mathit">u</span><span class="mord mathit">m</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mclose">]</span><span class="mbin">âˆ’</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right:0.02691em;">w</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mrel">&lt;</span><span class="mord mathit">i</span><span class="mclose">)</span></span></span></span>ï¼Œä¹Ÿå°±æ˜¯è¯´å¯¹äºæ¯ä¸ª<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.65952em;"></span><span class="strut bottom" style="height:0.65952em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">i</span></span></span></span>ï¼Œåˆæ³•çš„åŒºé—´æ•°ç­‰äºæ»¡è¶³ä¸Šè¿°å…¬å¼çš„<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>j</mi></mrow><annotation encoding="application/x-tex">j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.65952em;"></span><span class="strut bottom" style="height:0.85396em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.05724em;">j</span></span></span></span>çš„æ•°é‡ï¼Œè¿™æ˜¯ä¸€ä¸ªåŒºé—´æ±‚æ•°çš„é—®é¢˜å¯ä»¥ä½¿ç”¨çº¿æ®µæ ‘æˆ–è€…æ ‘çŠ¶æ•°ç»„æ¥è§£å†³ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    tree = dict()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">initial</span>(<span class="params">self, index, l, r</span>) :</span></span><br><span class="line">        self.tree.update(&#123;</span><br><span class="line">            index : <span class="number">0</span></span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="keyword">if</span> l == r :</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        <span class="keyword">else</span> :</span><br><span class="line">            mid = (l + r) // <span class="number">2</span></span><br><span class="line">            self.initial(index * <span class="number">2</span>, l, mid)</span><br><span class="line">            self.initial(index * <span class="number">2</span> + <span class="number">1</span>, mid + <span class="number">1</span>, r)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">update</span>(<span class="params">self, index, l, r, target</span>) :</span></span><br><span class="line">        <span class="keyword">if</span> l == r :</span><br><span class="line">            self.tree[index] = self.tree[index] + <span class="number">1</span></span><br><span class="line">        <span class="keyword">else</span> :</span><br><span class="line">            mid = (l + r) // <span class="number">2</span></span><br><span class="line">            <span class="keyword">if</span> target &lt;= mid :</span><br><span class="line">                self.update(index * <span class="number">2</span>, l, mid, target)</span><br><span class="line">            <span class="keyword">else</span> :</span><br><span class="line">                self.update(index * <span class="number">2</span> + <span class="number">1</span>, mid + <span class="number">1</span>, r, target)</span><br><span class="line">            self.tree[index] = self.tree[index * <span class="number">2</span>] + self.tree[index * <span class="number">2</span> + <span class="number">1</span>]</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">query</span>(<span class="params">self, index, l, r, ql, qr</span>) :</span></span><br><span class="line">        <span class="keyword">if</span> ql &lt;= l <span class="keyword">and</span> qr &gt;= r :</span><br><span class="line">            <span class="keyword">return</span> self.tree[index]</span><br><span class="line">        <span class="keyword">else</span> :</span><br><span class="line">            mid = (l + r) // <span class="number">2</span></span><br><span class="line">            lsum, rsum = <span class="number">0</span>, <span class="number">0</span></span><br><span class="line">            <span class="keyword">if</span> qr &gt; mid :</span><br><span class="line">                rsum = self.query(index * <span class="number">2</span> + <span class="number">1</span>, mid + <span class="number">1</span>, r, ql, qr)</span><br><span class="line">            <span class="keyword">if</span> ql &lt;= mid :</span><br><span class="line">                lsum = self.query(index * <span class="number">2</span>, l, mid, ql, qr)</span><br><span class="line">            <span class="keyword">return</span> lsum + rsum</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">countRangeSum</span>(<span class="params">self, nums: List[int], lower: int, upper: int</span>) -&gt; int:</span></span><br><span class="line">        n = len(nums)</span><br><span class="line">        ans = <span class="number">0</span></span><br><span class="line">        sums = [<span class="number">0</span>]</span><br><span class="line">        preSum = [num <span class="keyword">for</span> num <span class="keyword">in</span> nums]</span><br><span class="line">        realIds = dict()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> n == <span class="number">0</span> :</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">        sums += [preSum[<span class="number">0</span>], preSum[<span class="number">0</span>] - upper, preSum[<span class="number">0</span>] - lower]</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, n) :</span><br><span class="line">            preSum[i] = preSum[i - <span class="number">1</span>] + preSum[i]</span><br><span class="line">            sums += [preSum[i], preSum[i] - upper, preSum[i] - lower]</span><br><span class="line">    </span><br><span class="line">        uniqueSums = sorted(set(sums))</span><br><span class="line">        n = len(uniqueSums)</span><br><span class="line">        <span class="keyword">for</span> idx, sum <span class="keyword">in</span> enumerate(uniqueSums) :</span><br><span class="line">            realIds[sum] = idx + <span class="number">1</span></span><br><span class="line"></span><br><span class="line">        self.initial(<span class="number">1</span>, <span class="number">1</span>, n)</span><br><span class="line">        </span><br><span class="line">        self.update(<span class="number">1</span>, <span class="number">1</span>, n, realIds[<span class="number">0</span>])</span><br><span class="line">        <span class="keyword">for</span> sum <span class="keyword">in</span> preSum :</span><br><span class="line">            ans += self.query(<span class="number">1</span>, <span class="number">1</span>, n, realIds[sum - upper], realIds[sum - lower])</span><br><span class="line">            self.update(<span class="number">1</span>, <span class="number">1</span>, n, realIds[sum])</span><br><span class="line">                </span><br><span class="line">        <span class="keyword">return</span> ans</span><br></pre></td></tr></table></figure><p><img src="https://s1.ax1x.com/2020/11/07/B5IyUf.png" alt="" /></p><p>æ—¶é—´å¤æ‚åº¦<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><mi>n</mi><mi>l</mi><mi>o</mi><mi>g</mi><mi>n</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">O(nlogn)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathit">n</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord mathit">n</span><span class="mclose">)</span></span></span></span>ï¼Œç©ºé—´å¤æ‚åº¦<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><mi>n</mi><mi>l</mi><mi>o</mi><mi>g</mi><mi>n</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">O(nlogn)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathit">n</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord mathit">n</span><span class="mclose">)</span></span></span></span></p><h4 id="æ ‘çŠ¶æ•°ç»„"><a class="markdownIt-Anchor" href="#æ ‘çŠ¶æ•°ç»„"></a> æ ‘çŠ¶æ•°ç»„</h4><p>å½“ç„¶åŒºé—´å’Œä¹Ÿå¯ä»¥ç”¨æ ‘çŠ¶æ•°ç»„ç»´æŠ¤</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">long</span> <span class="keyword">long</span>&gt; pre_sum;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; tree;</span><br><span class="line">    <span class="built_in">unordered_map</span>&lt;<span class="keyword">long</span> <span class="keyword">long</span>, <span class="keyword">int</span>&gt; sum2idx;</span><br><span class="line">    <span class="built_in">set</span>&lt;<span class="keyword">long</span> <span class="keyword">long</span>&gt; sums;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> n, <span class="keyword">int</span> loc)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">while</span>(loc &lt;= n) &#123;</span><br><span class="line">            tree[loc]++;</span><br><span class="line">            loc += (loc &amp; (-loc));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> loc)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(loc) &#123;</span><br><span class="line">            res += tree[loc];</span><br><span class="line">            loc -= (loc &amp; (-loc));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">countRangeSum</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums, <span class="keyword">int</span> lower, <span class="keyword">int</span> upper)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = nums.size();</span><br><span class="line">        <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">        pre_sum.resize(n);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(n == <span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        pre_sum[<span class="number">0</span>] = nums[<span class="number">0</span>];</span><br><span class="line">        sums.insert((<span class="keyword">long</span> <span class="keyword">long</span>)nums[<span class="number">0</span>]);</span><br><span class="line">        sums.insert((<span class="keyword">long</span> <span class="keyword">long</span>)nums[<span class="number">0</span>] - upper);</span><br><span class="line">        sums.insert((<span class="keyword">long</span> <span class="keyword">long</span>)nums[<span class="number">0</span>] - lower);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; n; ++i) &#123;</span><br><span class="line">            pre_sum[i] = pre_sum[i - <span class="number">1</span>] + (<span class="keyword">long</span> <span class="keyword">long</span>)nums[i];</span><br><span class="line">            sums.insert((<span class="keyword">long</span> <span class="keyword">long</span>)pre_sum[i]);</span><br><span class="line">            sums.insert((<span class="keyword">long</span> <span class="keyword">long</span>)pre_sum[i] - upper);</span><br><span class="line">            sums.insert((<span class="keyword">long</span> <span class="keyword">long</span>)pre_sum[i] - lower);</span><br><span class="line">        &#125;</span><br><span class="line">        sums.insert(<span class="number">0</span>);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">const</span> <span class="keyword">auto</span>&amp; sum : sums) &#123;</span><br><span class="line">            sum2idx[sum] = ++count;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        n = sums.size();</span><br><span class="line">        tree.resize(n + <span class="number">5</span>, <span class="number">0</span>);</span><br><span class="line">        update(n, sum2idx[<span class="number">0</span>]);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">const</span> <span class="keyword">auto</span>&amp; sum : pre_sum) &#123;</span><br><span class="line">            ans += query(sum2idx[sum - lower]) - query(sum2idx[sum - upper] - <span class="number">1</span>);</span><br><span class="line">            update(n, sum2idx[sum]);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><img src="https://s1.ax1x.com/2020/11/07/B5LWFI.png" alt="" /></p><p>æ—¶é—´å¤æ‚åº¦<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><mi>n</mi><mi>l</mi><mi>o</mi><mi>g</mi><mi>n</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">O(nlogn)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathit">n</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord mathit">n</span><span class="mclose">)</span></span></span></span>ï¼Œç©ºé—´å¤æ‚åº¦ä¸º<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><mi>n</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathit">n</span><span class="mclose">)</span></span></span></span></p>]]></content>
    
    
    <summary type="html">&lt;h3 id=&quot;é¢˜æ„&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#é¢˜æ„&quot;&gt;&lt;/a&gt; é¢˜æ„&lt;/h3&gt;
&lt;h4 id=&quot;è‹±æ–‡é¢˜æ„&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#è‹±æ–‡é¢˜æ„&quot;&gt;&lt;/a&gt; è‹±æ–‡é¢˜æ„&lt;/h4&gt;
&lt;p&gt;&lt;img src=&quot;https://s1.ax1x.com/2020/11/07/B5IPjs.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="leetcode" scheme="https://christopherrliu.github.io/categories/leetcode/"/>
    
    
    <category term="C++" scheme="https://christopherrliu.github.io/tags/C/"/>
    
    <category term="ç®—æ³•" scheme="https://christopherrliu.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
    <category term="é¢è¯•" scheme="https://christopherrliu.github.io/tags/%E9%9D%A2%E8%AF%95/"/>
    
    <category term="python" scheme="https://christopherrliu.github.io/tags/python/"/>
    
    <category term="javascript" scheme="https://christopherrliu.github.io/tags/javascript/"/>
    
    <category term="çº¿æ®µæ ‘" scheme="https://christopherrliu.github.io/tags/%E7%BA%BF%E6%AE%B5%E6%A0%91/"/>
    
    <category term="æ ‘çŠ¶æ•°ç»„" scheme="https://christopherrliu.github.io/tags/%E6%A0%91%E7%8A%B6%E6%95%B0%E7%BB%84/"/>
    
  </entry>
  
</feed>
